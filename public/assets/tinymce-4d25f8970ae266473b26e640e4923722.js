window.tinyMCEPreInit=window.tinyMCEPreInit||{base:"/assets/tinymce",query:"3.5.9",suffix:""},function(t){var e,n=/^\s*|\s*$/g,i="$1"==="B".replace(/A(.)|B/,"$1"),r={majorVersion:"3",minorVersion:"5.9",releaseDate:"2013-10-10",_init:function(){function e(t){return t.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(t.src)?(/_(src|dev)\.js/g.test(t.src)&&(l.suffix="_src"),-1!=(a=t.src.indexOf("?"))&&(l.query=t.src.substring(a+1)),l.baseURL=t.src.substring(0,t.src.lastIndexOf("/")),o&&-1==l.baseURL.indexOf("://")&&0!==l.baseURL.indexOf("/")&&(l.baseURL=o+l.baseURL),l.baseURL):null}var n,i,r,o,a,s,l=this,c=document,u=navigator,d=u.userAgent;if(l.isIE11=-1!=d.indexOf("Trident/")&&-1!=d.indexOf("rv:"),l.isOpera=t.opera&&opera.buildNumber,l.isWebKit=/WebKit/.test(d),l.isIE=!l.isWebKit&&!l.isOpera&&/MSIE/gi.test(d)&&/Explorer/gi.test(u.appName)||l.isIE11,l.isIE6=l.isIE&&/MSIE [56]/.test(d),l.isIE7=l.isIE&&/MSIE [7]/.test(d),l.isIE8=l.isIE&&/MSIE [8]/.test(d),l.isIE9=l.isIE&&/MSIE [9]/.test(d),l.isGecko=!l.isWebKit&&!l.isIE11&&/Gecko/.test(d),l.isMac=-1!=d.indexOf("Mac"),l.isAir=/adobeair/i.test(d),l.isIDevice=/(iPad|iPhone)/.test(d),l.isIOS5=l.isIDevice&&d.match(/AppleWebKit\/(\d*)/)[1]>=534,t.tinyMCEPreInit)return l.suffix=tinyMCEPreInit.suffix,l.baseURL=tinyMCEPreInit.base,void(l.query=tinyMCEPreInit.query);for(l.suffix="",i=c.getElementsByTagName("base"),n=0;n<i.length;n++)s=i[n].href,s&&(/^https?:\/\/[^\/]+$/.test(s)&&(s+="/"),o=s?s.match(/.*\//)[0]:"");for(i=c.getElementsByTagName("script"),n=0;n<i.length;n++)if(e(i[n]))return;if(r=c.getElementsByTagName("head")[0])for(i=r.getElementsByTagName("script"),n=0;n<i.length;n++)if(e(i[n]))return},is:function(t,n){return n?"array"==n&&r.isArray(t)?!0:typeof t==n:t!==e},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},makeMap:function(t,e,n){var i;for(t=t||[],e=e||",","string"==typeof t&&(t=t.split(e)),n=n||{},i=t.length;i--;)n[t[i]]={};return n},each:function(t,n,i){var r,o;if(!t)return 0;if(i=i||t,t.length!==e){for(r=0,o=t.length;o>r;r++)if(n.call(i,t[r],r,t)===!1)return 0}else for(r in t)if(t.hasOwnProperty(r)&&n.call(i,t[r],r,t)===!1)return 0;return 1},map:function(t,e){var n=[];return r.each(t,function(t){n.push(e(t))}),n},grep:function(t,e){var n=[];return r.each(t,function(t){(!e||e(t))&&n.push(t)}),n},inArray:function(t,e){var n,i;if(t)for(n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},extend:function(t,n){var i,r,o,a,s=arguments;for(i=1,r=s.length;r>i;i++){n=s[i];for(o in n)n.hasOwnProperty(o)&&(a=n[o],a!==e&&(t[o]=a))}return t},trim:function(t){return(t?""+t:"").replace(n,"")},create:function(t,e,n){var i,r,o,a,s,l=this,c=0;if(t=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(t),o=t[3].match(/(^|\.)(\w+)$/i)[2],r=l.createNS(t[3].replace(/\.\w+$/,""),n),!r[o]){if("static"==t[2])return r[o]=e,void(this.onCreate&&this.onCreate(t[2],t[3],r[o]));e[o]||(e[o]=function(){},c=1),r[o]=e[o],l.extend(r[o].prototype,e),t[5]&&(i=l.resolve(t[5]).prototype,a=t[5].match(/\.(\w+)$/i)[1],s=r[o],r[o]=c?function(){return i[a].apply(this,arguments)}:function(){return this.parent=i[a],s.apply(this,arguments)},r[o].prototype[o]=r[o],l.each(i,function(t,e){r[o].prototype[e]=i[e]}),l.each(e,function(t,e){i[e]?r[o].prototype[e]=function(){return this.parent=i[e],t.apply(this,arguments)}:e!=o&&(r[o].prototype[e]=t)})),l.each(e["static"],function(t,e){r[o][e]=t}),this.onCreate&&this.onCreate(t[2],t[3],r[o].prototype)}},walk:function(t,e,n,i){i=i||this,t&&(n&&(t=t[n]),r.each(t,function(t,o){return e.call(i,t,o,n)===!1?!1:void r.walk(t,e,n,i)}))},createNS:function(e,n){var i,r;for(n=n||t,e=e.split("."),i=0;i<e.length;i++)r=e[i],n[r]||(n[r]={}),n=n[r];return n},resolve:function(e,n){var i,r;for(n=n||t,e=e.split("."),i=0,r=e.length;r>i&&(n=n[e[i]],n);i++);return n},addUnload:function(e,n){function i(){function e(){n.detachEvent("onstop",e),r&&r(),n=0}var n=document;"interactive"==n.readyState&&(n&&n.attachEvent("onstop",e),t.setTimeout(function(){n&&n.detachEvent("onstop",e)},0))}var r,o=this;return r=function(){var e,n,a=o.unloads;if(a){for(n in a)e=a[n],e&&e.func&&e.func.call(e.scope,1);t.detachEvent?(t.detachEvent("onbeforeunload",i),t.detachEvent("onunload",r)):t.removeEventListener&&t.removeEventListener("unload",r,!1),o.unloads=e=a=w=r=0,t.CollectGarbage&&CollectGarbage()}},e={func:e,scope:n||this},o.unloads?o.unloads.push(e):(t.attachEvent?(t.attachEvent("onunload",r),t.attachEvent("onbeforeunload",i)):t.addEventListener&&t.addEventListener("unload",r,!1),o.unloads=[e]),e},removeUnload:function(t){var e=this.unloads,n=null;return r.each(e,function(i,r){return i&&i.func==t?(e.splice(r,1),n=t,!1):void 0}),n},explode:function(t,e){return!t||r.is(t,"array")?t:r.map(t.split(e||","),r.trim)},_addVer:function(t){var e;return this.query?(e=(-1==t.indexOf("?")?"?":"&")+this.query,-1==t.indexOf("#")?t+e:t.replace("#",e+"#")):t},_replace:function(t,n,r){return i?r.replace(t,function(){var t,i=n,r=arguments;for(t=0;t<r.length-2;t++)i=r[t]===e?i.replace(new RegExp("\\$"+t,"g"),""):i.replace(new RegExp("\\$"+t,"g"),r[t]);return i}):r.replace(t,n)}};r._init(),t.tinymce=t.tinyMCE=r}(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:!1,Dispatcher:function(t){this.scope=t||this,this.listeners=[]},add:function(t,e){return this.listeners.push({cb:t,scope:e||this.scope}),t},addToTop:function(t,e){var n=this,i={cb:t,scope:e||n.scope};return n.inDispatch?n.listeners=[i].concat(n.listeners):n.listeners.unshift(i),t},remove:function(t){var e=this.listeners,n=null;return tinymce.each(e,function(i,r){return t==i.cb?(n=i,e.splice(r,1),!1):void 0}),n},dispatch:function(){var t,e,n,i=this,r=arguments,o=i.listeners;for(i.inDispatch=!0,e=0;e<o.length&&(n=o[e],t=n.cb.apply(n.scope,r.length>0?r:[n.scope]),t!==!1);e++);return i.inDispatch=!1,t}}),function(){var t=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(e,n){var i,r,o=this;return e=tinymce.trim(e),n=o.settings=n||{},/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)?void(o.source=e):(0===e.indexOf("/")&&0!==e.indexOf("//")&&(e=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=n.base_uri?n.base_uri.path:new tinymce.util.URI(location.href).directory,e=(n.base_uri&&n.base_uri.protocol||"http")+"://mce_host"+o.toAbsPath(r,e)),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),t(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(t,n){var i=e[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),o[t]=i}),i=n.base_uri,void(i&&(o.protocol||(o.protocol=i.protocol),o.userInfo||(o.userInfo=i.userInfo),o.port||"mce_host"!==o.host||(o.port=i.port),o.host&&"mce_host"!==o.host||(o.host=i.host),o.source="")))},setPath:function(t){var e=this;t=/^(.*?)\/?(\w+)?$/.exec(t),e.path=t[0],e.directory=t[1],e.file=t[2],e.source="",e.getURI()},toRelative:function(t){var e,n=this;if("./"===t)return t;if(t=new tinymce.util.URI(t,{base_uri:n}),"mce_host"!=t.host&&n.host!=t.host&&t.host||n.port!=t.port||n.protocol!=t.protocol)return t.getURI();var i=n.getURI(),r=t.getURI();return i==r||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==r?i:(e=n.toRelPath(n.path,t.path),t.query&&(e+="?"+t.query),t.anchor&&(e+="#"+t.anchor),e)},toAbsolute:function(t,e){return t=new tinymce.util.URI(t,{base_uri:this}),t.getURI(this.host==t.host&&this.protocol==t.protocol?e:0)},toRelPath:function(t,e){var n,i,r,o=0,a="";if(t=t.substring(0,t.lastIndexOf("/")),t=t.split("/"),n=e.split("/"),t.length>=n.length)for(i=0,r=t.length;r>i;i++)if(i>=n.length||t[i]!=n[i]){o=i+1;break}if(t.length<n.length)for(i=0,r=n.length;r>i;i++)if(i>=t.length||t[i]!=n[i]){o=i+1;break}if(1===o)return e;for(i=0,r=t.length-(o-1);r>i;i++)a+="../";for(i=o-1,r=n.length;r>i;i++)a+=i!=o-1?"/"+n[i]:n[i];return a},toAbsPath:function(e,n){var i,r,o,a=0,s=[];for(r=/\/$/.test(n)?"/":"",e=e.split("/"),n=n.split("/"),t(e,function(t){t&&s.push(t)}),e=s,i=n.length-1,s=[];i>=0;i--)0!==n[i].length&&"."!==n[i]&&(".."!==n[i]?a>0?a--:s.push(n[i]):a++);return i=e.length-a,o=0>=i?s.reverse().join("/"):e.slice(0,i).join("/")+"/"+s.reverse().join("/"),0!==o.indexOf("/")&&(o="/"+o),r&&o.lastIndexOf("/")!==o.length-1&&(o+=r),o},getURI:function(t){var e,n=this;return(!n.source||t)&&(e="",t||(n.protocol&&(e+=n.protocol+"://"),n.userInfo&&(e+=n.userInfo+"@"),n.host&&(e+=n.host),n.port&&(e+=":"+n.port)),n.path&&(e+=n.path),n.query&&(e+="?"+n.query),n.anchor&&(e+="#"+n.anchor),n.source=e),n.source}})}(),function(){var t=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(e){var n,i=this.get(e);return i&&t(i.split("&"),function(t){t=t.split("="),n=n||{},n[unescape(t[0])]=unescape(t[1])}),n},setHash:function(e,n,i,r,o,a){var s="";t(n,function(t,e){s+=(s?"&":"")+escape(e)+"="+escape(t)}),this.set(e,s,i,r,o,a)},get:function(t){var e,n,i=document.cookie,r=t+"=";if(i){if(n=i.indexOf("; "+r),-1==n){if(n=i.indexOf(r),0!==n)return null}else n+=2;return e=i.indexOf(";",n),-1==e&&(e=i.length),unescape(i.substring(n+r.length,e))}},set:function(t,e,n,i,r,o){document.cookie=t+"="+escape(e)+(n?"; expires="+n.toGMTString():"")+(i?"; path="+escape(i):"")+(r?"; domain="+r:"")+(o?"; secure":"")},remove:function(t,e,n){var i=new Date;i.setTime(i.getTime()-1e3),this.set(t,"",i,e,n)}})}(),function(){function serialize(t,e){var n,i,r,o;if(e=e||'"',null==t)return"null";if(r=typeof t,"string"==r)return i="\bb	t\nn\ff\rr\"\"''\\\\",e+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(t,r){return'"'===e&&"'"===t?t:(n=i.indexOf(r),n+1?"\\"+i.charAt(n+1):(t=r.charCodeAt().toString(16),"\\u"+"0000".substring(t.length)+t))})+e;if("object"==r){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(n=0,i="[";n<t.length;n++)i+=(n>0?",":"")+serialize(t[n],e);return i+"]"}i="{";for(o in t)t.hasOwnProperty(o)&&(i+="function"!=typeof t[o]?(i.length>1?","+e:e)+o+e+":"+serialize(t[o],e):"");return i+"}"}return""+t}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(t){function e(){!t.async||4==i.readyState||a++>1e4?(t.success&&1e4>a&&200==i.status?t.success.call(t.success_scope,""+i.responseText,i,t):t.error&&t.error.call(t.error_scope,a>1e4?"TIMED_OUT":"GENERAL",i,t),i=null):o.setTimeout(e,10)}function n(t){i=0;try{i=new ActiveXObject(t)}catch(e){}return i}var i,r,o=window,a=0;if(t.scope=t.scope||this,t.success_scope=t.success_scope||t.scope,t.error_scope=t.error_scope||t.scope,t.async=t.async===!1?!1:!0,t.data=t.data||"",i=o.XMLHttpRequest?new XMLHttpRequest:n("Microsoft.XMLHTTP")||n("Msxml2.XMLHTTP")){if(i.overrideMimeType&&i.overrideMimeType(t.content_type),i.open(t.type||(t.data?"POST":"GET"),t.url,t.async),t.content_type&&i.setRequestHeader("Content-Type",t.content_type),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(t.data),!t.async)return e();r=o.setTimeout(e,10)}}}),function(){var t=tinymce.extend,e=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(e){this.settings=t({},e),this.count=0},send:function(i){var r=i.error,o=i.success;i=t(this.settings,i),i.success=function(t,n){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?r.call(i.error_scope||i.scope,t.error,n):o.call(i.success_scope||i.scope,t.result)},i.error=function(t,e){r&&r.call(i.error_scope||i.scope,t,e)},i.data=e.serialize({id:i.id||"c"+this.count++,method:i.method,params:i.params}),i.content_type="application/json",n.send(i)},"static":{sendRPC:function(t){return(new tinymce.util.JSONRequest).send(t)}}})}(),function(t){t.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(t){return t.shiftKey||t.ctrlKey||t.altKey},metaKeyPressed:function(e){return t.isMac?e.metaKey:e.ctrlKey&&!e.altKey}}}(tinymce),tinymce.util.Quirks=function(t){function e(e,n){try{t.getDoc().execCommand(e,!1,n)}catch(i){}}function n(){var e=t.getDoc().documentMode;return e?e:6}function i(t){return t.isDefaultPrevented()}function r(){function e(e){function n(){if(3==s.nodeType){if(e&&l==s.length)return!0;if(!e&&0===l)return!0}}var i,r,o,a,s,l,c;i=L.getRng();var u=[i.startContainer,i.startOffset,i.endContainer,i.endOffset];if(i.collapsed||(e=!0),s=i[(e?"start":"end")+"Container"],l=i[(e?"start":"end")+"Offset"],3==s.nodeType&&(r=N.getParent(i.startContainer,N.isBlock),e&&(r=N.getNext(r,N.isBlock)),!r||!n()&&i.collapsed||(o=N.create("em",{id:"__mceDel"}),B(tinymce.grep(r.childNodes),function(t){o.appendChild(t)}),r.appendChild(o))),i=N.createRng(),i.setStart(u[0],u[1]),i.setEnd(u[2],u[3]),L.setRng(i),t.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null),o){for(a=L.getBookmark();c=N.get("__mceDel");)N.remove(c,!0);L.moveToBookmark(a)}}t.onKeyDown.add(function(t,n){var r;r=n.keyCode==D,i(n)||!r&&n.keyCode!=A||E.modifierPressed(n)||(n.preventDefault(),e(r))}),t.addCommand("Delete",function(){e()})}function o(){function e(t){var e=N.create("body"),n=t.cloneContents();return e.appendChild(n),L.serializer.serialize(e,{format:"html"})}function n(n){var i=e(n),r=N.createRng();r.selectNode(t.getBody());var o=e(r);return i===o}t.onKeyDown.add(function(t,e){var r,o=e.keyCode;if(!i(e)&&(o==D||o==A)){if(r=t.selection.isCollapsed(),r&&!N.isEmpty(t.getBody()))return;if(tinymce.isIE&&!r)return;if(!r&&!n(t.selection.getRng()))return;t.setContent(""),t.selection.setCursorLocation(t.getBody(),0),t.nodeChanged()}})}function a(){t.onKeyDown.add(function(t,e){!i(e)&&65==e.keyCode&&E.metaKeyPressed(e)&&(e.preventDefault(),t.execCommand("SelectAll"))})}function s(){t.settings.content_editable||(N.bind(t.getDoc(),"focusin",function(){L.setRng(L.getRng())}),N.bind(t.getDoc(),"mousedown",function(e){e.target==t.getDoc().documentElement&&(t.getWin().focus(),L.setRng(L.getRng()))}))}function l(){t.onKeyDown.add(function(t,e){if(!i(e)&&e.keyCode===A&&L.isCollapsed()&&0===L.getRng(!0).startOffset){var n=L.getNode(),r=n.previousSibling;r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(N.remove(r),tinymce.dom.Event.cancel(e))}})}function c(){Range.prototype.getClientRects||t.onMouseDown.add(function(t,e){if(!i(e)&&"HTML"===e.target.nodeName){var n=t.getBody();n.blur(),setTimeout(function(){n.focus()},0)}})}function u(){t.onClick.add(function(t,e){e=e.target,/^(IMG|HR)$/.test(e.nodeName)&&L.getSel().setBaseAndExtent(e,0,e,1),"A"==e.nodeName&&N.hasClass(e,"mceItemAnchor")&&L.select(e),t.nodeChanged()})}function d(){function e(){var e=N.getAttribs(L.getStart().cloneNode(!1));return function(){var n=L.getStart();n!==t.getBody()&&(N.setAttrib(n,"style",null),B(e,function(t){n.setAttributeNode(t.cloneNode(!0))}))}}function n(){return!L.isCollapsed()&&N.getParent(L.getStart(),N.isBlock)!=N.getParent(L.getEnd(),N.isBlock)}function r(t,e){return e.preventDefault(),!1}t.onKeyPress.add(function(t,r){var o;return i(r)||8!=r.keyCode&&46!=r.keyCode||!n()?void 0:(o=e(),t.getDoc().execCommand("delete",!1,null),o(),r.preventDefault(),!1)}),N.bind(t.getDoc(),"cut",function(o){var a;!i(o)&&n()&&(a=e(),t.onKeyUp.addToTop(r),setTimeout(function(){a(),t.onKeyUp.remove(r)},0))})}function h(){var e,n;N.bind(t.getDoc(),"selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){var n=L.getRng();e&&tinymce.dom.RangeUtils.compareRanges(n,e)||(t.nodeChanged(),e=n)},50)})}function f(){document.body.setAttribute("role","application")}function p(){t.onKeyDown.add(function(t,e){if(!i(e)&&e.keyCode===A&&L.isCollapsed()&&0===L.getRng(!0).startOffset){var n=L.getNode().previousSibling;if(n&&n.nodeName&&"table"===n.nodeName.toLowerCase())return tinymce.dom.Event.cancel(e)}})}function m(){n()>7||(e("RespectVisibilityInDesign",!0),t.contentStyles.push(".mceHideBrInPre pre br {display: none}"),N.addClass(t.getBody(),"mceHideBrInPre"),I.addNodeFilter("pre",function(t){for(var e,n,i,r,o=t.length;o--;)for(e=t[o].getAll("br"),n=e.length;n--;)i=e[n],r=i.prev,r&&3===r.type&&"\n"!=r.value.charAt(r.value-1)?r.value+="\n":i.parent.insert(new tinymce.html.Node("#text",3),i,!0).value="\n"}),R.addNodeFilter("pre",function(t){for(var e,n,i,r,o=t.length;o--;)for(e=t[o].getAll("br"),n=e.length;n--;)i=e[n],r=i.prev,r&&3==r.type&&(r.value=r.value.replace(/\r?\n$/,""))}))}function g(){N.bind(t.getBody(),"mouseup",function(){var t,e=L.getNode();"IMG"==e.nodeName&&((t=N.getStyle(e,"width"))&&(N.setAttrib(e,"width",t.replace(/[^0-9%]+/g,"")),N.setStyle(e,"width","")),(t=N.getStyle(e,"height"))&&(N.setAttrib(e,"height",t.replace(/[^0-9%]+/g,"")),N.setStyle(e,"height","")))})}function v(){t.onKeyDown.add(function(t,e){var n,r,o,a,s,l,c;if(n=e.keyCode==D,!i(e)&&(n||e.keyCode==A)&&!E.modifierPressed(e)&&(r=L.getRng(),o=r.startContainer,a=r.startOffset,c=r.collapsed,3==o.nodeType&&o.nodeValue.length>0&&(0===a&&!c||c&&a===(n?0:1)))){if(l=o.previousSibling,l&&"IMG"==l.nodeName)return;nonEmptyElements=t.schema.getNonEmptyElements(),e.preventDefault(),s=N.create("br",{id:"__tmp"}),o.parentNode.insertBefore(s,o),t.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),o=L.getRng().startContainer,l=o.previousSibling,l&&1==l.nodeType&&!N.isBlock(l)&&N.isEmpty(l)&&!nonEmptyElements[l.nodeName.toLowerCase()]&&N.remove(l),N.remove("__tmp")}})}function y(){t.onKeyDown.add(function(t,e){var n,r,o,a,s;if(!i(e)&&e.keyCode==E.BACKSPACE&&(n=L.getRng(),r=n.startContainer,o=n.startOffset,a=N.getRoot(),s=r,n.collapsed&&0===o)){for(;s&&s.parentNode&&s.parentNode.firstChild==s&&s.parentNode!=a;)s=s.parentNode;"BLOCKQUOTE"===s.tagName&&(t.formatter.toggle("blockquote",null,s),n=N.createRng(),n.setStart(r,0),n.setEnd(r,0),L.setRng(n))}})}function b(){function n(){t._refreshContentEditable(),e("StyleWithCSS",!1),e("enableInlineTableEditing",!1),P.object_resizing||e("enableObjectResizing",!1)}P.readonly||(t.onBeforeExecCommand.add(n),t.onMouseDown.add(n))}function x(){function e(){B(N.select("a"),function(t){var e=t.parentNode,n=N.getRoot();if(e.lastChild===t){for(;e&&!N.isBlock(e);){if(e.parentNode.lastChild!==e||e===n)return;e=e.parentNode}N.add(e,"br",{"data-mce-bogus":1})}})}t.onExecCommand.add(function(t,n){"CreateLink"===n&&e(t)}),t.onSetContent.add(L.onSetContent.add(e))}function w(){P.forced_root_block&&t.onInit.add(function(){e("DefaultParagraphSeparator",P.forced_root_block)})}function _(){function e(e,n){e&&n.initial||t.execCommand("mceRepaint")}t.onUndo.add(e),t.onRedo.add(e),t.onSetContent.add(e)}function C(){t.onKeyDown.add(function(t,e){var n;i(e)||e.keyCode!=A||(n=t.getDoc().selection.createRange(),n&&n.item&&(e.preventDefault(),t.undoManager.beforeChange(),N.remove(n.item(0)),t.undoManager.add()))})}function T(){var e;n()>=10&&(e="",B("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),t.contentStyles.push(e+"{padding-right: 1px !important}"))}function S(){function n(t){var e,n;e=t.screenX-h,n=t.screenY-f,y=e*d[2]+p,b=n*d[3]+m,y=5>y?5:y,b=5>b?5:b,(E.modifierPressed(t)||"IMG"==c.nodeName&&d[2]*d[3]!==0)&&(y=Math.round(b/g),b=Math.round(y*g)),N.setStyles(u,{width:y,height:b}),d[2]<0&&u.clientWidth<=y&&N.setStyle(u,"left",s+(p-y)),d[3]<0&&u.clientHeight<=b&&N.setStyle(u,"top",l+(m-b))}function i(){function e(e,n){n&&(c.style[e]||!t.schema.isValid(c.nodeName.toLowerCase(),e)?N.setStyle(c,e,n):N.setAttrib(c,e,n))}e("width",y),e("height",b),N.unbind(w,"mousemove",n),N.unbind(w,"mouseup",i),x!=w&&(N.unbind(x,"mousemove",n),N.unbind(x,"mouseup",i)),N.remove(u),r(c)}function r(t){var e,r,a;o(),e=N.getPos(t),s=e.x,l=e.y,r=t.offsetWidth,a=t.offsetHeight,c!=t&&(c=t,y=b=0),B(v,function(t,e){var o;o=N.get("mceResizeHandle"+e),o?N.show(o):(o=N.add(w.documentElement,"div",{id:"mceResizeHandle"+e,"class":"mceResizeHandle",style:"cursor:"+e+"-resize; margin:0; padding:0"}),N.bind(o,"mousedown",function(e){e.preventDefault(),i(),h=e.screenX,f=e.screenY,p=c.clientWidth,m=c.clientHeight,g=m/p,d=t,u=c.cloneNode(!0),N.addClass(u,"mceClonedResizable"),N.setStyles(u,{left:s,top:l,margin:0}),w.documentElement.appendChild(u),N.bind(w,"mousemove",n),N.bind(w,"mouseup",i),x!=w&&(N.bind(x,"mousemove",n),N.bind(x,"mouseup",i))})),N.setStyles(o,{left:r*t[0]+s-o.offsetWidth/2,top:a*t[1]+l-o.offsetHeight/2})}),tinymce.isOpera||"IMG"!=c.nodeName||c.setAttribute("data-mce-selected","1")}function o(){c&&c.removeAttribute("data-mce-selected");for(var t in v)N.hide("mceResizeHandle"+t)}function a(){var t=N.getParent(L.getNode(),"table,img");B(N.select("img[data-mce-selected]"),function(t){t.removeAttribute("data-mce-selected")}),t?r(t):o()}var s,l,c,u,d,h,f,p,m,g,v,y,b,x=document,w=t.getDoc();P.object_resizing&&P.webkit_fake_resize!==!1&&(e("enableObjectResizing",!1),v={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},t.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}"),t.onNodeChange.add(a),N.bind(w,"selectionchange",a),t.serializer.addAttributeFilter("data-mce-selected",function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)}))}function k(){n()<9&&(I.addNodeFilter("noscript",function(t){for(var e,n,i=t.length;i--;)e=t[i],n=e.firstChild,n&&e.attr("data-mce-innertext",n.value)}),R.addNodeFilter("noscript",function(t){for(var e,n,i,r=t.length;r--;)e=t[r],n=t[r].firstChild,n?n.value=tinymce.html.Entities.decode(n.value):(i=e.attributes.map["data-mce-innertext"],i&&(e.attr("data-mce-innertext",null),n=new tinymce.html.Node("#text",3),n.value=i,n.raw=!0,e.append(n)))}))}function M(){t.contentStyles.push("body {min-height: 100px}"),t.onClick.add(function(e,n){"HTML"==n.target.nodeName&&(t.execCommand("SelectAll"),t.selection.collapse(!0),t.nodeChanged())})}var E=tinymce.VK,A=E.BACKSPACE,D=E.DELETE,N=t.dom,L=t.selection,P=t.settings,I=t.parser,R=t.serializer,B=tinymce.each;p(),y(),o(),tinymce.isWebKit&&(v(),r(),s(),u(),w(),tinymce.isIDevice?h():(S(),a())),tinymce.isIE&&!tinymce.isIE11&&(l(),f(),m(),g(),C(),T(),k()),tinymce.isIE11&&M(),tinymce.isGecko&&!tinymce.isIE11&&(l(),c(),d(),b(),x(),_()),tinymce.isOpera&&S()},function(t){function e(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.textContent||e.innerText||t}function n(t,e){var n,i,o,a={};if(t){for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)i=String.fromCharCode(parseInt(t[n],e)),r[i]||(o="&"+t[n+1]+";",a[i]=o,a[o]=i);return a}}var i,r,o,a=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\"\']/g,c=/&(#x|#)?([\w]+);/g,u={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};r={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},i=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t.html=t.html||{},t.html.Entities={encodeRaw:function(t,e){return t.replace(e?a:s,function(t){return r[t]||t})},encodeAllRaw:function(t){return(""+t).replace(l,function(t){return r[t]||t})},encodeNumeric:function(t,e){return t.replace(e?a:s,function(t){return t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":r[t]||"&#"+t.charCodeAt(0)+";"})},encodeNamed:function(t,e,n){return n=n||i,t.replace(e?a:s,function(t){return r[t]||n[t]||t})},getEncodeFunc:function(e,o){function l(t,e){return t.replace(e?a:s,function(t){return r[t]||o[t]||"&#"+t.charCodeAt(0)+";"||t})}function c(t,e){return u.encodeNamed(t,e,o)}var u=t.html.Entities;return o=n(o)||i,e=t.makeMap(e.replace(/\+/g,",")),e.named&&e.numeric?l:e.named?o?c:u.encodeNamed:e.numeric?u.encodeNumeric:u.encodeRaw},decode:function(t){return t.replace(c,function(t,n,r){return n?(r=parseInt(r,2===n.length?16:10),r>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(1023&r))):u[r]||String.fromCharCode(r)):o[t]||i[t]||e(t)})}}}(tinymce),tinymce.html.Styles=function(t,e){function n(t,e,n,i){function r(t){return t=parseInt(t).toString(16),t.length>1?t:"0"+t}return"#"+r(e)+r(n)+r(i)}var i,r,o,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,l=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};for(t=t||{},o="\\\" \\' \\; \\: ; : \ufeff".split(" "),r=0;r<o.length;r++)u[o[r]]="\ufeff"+r,u["\ufeff"+r]=o[r];return{toHex:function(t){return t.replace(a,n)},parse:function(e){function i(t,e){var n,i,r,o;"none"===y["border-image"]&&delete y["border-image"],n=y[t+"-top"+e],n&&(i=y[t+"-right"+e],n==i&&(r=y[t+"-bottom"+e],i==r&&(o=y[t+"-left"+e],r==o&&(y[t+e]=o,delete y[t+"-top"+e],delete y[t+"-right"+e],delete y[t+"-bottom"+e],delete y[t+"-left"+e]))))}function r(t){var e,n=y[t];if(n&&!(n.indexOf(" ")<0)){for(n=n.split(" "),e=n.length;e--;)if(n[e]!==n[0])return!1;return y[t]=n[0],!0}}function o(t,e,n,i){r(e)&&r(n)&&r(i)&&(y[t]=y[e]+" "+y[n]+" "+y[i],delete y[e],delete y[n],delete y[i])}function d(t){return v=!0,u[t]}function h(t,e){return v&&(t=t.replace(/\uFEFF[0-9]/g,function(t){return u[t]})),e||(t=t.replace(/\\([\'\";:])/g,"$1")),t}function f(t,e,n,i,r,o){return(r=r||o)?(r=h(r),"'"+r.replace(/\'/g,"\\'")+"'"):(e=h(e||n||i),b&&(e=b.call(x,e,"style")),"url('"+e.replace(/\'/g,"\\'")+"')")}var p,m,g,v,y={},b=t.url_converter,x=t.url_converter_scope||this;if(e){for(e=e.replace(/\\[\"\';:\uFEFF]/g,d).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(t){return t.replace(/[;:]/g,d)});p=l.exec(e);)m=p[1].replace(c,"").toLowerCase(),g=p[2].replace(c,""),m&&g.length>0&&("font-weight"===m&&"700"===g?g="bold":("color"===m||"background-color"===m)&&(g=g.toLowerCase()),g=g.replace(a,n),g=g.replace(s,f),y[m]=v?h(g,!0):g),l.lastIndex=p.index+p[0].length;i("border",""),i("border","-width"),i("border","-color"),i("border","-style"),i("padding",""),i("margin",""),o("border","border-width","border-style","border-color"),"medium none"===y.border&&delete y.border}return y},serialize:function(t,n){function r(n){var r,o,a,l;if(r=e.styles[n])for(o=0,a=r.length;a>o;o++)n=r[o],l=t[n],l!==i&&l.length>0&&(s+=(s.length>0?" ":"")+n+": "+l+";")}var o,a,s="";if(n&&e&&e.styles)r("*"),r(n);else for(o in t)a=t[o],a!==i&&a.length>0&&(s+=(s.length>0?" ":"")+o+": "+a+";");return s}}},function(t){function e(t,e){return t.split(e||",")}function n(t,n){function i(e){return e.replace(/[A-Z]+/g,function(e){return i(t[e])})}var r,o={};for(r in t)t.hasOwnProperty(r)&&(t[r]=i(t[r]));return i(n).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(t,n,i,r){i=e(i,"|"),o[n]={attributes:a(i),attributesOrder:i,children:a(r,"|",{"#comment":{}})}}),o}function i(){var t=o.html5;return t||(t=o.html5=n({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")),t
}function r(){var t=o.html4;return t||(t=o.html4=n({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")),t}var o={},a=t.makeMap,s=t.each;t.html.Schema=function(n){function l(e,i,r){var s=n[e];return s?s=a(s,",",a(s.toUpperCase()," ")):(s=o[e],s||(s=a(i," ",a(i.toUpperCase()," ")),s=t.extend(s,r),o[e]=s)),s}function c(t){return new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$")}function u(n){var i,r,o,s,l,u,d,h,f,p,m,g,v,y,b,x,w,_,C,S=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,M=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,E=/[*?+]/;if(n)for(n=e(n),T["@"]&&(x=T["@"].attributes,w=T["@"].attributesOrder),i=0,r=n.length;r>i;i++)if(l=S.exec(n[i])){if(y=l[1],f=l[2],b=l[3],h=l[4],g={},v=[],u={attributes:g,attributesOrder:v},"#"===y&&(u.paddEmpty=!0),"-"===y&&(u.removeEmpty=!0),x){for(_ in x)g[_]=x[_];v.push.apply(v,w)}if(h)for(h=e(h,"|"),o=0,s=h.length;s>o;o++)if(l=M.exec(h[o])){if(d={},m=l[1],p=l[2].replace(/::/g,":"),y=l[3],C=l[4],"!"===m&&(u.attributesRequired=u.attributesRequired||[],u.attributesRequired.push(p),d.required=!0),"-"===m){delete g[p],v.splice(t.inArray(v,p),1);continue}y&&("="===y&&(u.attributesDefault=u.attributesDefault||[],u.attributesDefault.push({name:p,value:C}),d.defaultValue=C),":"===y&&(u.attributesForced=u.attributesForced||[],u.attributesForced.push({name:p,value:C}),d.forcedValue=C),"<"===y&&(d.validValues=a(C,"?"))),E.test(p)?(u.attributePatterns=u.attributePatterns||[],d.pattern=c(p),u.attributePatterns.push(d)):(g[p]||v.push(p),g[p]=d)}x||"@"!=f||(x=g,w=v),b&&(u.outputName=f,T[b]=u),E.test(f)?(u.pattern=c(f),k.push(u)):T[f]=u}}function d(t){T={},k=[],u(t),s(g,function(t,e){S[e]=t.children})}function h(t){var n=/^(~)?(.+)$/;t&&s(e(t),function(t){var e=n.exec(t),i="~"===e[1],r=i?"span":"div",o=e[2];S[o]=S[r],M[o]=r,i||(w[o.toUpperCase()]={},w[o]={}),T[o]||(T[o]=T[r]),s(S,function(t){t[r]&&(t[o]=t[r])})})}function f(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;t&&s(e(t),function(t){var i,r,o=n.exec(t);o&&(r=o[1],i=r?S[o[2]]:S[o[2]]={"#comment":{}},i=S[o[2]],s(e(o[3],"|"),function(t){"-"===r?delete i[t]:i[t]={}}))})}function p(t){var e,n=T[t];if(n)return n;for(e=k.length;e--;)if(n=k[e],n.pattern.test(t))return n}var m,g,v,y,b,x,w,_,C=this,T={},S={},k=[],M={};n=n||{},g="html5"==n.schema?i():r(),n.verify_html===!1&&(n.valid_elements="*[*]"),n.valid_styles&&(m={},s(n.valid_styles,function(e,n){m[n]=t.explode(e)})),v=l("whitespace_elements","pre script noscript style textarea"),y=l("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=l("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr"),x=l("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),_=l("non_empty_elements","td th iframe video audio object script",b),textBlockElementsMap=l("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),w=l("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap),n.valid_elements?d(n.valid_elements):(s(g,function(t,e){T[e]={attributes:t.attributes,attributesOrder:t.attributesOrder},S[e]=t.children}),"html5"!=n.schema&&s(e("strong/b,em/i"),function(t){t=e(t,"/"),T[t[1]].outputName=t[0]}),T.img.attributesDefault=[{name:"alt",value:""}],s(e("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(t){T[t]&&(T[t].removeEmpty=!0)}),s(e("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(t){T[t].paddEmpty=!0})),h(n.custom_elements),f(n.valid_children),u(n.extended_valid_elements),f("+ol[ul|ol],+ul[ul|ol]"),n.invalid_elements&&t.each(t.explode(n.invalid_elements),function(t){T[t]&&delete T[t]}),p("span")||u("span[!data-mce-type|*]"),C.children=S,C.styles=m,C.getBoolAttrs=function(){return x},C.getBlockElements=function(){return w},C.getTextBlockElements=function(){return textBlockElementsMap},C.getShortEndedElements=function(){return b},C.getSelfClosingElements=function(){return y},C.getNonEmptyElements=function(){return _},C.getWhiteSpaceElements=function(){return v},C.isValidChild=function(t,e){var n=S[t];return!(!n||!n[e])},C.isValid=function(t,e){var n,i,r=p(t);if(r){if(!e)return!0;if(r.attributes[e])return!0;if(n=r.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(t))return!0}return!1},C.getElementRule=p,C.getCustomElements=function(){return M},C.addValidElements=u,C.setValidElements=d,C.addCustomElements=h,C.addValidChildren=f,C.elements=T}}(tinymce),function(t){t.html.SaxParser=function(e,n){var i=this,r=function(){};e=e||{},i.schema=n=n||new t.html.Schema,e.fix_self_closing!==!1&&(e.fix_self_closing=!0),t.each("comment cdata text start end pi doctype".split(" "),function(t){t&&(i[t]=e[t]||r)}),i.parse=function(i){function r(t){var e,n;for(e=O.length;e--&&O[e].name!==t;);if(e>=0){for(n=O.length-1;n>=e;n--)t=O[n],t.valid&&B.end(t.name);O.length=e}}function o(t,e,n,i,r){var o,a;if(e=e.toLowerCase(),n=e in g?e:$(n||i||r||""),y&&!f&&0!==e.indexOf("data-")){if(o=T[e],!o&&S){for(a=S.length;a--&&(o=S[a],!o.pattern.test(e)););-1===a&&(o=null)}if(!o)return;if(o.validValues&&!(n in o.validValues))return}c.map[e]=n,c.push({name:e,value:n})}var a,s,l,c,u,d,h,f,p,m,g,v,y,b,x,w,_,C,T,S,k,M,E,A,D,N,L,P,I,R,B=this,F=0,O=[],H=0,$=t.html.Entities.decode;for(D=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),N=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,L={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},m=n.getShortEndedElements(),A=e.self_closing_elements||n.getSelfClosingElements(),g=n.getBoolAttrs(),y=e.validate,p=e.remove_internals,I=e.fix_self_closing,R=t.isIE,C=/^:/;a=D.exec(i);){if(F<a.index&&B.text($(i.substr(F,a.index-F))),s=a[6])s=s.toLowerCase(),R&&C.test(s)&&(s=s.substr(1)),r(s);else if(s=a[7]){if(s=s.toLowerCase(),R&&C.test(s)&&(s=s.substr(1)),v=s in m,I&&A[s]&&O.length>0&&O[O.length-1].name===s&&r(s),!y||(b=n.getElementRule(s))){if(x=!0,y&&(T=b.attributes,S=b.attributePatterns),(_=a[8])?(f=-1!==_.indexOf("data-mce-type"),f&&p&&(x=!1),c=[],c.map={},_.replace(N,o)):(c=[],c.map={}),y&&!f){if(k=b.attributesRequired,M=b.attributesDefault,E=b.attributesForced)for(u=E.length;u--;)w=E[u],h=w.name,P=w.value,"{$uid}"===P&&(P="mce_"+H++),c.map[h]=P,c.push({name:h,value:P});if(M)for(u=M.length;u--;)w=M[u],h=w.name,h in c.map||(P=w.value,"{$uid}"===P&&(P="mce_"+H++),c.map[h]=P,c.push({name:h,value:P}));if(k){for(u=k.length;u--&&!(k[u]in c.map););-1===u&&(x=!1)}c.map["data-mce-bogus"]&&(x=!1)}x&&B.start(s,c,v)}else x=!1;if(l=L[s]){l.lastIndex=F=a.index+a[0].length,(a=l.exec(i))?(x&&(d=i.substr(F,a.index-F)),F=a.index+a[0].length):(d=i.substr(F),F=i.length),x&&d.length>0&&B.text(d,!0),x&&B.end(s),D.lastIndex=F;continue}v||(_&&_.indexOf("/")==_.length-1?x&&B.end(s):O.push({name:s,valid:x}))}else(s=a[1])?B.comment(s):(s=a[2])?B.cdata(s):(s=a[3])?B.doctype(s):(s=a[4])&&B.pi(s,a[5]);F=a.index+a[0].length}for(F<i.length&&B.text($(i.substr(F))),u=O.length-1;u>=0;u--)s=O[u],s.valid&&B.end(s.name)}}}(tinymce),function(t){function e(t,e,n){var i,r,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(t[o])return t[o];if(t!==e){if(i=t[a])return i;for(r=t.parent;r&&r!==e;r=r.parent)if(i=r[a])return i}}function n(t,e){this.name=t,this.type=e,1===e&&(this.attributes=[],this.attributes.map={})}var i=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};t.extend(n.prototype,{replace:function(t){var e=this;return t.parent&&t.remove(),e.insert(t,e),e.remove(),e},attr:function(t,e){var n,i,r,o=this;if("string"!=typeof t){for(i in t)o.attr(i,t[i]);return o}if(n=o.attributes){if(e!==r){if(null===e){if(t in n.map)for(delete n.map[t],i=n.length;i--;)if(n[i].name===t)return n=n.splice(i,1),o;return o}if(t in n.map){for(i=n.length;i--;)if(n[i].name===t){n[i].value=e;break}}else n.push({name:t,value:e});return n.map[t]=e,o}return n.map[t]}},clone:function(){var t,e,i,r,o,a=this,s=new n(a.name,a.type);if(i=a.attributes){for(o=[],o.map={},t=0,e=i.length;e>t;t++)r=i[t],"id"!==r.name&&(o[o.length]={name:r.name,value:r.value},o.map[r.name]=r.value);s.attributes=o}return s.value=a.value,s.shortEnded=a.shortEnded,s},wrap:function(t){var e=this;return e.parent.insert(t,e),t.append(e),e},unwrap:function(){var t,e,n=this;for(t=n.firstChild;t;)e=t.next,n.insert(t,n,!0),t=e;n.remove()},remove:function(){var t=this,e=t.parent,n=t.next,i=t.prev;return e&&(e.firstChild===t?(e.firstChild=n,n&&(n.prev=null)):i.next=n,e.lastChild===t?(e.lastChild=i,i&&(i.next=null)):n.prev=i,t.parent=t.next=t.prev=null),t},append:function(t){var e,n=this;return t.parent&&t.remove(),e=n.lastChild,e?(e.next=t,t.prev=e,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t},insert:function(t,e,n){var i;return t.parent&&t.remove(),i=e.parent||this,n?(e===i.firstChild?i.firstChild=t:e.prev.next=t,t.prev=e.prev,t.next=e,e.prev=t):(e===i.lastChild?i.lastChild=t:e.next.prev=t,t.next=e.next,t.prev=e,e.next=t),t.parent=i,t},getAll:function(t){var n,i=this,r=[];for(n=i.firstChild;n;n=e(n,i))n.name===t&&r.push(n);return r},empty:function(){var t,n,i,r=this;if(r.firstChild){for(t=[],i=r.firstChild;i;i=e(i,r))t.push(i);for(n=t.length;n--;)i=t[n],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return r.firstChild=r.lastChild=null,r},isEmpty:function(t){var n,r,o=this,a=o.firstChild;if(a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(t[a.name])return!1;for(n=a.attributes.length;n--;)if(r=a.attributes[n].name,"name"===r||0===r.indexOf("data-mce-"))return!1}if(8===a.type)return!1;if(3===a.type&&!i.test(a.value))return!1}while(a=e(a,o));return!0},walk:function(t){return e(this,null,t)}}),t.extend(n,{create:function(t,e){var i,o;if(i=new n(t,r[t]||1),e)for(o in e)i.attr(o,e[o]);return i}}),t.html.Node=n}(tinymce),function(t){var e=t.html.Node;t.html.DomParser=function(n,i){function r(n){var r,a,s,l,c,u,d,h,f,p,m,g,v,y;for(m=t.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=i.getNonEmptyElements(),g=i.getTextBlockElements(),r=0;r<n.length;r++)if(a=n[r],a.parent&&!a.fixed)if(g[a.name]&&"li"==a.parent.name){for(v=a.next;v&&g[v.name];)v.name="li",v.fixed=!0,a.parent.insert(v,a.parent),v=v.next;a.unwrap(a)}else{for(l=[a],s=a.parent;s&&!i.isValidChild(s.name,a.name)&&!m[s.name];s=s.parent)l.push(s);if(s&&l.length>1){for(l.reverse(),c=u=o.filterNode(l[0].clone()),f=0;f<l.length-1;f++){for(i.isValidChild(u.name,l[f].name)?(d=o.filterNode(l[f].clone()),u.append(d)):d=u,h=l[f].firstChild;h&&h!=l[f+1];)y=h.next,d.append(h),h=y;u=d}c.isEmpty(p)?s.insert(a,l[0],!0):(s.insert(c,l[0],!0),s.insert(a,c)),s=l[0],(s.isEmpty(p)||s.firstChild===s.lastChild&&"br"===s.firstChild.name)&&s.empty().remove()}else if(a.parent){if("li"===a.name){if(v=a.prev,v&&("ul"===v.name||"ul"===v.name)){v.append(a);continue}if(v=a.next,v&&("ul"===v.name||"ul"===v.name)){v.insert(a,v.firstChild,!0);continue}a.wrap(o.filterNode(new e("ul",1)));continue}i.isValidChild(a.parent.name,"div")&&i.isValidChild("div",a.name)?a.wrap(o.filterNode(new e("div",1))):"style"===a.name||"script"===a.name?a.empty().remove():a.unwrap()}}}var o=this,a={},s=[],l={},c={};n=n||{},n.validate="validate"in n?n.validate:!0,n.root_name=n.root_name||"body",o.schema=i=i||new t.html.Schema,o.filterNode=function(t){var e,n,i;n in a&&(i=l[n],i?i.push(t):l[n]=[t]),e=s.length;for(;e--;)n=s[e].name,n in t.attributes.map&&(i=c[n],i?i.push(t):c[n]=[t]);return t},o.addNodeFilter=function(e,n){t.each(t.explode(e),function(t){var e=a[t];e||(a[t]=e=[]),e.push(n)})},o.addAttributeFilter=function(e,n){t.each(t.explode(e),function(t){var e;for(e=0;e<s.length;e++)if(s[e].name===t)return void s[e].callbacks.push(n);s.push({name:t,callbacks:[n]})})},o.parse=function(o,u){function d(){for(var t,e,n=g.firstChild;n;)t=n.next,3==n.type||1==n.type&&"p"!==n.name&&!k[n.name]&&!n.attr("data-mce-type")?e?e.append(n):(e=h(R,1),g.insert(e,n),e.append(n)):e=null,n=t}function h(t,n){var i,r=new e(t,n);return t in a&&(i=l[t],i?i.push(r):l[t]=[r]),r}function f(t){var e,n,i;for(e=t.prev;e&&3===e.type;)n=e.value.replace(A,""),n.length>0?(e.value=n,e=e.prev):(i=e.prev,e.remove(),e=i)}function p(t){var e,n={};for(e in t)"li"!==e&&"p"!=e&&(n[e]=t[e]);return n}var m,g,v,y,b,x,w,_,C,T,S,k,M,E,A,D,N,L,P,I,R,B=[];if(u=u||{},l={},c={},k=t.extend(t.makeMap("script,style,head,html,body,title,meta,param"),i.getBlockElements()),I=i.getNonEmptyElements(),P=i.children,S=n.validate,R="forced_root_block"in u?u.forced_root_block:n.forced_root_block,L=i.getWhiteSpaceElements(),M=/^[ \t\r\n]+/,A=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,N=/^[ \t\r\n]+$/,m=new t.html.SaxParser({validate:S,self_closing_elements:p(i.getSelfClosingElements()),cdata:function(t){v.append(h("#cdata",4)).value=t},text:function(t,e){var n;E||(t=t.replace(D," "),v.lastChild&&k[v.lastChild.name]&&(t=t.replace(M,""))),0!==t.length&&(n=h("#text",3),n.raw=!!e,v.append(n).value=t)},comment:function(t){v.append(h("#comment",8)).value=t},pi:function(t,e){v.append(h(t,7)).value=e,f(v)},doctype:function(t){var e;e=v.append(h("#doctype",10)),e.value=t,f(v)},start:function(t,e,n){var r,o,a,l,u;if(a=S?i.getElementRule(t):{}){for(r=h(a.outputName||t,1),r.attributes=e,r.shortEnded=n,v.append(r),u=P[v.name],u&&P[r.name]&&!u[r.name]&&B.push(r),o=s.length;o--;)l=s[o].name,l in e.map&&(C=c[l],C?C.push(r):c[l]=[r]);k[t]&&f(r),n||(v=r),!E&&L[t]&&(E=!0)}},end:function(t){var n,r,o,a,s;if(r=S?i.getElementRule(t):{}){if(k[t]&&!E){if(n=v.firstChild,n&&3===n.type)for(o=n.value.replace(M,""),o.length>0?(n.value=o,n=n.next):(a=n.next,n.remove(),n=a);n&&3===n.type;)o=n.value,a=n.next,(0===o.length||N.test(o))&&(n.remove(),n=a),n=a;if(n=v.lastChild,n&&3===n.type)for(o=n.value.replace(A,""),o.length>0?(n.value=o,n=n.prev):(a=n.prev,n.remove(),n=a);n&&3===n.type;)o=n.value,a=n.prev,(0===o.length||N.test(o))&&(n.remove(),n=a),n=a}if(E&&L[t]&&(E=!1),(r.removeEmpty||r.paddEmpty)&&v.isEmpty(I))if(r.paddEmpty)v.empty().append(new e("#text","3")).value="\xa0";else if(!v.attributes.map.name&&!v.attributes.map.id)return s=v.parent,v.empty().remove(),void(v=s);v=v.parent}}},i),g=v=new e(u.context||n.root_name,11),m.parse(o),S&&B.length&&(u.context?u.invalid=!0:r(B)),R&&"body"==g.name&&d(),!u.invalid){for(T in l){for(C=a[T],y=l[T],w=y.length;w--;)y[w].parent||y.splice(w,1);for(b=0,x=C.length;x>b;b++)C[b](y,T,u)}for(b=0,x=s.length;x>b;b++)if(C=s[b],C.name in c){for(y=c[C.name],w=y.length;w--;)y[w].parent||y.splice(w,1);for(w=0,_=C.callbacks.length;_>w;w++)C.callbacks[w](y,C.name,u)}}return g},n.remove_trailing_brs&&o.addNodeFilter("br",function(e){var n,r,o,a,s,l,c=e.length,u=t.extend({},i.getBlockElements()),d=i.getNonEmptyElements();for(u.body=1,n=0;c>n;n++)if(r=e[n],o=r.parent,u[r.parent.name]&&r===o.lastChild){for(s=r.prev;s;){if(l=s.name,"span"!==l||"bookmark"!==s.attr("data-mce-type")){if("br"!==l)break;if("br"===l){r=null;break}}s=s.prev}r&&(r.remove(),o.isEmpty(d)&&(elementRule=i.getElementRule(o.name),elementRule&&(elementRule.removeEmpty?o.remove():elementRule.paddEmpty&&(o.empty().append(new t.html.Node("#text",3)).value="\xa0"))))}else{for(a=r;o.firstChild===a&&o.lastChild===a&&(a=o,!u[o.name]);)o=o.parent;a===o&&(textNode=new t.html.Node("#text",3),textNode.value="\xa0",r.replace(textNode))}}),n.allow_html_in_named_anchor||o.addAttributeFilter("id,name",function(t){for(var e,n,i,r,o=t.length;o--;)if(r=t[o],"a"===r.name&&r.firstChild&&!r.attr("href")){i=r.parent,e=r.lastChild;do n=e.prev,i.insert(e,r),e=n;while(e)}})}}(tinymce),tinymce.html.Writer=function(t){var e,n,i,r,o,a=[];return t=t||{},e=t.indent,n=tinymce.makeMap(t.indent_before||""),i=tinymce.makeMap(t.indent_after||""),r=tinymce.html.Entities.getEncodeFunc(t.entity_encoding||"raw",t.entities),o="html"==t.element_format,{start:function(t,s,l){var c,u,d,h;if(e&&n[t]&&a.length>0&&(h=a[a.length-1],h.length>0&&"\n"!==h&&a.push("\n")),a.push("<",t),s)for(c=0,u=s.length;u>c;c++)d=s[c],a.push(" ",d.name,'="',r(d.value,!0),'"');a[a.length]=!l||o?">":" />",l&&e&&i[t]&&a.length>0&&(h=a[a.length-1],h.length>0&&"\n"!==h&&a.push("\n"))},end:function(t){var n;a.push("</",t,">"),e&&i[t]&&a.length>0&&(n=a[a.length-1],n.length>0&&"\n"!==n&&a.push("\n"))},text:function(t,e){t.length>0&&(a[a.length]=e?t:r(t))},cdata:function(t){a.push("<![CDATA[",t,"]]>")},comment:function(t){a.push("<!--",t,"-->")},pi:function(t,n){n?a.push("<?",t," ",n,"?>"):a.push("<?",t,"?>"),e&&a.push("\n")},doctype:function(t){a.push("<!DOCTYPE",t,">",e?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}},function(t){t.html.Serializer=function(e,n){var i=this,r=new t.html.Writer(e);e=e||{},e.validate="validate"in e?e.validate:!0,i.schema=n=n||new t.html.Schema,i.writer=r,i.serialize=function(t){function i(t){var e,s,l,c,u,d,h,f,p,m=o[t.type];if(m)m(t);else{if(e=t.name,s=t.shortEnded,l=t.attributes,a&&l&&l.length>1){for(d=[],d.map={},p=n.getElementRule(t.name),h=0,f=p.attributesOrder.length;f>h;h++)c=p.attributesOrder[h],c in l.map&&(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));for(h=0,f=l.length;f>h;h++)c=l[h].name,c in d.map||(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));l=d}if(r.start(t.name,l,s),!s){if(t=t.firstChild)do i(t);while(t=t.next);r.end(e)}}}var o,a;return a=e.validate,o={3:function(t){r.text(t.value,t.raw)},8:function(t){r.comment(t.value)},7:function(t){r.pi(t.name,t.value)},10:function(t){r.doctype(t.value)},4:function(t){r.cdata(t.value)},11:function(t){if(t=t.firstChild)do i(t);while(t=t.next)}},r.reset(),1!=t.type||e.inner?o[11](t):i(t),r.getContent()}}}(tinymce),tinymce.dom={},function(t,e){function n(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i||!1):t.attachEvent&&t.attachEvent("on"+e,n)}function i(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i||!1):t.detachEvent&&t.detachEvent("on"+e,n)}function r(t,e){function n(){return!1}function i(){return!0}var r,o=e||{};for(r in t)"layerX"!==r&&"layerY"!==r&&(o[r]=t[r]);return o.target||(o.target=o.srcElement||document),o.preventDefault=function(){o.isDefaultPrevented=i,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},o.stopPropagation=function(){o.isPropagationStopped=i,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=i,o.stopPropagation()},o.isDefaultPrevented||(o.isDefaultPrevented=n,o.isPropagationStopped=n,o.isImmediatePropagationStopped=n),o}function o(t,e,r){function o(){r.domLoaded||(r.domLoaded=!0,e(l))}var a=t.document,l={type:"ready"};return"complete"==a.readyState?void o():(s?n(t,"DOMContentLoaded",o):(n(a,"readystatechange",function(){"complete"===a.readyState&&(i(a,"readystatechange",arguments.callee),o())}),a.documentElement.doScroll&&t===t.top&&!function(){try{a.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}o()}()),void n(t,"load",o))}function a(t){function a(t,e){var n,i,r,o;if(n=f[e][t.type])for(i=0,r=n.length;r>i;i++)if(o=n[i],o&&o.func.call(o.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}var l,c,u,d,h=this,f={};u="onmouseenter"in document.documentElement,c="onfocusin"in document.documentElement,d={mouseenter:"mouseover",mouseleave:"mouseout"},l=1,h.domLoaded=!1,h.events=f,h.bind=function(i,p,m,g){function v(t){a(r(t||S.event),y)}var y,b,x,w,_,C,T,S=window;if(i&&3!==i.nodeType&&8!==i.nodeType){for(i[e]?(y=i[e],f[y]||(f[y]={})):(y=l++,i[e]=y,f[y]={}),g=g||i,p=p.split(" "),x=p.length;x--;)w=p[x],C=v,_=T=!1,"DOMContentLoaded"===w&&(w="ready"),!h.domLoaded&&"complete"!=i.readyState||"ready"!==w?(u||(_=d[w],_&&(C=function(t){var e,n;if(e=t.currentTarget,n=t.relatedTarget,n&&e.contains)n=e.contains(n);else for(;n&&n!==e;)n=n.parentNode;n||(t=r(t||S.event),t.type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=e,a(t,y))})),c||"focusin"!==w&&"focusout"!==w||(T=!0,_="focusin"===w?"focus":"blur",C=function(t){t=r(t||S.event),t.type="focus"===t.type?"focusin":"focusout",a(t,y)}),b=f[y][w],b?b.push({func:m,scope:g}):(f[y][w]=b=[{func:m,scope:g}],b.fakeName=_,b.capture=T,b.nativeHandler=C,s||(b.proxyHandler=t(y)),"ready"===w?o(i,C,h):n(i,_||w,s?C:b.proxyHandler,T))):(h.domLoaded=!0,m.call(g,r({type:w})));return i=b=0,m}},h.unbind=function(t,n,r){var o,a,l,c,u,d;if(!t||3===t.nodeType||8===t.nodeType)return h;if(o=t[e]){if(d=f[o],n){for(n=n.split(" "),l=n.length;l--;)if(u=n[l],a=d[u]){if(r)for(c=a.length;c--;)a[c].func===r&&a.splice(c,1);r&&0!==a.length||(delete d[u],i(t,a.fakeName||u,s?a.nativeHandler:a.proxyHandler,a.capture))}}else{for(u in d)a=d[u],i(t,a.fakeName||u,s?a.nativeHandler:a.proxyHandler,a.capture);d={}}for(u in d)return h;delete f[o];try{delete t[e]}catch(p){t[e]=null}}return h},h.fire=function(t,n,i){var o,s;if(!t||3===t.nodeType||8===t.nodeType)return h;s=r(null,i),s.type=n;do o=t[e],o&&a(s,o),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow;while(t&&!s.isPropagationStopped());return h},h.clean=function(t){var n,i,r=h.unbind;if(!t||3===t.nodeType||8===t.nodeType)return h;if(t[e]&&r(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName)for(r(t),i=t.getElementsByTagName("*"),n=i.length;n--;)t=i[n],t[e]&&r(t);return h},h.callNativeHandler=function(t,e){f&&f[t][e.type].nativeHandler(e)},h.destory=function(){f={}},h.add=function(t,e,n,i){"string"==typeof t&&(t=document.getElementById(t));{if(!(t&&t instanceof Array))return"init"===e&&(e="ready"),h.bind(t,e instanceof Array?e.join(" "):e,n,i);for(var r=t.length;r--;)h.add(t[r],e,n,i)}},h.remove=function(t,e,n,i){if(!t)return h;if("string"==typeof t&&(t=document.getElementById(t)),t instanceof Array){for(var r=t.length;r--;)h.remove(t[r],e,n,i);return h}return h.unbind(t,e instanceof Array?e.join(" "):e,n)},h.clear=function(t){return"string"==typeof t&&(t=document.getElementById(t)),h.clean(t)},h.cancel=function(t){return t&&(h.prevent(t),h.stop(t)),!1},h.prevent=function(t){return t.preventDefault||(t=r(t)),t.preventDefault(),!1},h.stop=function(t){return t.stopPropagation||(t=r(t)),t.stopPropagation(),!1}}var s=!!document.addEventListener;t.EventUtils=a,t.Event=new a(function(t){return function(e){tinymce.dom.Event.callNativeHandler(t,e)}}),t.Event.bind(window,"ready",function(){}),t=0}(tinymce.dom,"data-mce-expando"),tinymce.dom.TreeWalker=function(t,e){function n(t,n,i,r){var o,a;if(t){if(!r&&t[n])return t[n];if(t!=e){if(o=t[i])return o;for(a=t.parentNode;a&&a!=e;a=a.parentNode)if(o=a[i])return o}}}var i=t;this.current=function(){return i},this.next=function(t){return i=n(i,"firstChild","nextSibling",t)},this.prev=function(t){return i=n(i,"lastChild","previousSibling",t)}},function(t){var e=t.each,n=t.is,i=t.isWebKit,r=t.isIE,o=t.html.Entities,a=/^([a-z0-9],?)+$/i,s=/^[ \t\r\n]*$/;t.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(e,n){var i,r=this;if(r.doc=e,r.win=window,r.files={},r.cssFlicker=!1,r.counter=0,r.stdMode=!t.isIE||e.documentMode>=8,r.boxModel=!t.isIE||"CSS1Compat"==e.compatMode||r.stdMode,r.hasOuterHTML="outerHTML"in e.createElement("a"),r.settings=n=t.extend({keep_values:!1,hex_colors:1},n),r.schema=n.schema,r.styles=new t.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),t.isIE6)try{e.execCommand("BackgroundImageCache",!1,!0)}catch(o){r.cssFlicker=!0}r.fixDoc(e),r.events=n.ownEvents?new t.dom.EventUtils(n.proxy):t.dom.Event,t.addUnload(r.destroy,r),i=n.schema?n.schema.getBlockElements():{},r.isBlock=function(t){if(!t)return!1;var e=t.nodeType;return e?!(1!==e||!i[t.nodeName]):!!i[t]}},fixDoc:function(e){var n,i=this.settings;if(r&&!t.isIE11&&i.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in i.schema.getCustomElements())e.createElement(n)}},clone:function(n,i){var o,a,s=this;return!r||t.isIE11||1!==n.nodeType||i?n.cloneNode(i):(a=s.doc,i?o.firstChild:(o=a.createElement(n.nodeName),e(s.getAttribs(n),function(t){s.setAttrib(o,t.nodeName,s.getAttrib(n,t.nodeName))}),o))},getRoot:function(){var t=this,e=t.settings;return e&&t.get(e.root_element)||t.doc.body},getViewPort:function(t){var e,n;return t=t?t:this.win,e=t.document,n=this.boxModel?e.documentElement:e.body,{x:t.pageXOffset||n.scrollLeft,y:t.pageYOffset||n.scrollTop,w:t.innerWidth||n.clientWidth,h:t.innerHeight||n.clientHeight}},getRect:function(t){var e,n,i=this;return t=i.get(t),e=i.getPos(t),n=i.getSize(t),{x:e.x,y:e.y,w:n.w,h:n.h}},getSize:function(t){var e,n,i=this;return t=i.get(t),e=i.getStyle(t,"width"),n=i.getStyle(t,"height"),-1===e.indexOf("px")&&(e=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(e,10)||t.offsetWidth||t.clientWidth,h:parseInt(n,10)||t.offsetHeight||t.clientHeight}},getParent:function(t,e,n){return this.getParents(t,e,n,!1)},getParents:function(t,e,i,r){var o,a=this,s=a.settings,l=[];for(t=a.get(t),r=void 0===r,s.strict_root&&(i=i||a.getRoot()),n(e,"string")&&(o=e,e="*"===e?function(t){return 1==t.nodeType}:function(t){return a.is(t,o)});t&&t!=i&&t.nodeType&&9!==t.nodeType;){if(!e||e(t)){if(!r)return t;l.push(t)}t=t.parentNode}return r?l:null},get:function(t){var e;return t&&this.doc&&"string"==typeof t&&(e=t,t=this.doc.getElementById(t),t&&t.id!==e)?this.doc.getElementsByName(e)[1]:t},getNext:function(t,e){return this._findSib(t,e,"nextSibling")},getPrev:function(t,e){return this._findSib(t,e,"previousSibling")},select:function(e,n){var i=this;return t.dom.Sizzle(e,i.get(n)||i.get(i.settings.root_element)||i.doc,[])},is:function(e,n){var i;if(void 0===e.length){if("*"===n)return 1==e.nodeType;if(a.test(n)){for(n=n.toLowerCase().split(/,/),e=e.nodeName.toLowerCase(),i=n.length-1;i>=0;i--)if(n[i]==e)return!0;return!1}}return t.dom.Sizzle.matches(n,e.nodeType?[e]:e).length>0},add:function(t,e,i,r,o){var a=this;return this.run(t,function(t){var s;return s=n(e,"string")?a.doc.createElement(e):e,a.setAttribs(s,i),r&&(r.nodeType?s.appendChild(r):a.setHTML(s,r)),o?s:t.appendChild(s)})},create:function(t,e,n){return this.add(this.doc.createElement(t),t,e,n,1)},createHTML:function(t,e,n){var i,r="",o=this;r+="<"+t;for(i in e)e.hasOwnProperty(i)&&(r+=" "+i+'="'+o.encode(e[i])+'"');return"undefined"!=typeof n?r+">"+n+"</"+t+">":r+" />"},remove:function(e,n){return this.run(e,function(e){var i,r=e.parentNode;if(!r)return null;if(n)for(;i=e.firstChild;)!t.isIE||3!==i.nodeType||i.nodeValue?r.insertBefore(i,e):e.removeChild(i);return r.removeChild(e)})},setStyle:function(e,n,i){var o=this;return o.run(e,function(a){var s;switch(s=a.style,n=n.replace(/-(\D)/g,function(t,e){return e.toUpperCase()}),o.pixelStyles.test(n)&&(t.is(i,"number")||/^[\-0-9\.]+$/.test(i))&&(i+="px"),n){case"opacity":r&&!t.isIE11&&(s.filter=""===i?"":"alpha(opacity="+100*i+")",e.currentStyle&&e.currentStyle.hasLayout||(s.display="inline-block")),s[n]=s["-moz-opacity"]=s["-khtml-opacity"]=i||"";break;case"float":r&&!t.isIE11?s.styleFloat=i:s.cssFloat=i;break;default:s[n]=i||""}o.settings.update_styles&&o.setAttrib(a,"data-mce-style")})},getStyle:function(t,e,n){if(t=this.get(t)){if(this.doc.defaultView&&n){e=e.replace(/[A-Z]/g,function(t){return"-"+t});try{return this.doc.defaultView.getComputedStyle(t,null).getPropertyValue(e)}catch(i){return null}}return e=e.replace(/-(\D)/g,function(t,e){return e.toUpperCase()}),"float"==e&&(e=r?"styleFloat":"cssFloat"),t.currentStyle&&n?t.currentStyle[e]:t.style?t.style[e]:void 0}},setStyles:function(t,n){var i,r=this,o=r.settings;i=o.update_styles,o.update_styles=0,e(n,function(e,n){r.setStyle(t,n,e)}),o.update_styles=i,o.update_styles&&r.setAttrib(t,o.cssText)},removeAllAttribs:function(t){return this.run(t,function(t){var e,n=t.attributes;for(e=n.length-1;e>=0;e--)t.removeAttributeNode(n.item(e))})},setAttrib:function(t,i,r){var o=this;if(t&&i)return o.settings.strict&&(i=i.toLowerCase()),this.run(t,function(t){var a=o.settings,s=t.getAttribute(i);if(null!==r)switch(i){case"style":if(!n(r,"string"))return void e(r,function(e,n){o.setStyle(t,n,e)});a.keep_values&&(r&&!o._isRes(r)?t.setAttribute("data-mce-style",r,2):t.removeAttribute("data-mce-style",2)),t.style.cssText=r;break;case"class":t.className=r||"";break;case"src":case"href":a.keep_values&&(a.url_converter&&(r=a.url_converter.call(a.url_converter_scope||o,r,i,t)),o.setAttrib(t,"data-mce-"+i,r,2));break;case"shape":t.setAttribute("data-mce-style",r)}if(n(r)&&null!==r&&0!==r.length?t.setAttribute(i,""+r,2):t.removeAttribute(i,2),tinyMCE.activeEditor&&s!=r){var l=tinyMCE.activeEditor;l.onSetAttrib.dispatch(l,t,i,r)}})},setAttribs:function(t,n){var i=this;return this.run(t,function(t){e(n,function(e,n){i.setAttrib(t,n,e)})})},getAttrib:function(e,o,a){var s,l,c=this;if(e=c.get(e),!e||1!==e.nodeType)return a===l?!1:a;if(n(a)||(a=""),/^(src|href|style|coords|shape)$/.test(o)&&(s=e.getAttribute("data-mce-"+o)))return s;
if(r&&c.props[o]&&(s=e[c.props[o]],s=s&&s.nodeValue?s.nodeValue:s),s||(s=e.getAttribute(o,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(o))return e[c.props[o]]===!0&&""===s?o:s?o:"";if("FORM"===e.nodeName&&e.getAttributeNode(o))return e.getAttributeNode(o).nodeValue;if("style"===o&&(s=s||e.style.cssText,s&&(s=c.serializeStyle(c.parseStyle(s),e.nodeName),c.settings.keep_values&&!c._isRes(s)&&e.setAttribute("data-mce-style",s))),i&&"class"===o&&s&&(s=s.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),r)switch(o){case"rowspan":case"colspan":1===s&&(s="");break;case"size":("+0"===s||20===s||0===s)&&(s="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===s&&(s="");break;case"hspace":-1===s&&(s="");break;case"maxlength":case"tabindex":(32768===s||2147483647===s||"32768"===s)&&(s="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===s?o:a;case"shape":s=s.toLowerCase();break;default:0===o.indexOf("on")&&s&&(s=t._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+s))}return s!==l&&null!==s&&""!==s?""+s:a},getPos:function(t,e){var n,i,r=this,o=0,a=0,s=r.doc;if(t=r.get(t),e=e||s.body,t){if(t.getBoundingClientRect)return t=t.getBoundingClientRect(),n=r.boxModel?s.documentElement:s.body,o=t.left+(s.documentElement.scrollLeft||s.body.scrollLeft)-n.clientTop,a=t.top+(s.documentElement.scrollTop||s.body.scrollTop)-n.clientLeft,{x:o,y:a};for(i=t;i&&i!=e&&i.nodeType;)o+=i.offsetLeft||0,a+=i.offsetTop||0,i=i.offsetParent;for(i=t.parentNode;i&&i!=e&&i.nodeType;)o-=i.scrollLeft||0,a-=i.scrollTop||0,i=i.parentNode}return{x:o,y:a}},parseStyle:function(t){return this.styles.parse(t)},serializeStyle:function(t,e){return this.styles.serialize(t,e)},addStyle:function(t){var e,n=this.doc;styleElm=n.getElementById("mceDefaultStyles"),styleElm||(styleElm=n.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",e=n.getElementsByTagName("head")[0],e.firstChild?e.insertBefore(styleElm,e.firstChild):e.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=t:styleElm.appendChild(n.createTextNode(t))},loadCSS:function(n){var i,o=this,a=o.doc;n||(n=""),i=a.getElementsByTagName("head")[0],e(n.split(","),function(e){var n;o.files[e]||(o.files[e]=!0,n=o.create("link",{rel:"stylesheet",href:t._addVer(e)}),r&&!t.isIE11&&a.documentMode&&a.recalc&&(n.onload=function(){a.recalc&&a.recalc(),n.onload=null}),i.appendChild(n))})},addClass:function(t,e){return this.run(t,function(t){var n;return e?this.hasClass(t,e)?t.className:(n=this.removeClass(t,e),t.className=(""!=n?n+" ":"")+e):0})},removeClass:function(e,n){var i,r=this;return r.run(e,function(e){var o;return r.hasClass(e,n)?(i||(i=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")),o=e.className.replace(i," "),o=t.trim(" "!=o?o:""),e.className=o,o||(e.removeAttribute("class"),e.removeAttribute("className")),o):e.className})},hasClass:function(t,e){return t=this.get(t),t&&e?-1!==(" "+t.className+" ").indexOf(" "+e+" "):!1},show:function(t){return this.setStyle(t,"display","block")},hide:function(t){return this.setStyle(t,"display","none")},isHidden:function(t){return t=this.get(t),!t||"none"==t.style.display||"none"==this.getStyle(t,"display")},uniqueId:function(t){return(t?t:"mce_")+this.counter++},setHTML:function(n,i){var o=this;return o.run(n,function(n){if(r){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br />"+i,n.removeChild(n.firstChild)}catch(a){var s=o.create("div");s.innerHTML="<br />"+i,e(t.grep(s.childNodes),function(t,e){e&&n.canHaveHTML&&n.appendChild(t)})}}else n.innerHTML=i;return i})},getOuterHTML:function(t){var e,n=this;return(t=n.get(t))?1===t.nodeType&&n.hasOuterHTML?t.outerHTML:(e=(t.ownerDocument||n.doc).createElement("body"),e.appendChild(t.cloneNode(!0)),e.innerHTML):null},setOuterHTML:function(t,e,n){function i(t,e,n){var i,r;for(r=n.createElement("body"),r.innerHTML=e,i=r.lastChild;i;)o.insertAfter(i.cloneNode(!0),t),i=i.previousSibling;o.remove(t)}var o=this;return this.run(t,function(t){if(t=o.get(t),1==t.nodeType)if(n=n||t.ownerDocument||o.doc,r)try{r&&1==t.nodeType?t.outerHTML=e:i(t,e,n)}catch(a){i(t,e,n)}else i(t,e,n)})},decode:o.decode,encode:o.encodeAllRaw,insertAfter:function(t,e){return e=this.get(e),this.run(t,function(t){var n,i;return n=e.parentNode,i=e.nextSibling,i?n.insertBefore(t,i):n.appendChild(t),t})},replace:function(i,r,o){var a=this;return n(r,"array")&&(i=i.cloneNode(!0)),a.run(r,function(n){return o&&e(t.grep(n.childNodes),function(t){i.appendChild(t)}),n.parentNode.replaceChild(i,n)})},rename:function(t,n){var i,r=this;return t.nodeName!=n.toUpperCase()&&(i=r.create(n),e(r.getAttribs(t),function(e){r.setAttrib(i,e.nodeName,r.getAttrib(t,e.nodeName))}),r.replace(i,t,1)),i||t},findCommonAncestor:function(t,e){for(var n,i=t;i;){for(n=e;n&&i!=n;)n=n.parentNode;if(i==n)break;i=i.parentNode}return!i&&t.ownerDocument?t.ownerDocument.documentElement:i},toHex:function(t){function e(t){return t=parseInt(t,10).toString(16),t.length>1?t:"0"+t}var n=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(t);return n?t="#"+e(n[1])+e(n[2])+e(n[3]):t},getClasses:function(){function n(r){e(r.imports,function(t){n(t)}),e(r.cssRules||r.rules,function(r){switch(r.type||1){case 1:r.selectorText&&e(r.selectorText.split(","),function(e){e=e.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(e)&&/\.[\w\-]+$/.test(e)&&(i=e,e=t._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",e),(!s||(e=s(e,i)))&&(a[e]||(o.push({"class":e}),a[e]=1)))});break;case 3:try{n(r.styleSheet)}catch(l){}}})}var i,r=this,o=[],a={},s=r.settings.class_filter;if(r.classes)return r.classes;try{e(r.doc.styleSheets,n)}catch(l){}return o.length>0&&(r.classes=o),o},run:function(t,n,i){var r,o=this;return o.doc&&"string"==typeof t&&(t=o.get(t)),t?(i=i||this,t.nodeType||!t.length&&0!==t.length?n.call(i,t):(r=[],e(t,function(t,e){t&&("string"==typeof t&&(t=o.doc.getElementById(t)),r.push(n.call(i,t,e)))}),r)):!1},getAttribs:function(t){var e;return t=this.get(t),t?r?(e=[],"OBJECT"==t.nodeName?t.attributes:("OPTION"===t.nodeName&&this.getAttrib(t,"selected")&&e.push({specified:1,nodeName:"selected"}),t.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(t){e.push({specified:1,nodeName:t})}),e)):t.attributes:[]},isEmpty:function(e,n){var i,r,o,a,l,c=this,u=0;if(e=e.firstChild){a=new t.dom.TreeWalker(e,e.parentNode),n=n||c.schema?c.schema.getNonEmptyElements():null;do{if(o=e.nodeType,1===o){if(e.getAttribute("data-mce-bogus"))continue;if(l=e.nodeName.toLowerCase(),n&&n[l]){if("br"===l){u++;continue}return!1}for(r=c.getAttribs(e),i=e.attributes.length;i--;)if(l=e.attributes[i].nodeName,"name"===l||"data-mce-bookmark"===l)return!1}if(8==o)return!1;if(3===o&&!s.test(e.nodeValue))return!1}while(e=a.next())}return 1>=u},destroy:function(e){var n=this;n.win=n.doc=n.root=n.events=n.frag=null,e||t.removeUnload(n.destroy)},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new t.dom.Range(this)},nodeIndex:function(t,e){var n,i,r,o=0;if(t)for(n=t.nodeType,t=t.previousSibling,i=t;t;t=t.previousSibling)r=t.nodeType,(!e||3!=r||r!=n&&t.nodeValue.length)&&(o++,n=r);return o},split:function(e,n,i){function r(e){function n(t){var e=t.previousSibling&&"SPAN"==t.previousSibling.nodeName,n=t.nextSibling&&"SPAN"==t.nextSibling.nodeName;return e&&n}var i,o=e.childNodes,a=e.nodeType;if(1!=a||"bookmark"!=e.getAttribute("data-mce-type")){for(i=o.length-1;i>=0;i--)r(o[i]);if(9!=a){if(3==a&&e.nodeValue.length>0){var s=t.trim(e.nodeValue).length;if(!l.isBlock(e.parentNode)||s>0||0===s&&n(e))return}else if(1==a&&(o=e.childNodes,1==o.length&&o[0]&&1==o[0].nodeType&&"bookmark"==o[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(o[0],e),o.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;l.remove(e)}return e}}var o,a,s,l=this,c=l.createRng();return e&&n?(c.setStart(e.parentNode,l.nodeIndex(e)),c.setEnd(n.parentNode,l.nodeIndex(n)),o=c.extractContents(),c=l.createRng(),c.setStart(n.parentNode,l.nodeIndex(n)+1),c.setEnd(e.parentNode,l.nodeIndex(e)+1),a=c.extractContents(),s=e.parentNode,s.insertBefore(r(o),e),i?s.replaceChild(i,n):s.insertBefore(n,e),s.insertBefore(r(a),e),l.remove(e),i||n):void 0},bind:function(t,e,n,i){return this.events.add(t,e,n,i||this)},unbind:function(t,e,n){return this.events.remove(t,e,n)},fire:function(t,e,n){return this.events.fire(t,e,n)},getContentEditable:function(t){var e;return 1!=t.nodeType?null:(e=t.getAttribute("data-mce-contenteditable"),e&&"inherit"!==e?e:"inherit"!==t.contentEditable?t.contentEditable:null)},_findSib:function(t,e,i){var r=this,o=e;if(t)for(n(o,"string")&&(o=function(t){return r.is(t,e)}),t=t[i];t;t=t[i])if(o(t))return t;return null},_isRes:function(t){return/^(top|left|bottom|right|width|height)/i.test(t)||/;\s*(top|left|bottom|right|width|height)/i.test(t)}}),t.DOM=new t.dom.DOMUtils(document,{process_html:0})}(tinymce),function(t){function e(t){function n(){return I.createDocumentFragment()}function i(t,e){_(O,t,e)}function r(t,e){_(H,t,e)}function o(t){i(t.parentNode,U(t))}function a(t){i(t.parentNode,U(t)+1)}function s(t){r(t.parentNode,U(t))}function l(t){r(t.parentNode,U(t)+1)}function c(t){t?(P[z]=P[j],P[q]=P[$]):(P[j]=P[z],P[$]=P[q]),P.collapsed=O}function u(t){o(t),l(t)}function d(t){i(t,0),r(t,1===t.nodeType?t.childNodes.length:t.nodeValue.length)}function h(t,e){var n=P[j],i=P[$],r=P[z],o=P[q],a=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset;return 0===t?w(n,i,a,s):1===t?w(r,o,a,s):2===t?w(r,o,l,c):3===t?w(n,i,l,c):void 0}function f(){C(F)}function p(){return C(R)}function m(){return C(B)}function g(e){var n,i,r=this[j],o=this[$];3!==r.nodeType&&4!==r.nodeType||!r.nodeValue?(r.childNodes.length>0&&(i=r.childNodes[o]),i?r.insertBefore(e,i):r.appendChild(e)):o?o>=r.nodeValue.length?t.insertAfter(e,r):(n=r.splitText(o),r.parentNode.insertBefore(e,n)):r.parentNode.insertBefore(e,r)}function v(t){var e=P.extractContents();P.insertNode(t),t.appendChild(e),P.selectNode(t)}function y(){return W(new e(t),{startContainer:P[j],startOffset:P[$],endContainer:P[z],endOffset:P[q],collapsed:P.collapsed,commonAncestorContainer:P.commonAncestorContainer})}function b(t,e){var n;if(3==t.nodeType)return t;if(0>e)return t;for(n=t.firstChild;n&&e>0;)--e,n=n.nextSibling;return n?n:t}function x(){return P[j]==P[z]&&P[$]==P[q]}function w(e,n,i,r){var o,a,s,l,c,u;if(e==i)return n==r?0:r>n?-1:1;for(o=i;o&&o.parentNode!=e;)o=o.parentNode;if(o){for(a=0,s=e.firstChild;s!=o&&n>a;)a++,s=s.nextSibling;return a>=n?-1:1}for(o=e;o&&o.parentNode!=i;)o=o.parentNode;if(o){for(a=0,s=i.firstChild;s!=o&&r>a;)a++,s=s.nextSibling;return r>a?-1:1}for(l=t.findCommonAncestor(e,i),c=e;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),u=i;u&&u.parentNode!=l;)u=u.parentNode;if(u||(u=l),c==u)return 0;for(s=l.firstChild;s;){if(s==c)return-1;if(s==u)return 1;s=s.nextSibling}}function _(e,n,i){var r,o;for(e?(P[j]=n,P[$]=i):(P[z]=n,P[q]=i),r=P[z];r.parentNode;)r=r.parentNode;for(o=P[j];o.parentNode;)o=o.parentNode;o==r?w(P[j],P[$],P[z],P[q])>0&&P.collapse(e):P.collapse(e),P.collapsed=x(),P.commonAncestorContainer=t.findCommonAncestor(P[j],P[z])}function C(t){var e,n,i,r,o,a,s,l=0,c=0;if(P[j]==P[z])return T(t);for(e=P[z],n=e.parentNode;n;e=n,n=n.parentNode){if(n==P[j])return S(e,t);++l}for(e=P[j],n=e.parentNode;n;e=n,n=n.parentNode){if(n==P[z])return k(e,t);++c}for(i=c-l,r=P[j];i>0;)r=r.parentNode,i--;for(o=P[z];0>i;)o=o.parentNode,i++;for(a=r.parentNode,s=o.parentNode;a!=s;a=a.parentNode,s=s.parentNode)r=a,o=s;return M(r,o,t)}function T(t){var e,i,r,o,a,s,l,c,u;if(t!=F&&(e=n()),P[$]==P[q])return e;if(3==P[j].nodeType){if(i=P[j].nodeValue,r=i.substring(P[$],P[q]),t!=B&&(o=P[j],c=P[$],u=P[q]-P[$],0===c&&u>=o.nodeValue.length-1?o.parentNode.removeChild(o):o.deleteData(c,u),P.collapse(O)),t==F)return;return r.length>0&&e.appendChild(I.createTextNode(r)),e}for(o=b(P[j],P[$]),a=P[q]-P[$];o&&a>0;)s=o.nextSibling,l=N(o,t),e&&e.appendChild(l),--a,o=s;return t!=B&&P.collapse(O),e}function S(t,e){var i,r,o,a,s,l;if(e!=F&&(i=n()),r=E(t,e),i&&i.appendChild(r),o=U(t),a=o-P[$],0>=a)return e!=B&&(P.setEndBefore(t),P.collapse(H)),i;for(r=t.previousSibling;a>0;)s=r.previousSibling,l=N(r,e),i&&i.insertBefore(l,i.firstChild),--a,r=s;return e!=B&&(P.setEndBefore(t),P.collapse(H)),i}function k(t,e){var i,r,o,a,s,l;for(e!=F&&(i=n()),o=A(t,e),i&&i.appendChild(o),r=U(t),++r,a=P[q]-r,o=t.nextSibling;o&&a>0;)s=o.nextSibling,l=N(o,e),i&&i.appendChild(l),--a,o=s;return e!=B&&(P.setStartAfter(t),P.collapse(O)),i}function M(t,e,i){var r,o,a,s,l,c,u,d;for(i!=F&&(o=n()),r=A(t,i),o&&o.appendChild(r),a=t.parentNode,s=U(t),l=U(e),++s,c=l-s,u=t.nextSibling;c>0;)d=u.nextSibling,r=N(u,i),o&&o.appendChild(r),u=d,--c;return r=E(e,i),o&&o.appendChild(r),i!=B&&(P.setStartAfter(t),P.collapse(O)),o}function E(t,e){var n,i,r,o,a,s=b(P[z],P[q]-1),l=s!=P[z];if(s==t)return D(s,l,H,e);for(n=s.parentNode,i=D(n,H,H,e);n;){for(;s;)r=s.previousSibling,o=D(s,l,H,e),e!=F&&i.insertBefore(o,i.firstChild),l=O,s=r;if(n==t)return i;s=n.previousSibling,n=n.parentNode,a=D(n,H,H,e),e!=F&&a.appendChild(i),i=a}}function A(t,e){var n,i,r,o,a,s=b(P[j],P[$]),l=s!=P[j];if(s==t)return D(s,l,O,e);for(n=s.parentNode,i=D(n,H,O,e);n;){for(;s;)r=s.nextSibling,o=D(s,l,O,e),e!=F&&i.appendChild(o),l=O,s=r;if(n==t)return i;s=n.nextSibling,n=n.parentNode,a=D(n,H,O,e),e!=F&&a.appendChild(i),i=a}}function D(e,n,i,r){var o,a,s,l,c;if(n)return N(e,r);if(3==e.nodeType){if(o=e.nodeValue,i?(l=P[$],a=o.substring(l),s=o.substring(0,l)):(l=P[q],a=o.substring(0,l),s=o.substring(l)),r!=B&&(e.nodeValue=s),r==F)return;return c=t.clone(e,H),c.nodeValue=a,c}if(r!=F)return t.clone(e,H)}function N(e,n){return n!=F?n==B?t.clone(e,O):e:void e.parentNode.removeChild(e)}function L(){return t.create("body",null,m()).outerText}var P=this,I=t.doc,R=0,B=1,F=2,O=!0,H=!1,$="startOffset",j="startContainer",z="endContainer",q="endOffset",W=tinymce.extend,U=t.nodeIndex;return W(P,{startContainer:I,startOffset:0,endContainer:I,endOffset:0,collapsed:O,commonAncestorContainer:I,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:i,setEnd:r,setStartBefore:o,setStartAfter:a,setEndBefore:s,setEndAfter:l,collapse:c,selectNode:u,selectNodeContents:d,compareBoundaryPoints:h,deleteContents:f,extractContents:p,cloneContents:m,insertNode:g,surroundContents:v,cloneRange:y,toStringIE:L}),P}t.Range=e,e.prototype.toString=function(){return this.toStringIE()}}(tinymce.dom),function(){function t(t){function e(e,n){var i,r,o,a,s,l,c,u,d=0,h=-1;if(i=e.duplicate(),i.collapse(n),u=i.parentElement(),u.ownerDocument===t.dom.doc){for(;"false"===u.contentEditable;)u=u.parentNode;if(!u.hasChildNodes())return{node:u,inside:1};for(a=u.children,r=a.length-1;r>=d;)if(c=Math.floor((d+r)/2),s=a[c],i.moveToElementText(s),h=i.compareEndPoints(n?"StartToStart":"EndToEnd",e),h>0)r=c-1;else{if(!(0>h))return{node:s};d=c+1}if(0>h)for(s?i.collapse(!1):(i.moveToElementText(u),i.collapse(!0),s=u,o=!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",e)&&0!==i.move("character",1)&&u==i.parentElement();)l++;else for(i.collapse(!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",e)&&0!==i.move("character",-1)&&u==i.parentElement();)l++;return{node:s,position:h,offset:l,inside:o}}}function n(){function n(t){var n,i,r,o,a,s=e(u,t),l=0;if(n=s.node,i=s.offset,s.inside&&!n.hasChildNodes())return void d[t?"setStart":"setEnd"](n,0);if(i===o)return void d[t?"setStartBefore":"setEndAfter"](n);if(s.position<0){if(r=s.inside?n.firstChild:n.nextSibling,!r)return void d[t?"setStartAfter":"setEndAfter"](n);if(!i)return void(3==r.nodeType?d[t?"setStart":"setEnd"](r,0):d[t?"setStartBefore":"setEndBefore"](r));for(;r;){if(a=r.nodeValue,l+=a.length,l>=i){n=r,l-=i,l=a.length-l;break}r=r.nextSibling}}else{if(r=n.previousSibling,!r)return d[t?"setStartBefore":"setEndBefore"](n);if(!i)return void(3==n.nodeType?d[t?"setStart":"setEnd"](r,n.nodeValue.length):d[t?"setStartAfter":"setEndAfter"](r));for(;r;){if(l+=r.nodeValue.length,l>=i){n=r,l-=i;break}r=r.previousSibling}}d[t?"setStart":"setEnd"](n,l)}var o,a,s,l,c,u=t.getRng(),d=r.createRng();if(o=u.item?u.item(0):u.parentElement(),o.ownerDocument!=r.doc)return d;if(a=t.isCollapsed(),u.item)return d.setStart(o.parentNode,r.nodeIndex(o)),d.setEnd(d.startContainer,d.startOffset+1),d;try{n(!0),a||n()}catch(h){if(-2147024809!=h.number)throw h;c=i.getBookmark(2),s=u.duplicate(),s.collapse(!0),o=s.parentElement(),a||(s=u.duplicate(),s.collapse(!1),l=s.parentElement(),l.innerHTML=l.innerHTML),o.innerHTML=o.innerHTML,i.moveToBookmark(c),u=t.getRng(),n(!0),a||n()}return d}var i=this,r=t.dom,o=!1;this.getBookmark=function(n){function i(t){var e,n,i,o,a=[];for(e=t.parentNode,n=r.getRoot().parentNode;e!=n&&9!==e.nodeType;){for(i=e.children,o=i.length;o--;)if(t===i[o]){a.push(o);break}t=e,e=e.parentNode}return a}function o(t){var n;return n=e(a,t),n?{position:n.position,offset:n.offset,indexes:i(n.node),inside:n.inside}:void 0}var a=t.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:i(a.item(0))}:(s.start=o(!0),t.isCollapsed()||(s.end=o()))),s},this.moveToBookmark=function(t){function e(t){var e,n,i,o;for(e=r.getRoot(),n=t.length-1;n>=0;n--)o=e.children,i=t[n],i<=o.length-1&&(e=o[i]);return e}function n(n){var r,a,s,l=t[n?"start":"end"];l&&(r=l.position>0,a=o.createTextRange(),a.moveToElementText(e(l.indexes)),offset=l.offset,offset!==s?(a.collapse(l.inside||r),a.moveStart("character",r?-offset:offset)):a.collapse(n),i.setEndPoint(n?"StartToStart":"EndToStart",a),n&&i.collapse(!0))}var i,o=r.doc.body;t.start&&(t.start.ctrl?(i=o.createControlRange(),i.addElement(e(t.start.indexes)),i.select()):(i=o.createTextRange(),n(!0),n(),i.select()))},this.addRange=function(e){function n(t){var e,n,a,d,h;a=r.create("a"),e=t?s:c,n=t?l:u,d=i.duplicate(),(e==p||e==p.documentElement)&&(e=m,n=0),3==e.nodeType?(e.parentNode.insertBefore(a,e),d.moveToElementText(a),d.moveStart("character",n),r.remove(a),i.setEndPoint(t?"StartToStart":"EndToEnd",d)):(h=e.childNodes,h.length?(n>=h.length?r.insertAfter(a,h[h.length-1]):e.insertBefore(a,h[n]),d.moveToElementText(a)):e.canHaveHTML&&(e.innerHTML="<span>\ufeff</span>",a=e.firstChild,d.moveToElementText(a),d.collapse(o)),i.setEndPoint(t?"StartToStart":"EndToEnd",d),r.remove(a))}var i,a,s,l,c,u,d,h,f,p=t.dom.doc,m=p.body;if(s=e.startContainer,l=e.startOffset,c=e.endContainer,u=e.endOffset,i=m.createTextRange(),s==c&&1==s.nodeType){if(l==u&&!s.hasChildNodes()){if(s.canHaveHTML)return d=s.previousSibling,d&&!d.hasChildNodes()&&r.isBlock(d)?d.innerHTML="\ufeff":d=null,s.innerHTML="<span>\ufeff</span><span>\ufeff</span>",i.moveToElementText(s.lastChild),i.select(),r.doc.selection.clear(),s.innerHTML="",void(d&&(d.innerHTML=""));l=r.nodeIndex(s),s=s.parentNode}if(l==u-1)try{if(f=s.childNodes[l],a=m.createControlRange(),a.addElement(f),a.select(),h=t.getRng(),h.item&&f===h.item(0))return}catch(g){}}n(!0),n(),i.select()},this.getRangeAt=n}tinymce.dom.TridentSelection=t}(),/*
 * Sizzle CSS Selector Engine
 *  Copyright, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
function(){function t(t,e,n,r,o,a){for(var s=0,l=r.length;l>s;s++){var c=r[s];if(c){var u=!1;for(c=c[t];c;){if(c[i]===n){u=r[c.sizset];break}if(1!==c.nodeType||a||(c[i]=n,c.sizset=s),c.nodeName.toLowerCase()===e){u=c;break}c=c[t]}r[s]=u}}}function e(t,e,n,r,o,a){for(var s=0,l=r.length;l>s;s++){var c=r[s];if(c){var u=!1;for(c=c[t];c;){if(c[i]===n){u=r[c.sizset];break}if(1===c.nodeType)if(a||(c[i]=n,c.sizset=s),"string"!=typeof e){if(c===e){u=!0;break}}else if(d.filter(e,[c]).length>0){u=c;break}c=c[t]}r[s]=u}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i="sizcache",r=0,o=Object.prototype.toString,a=!1,s=!0,l=/\\/g,c=/\r\n/g,u=/\W/;[0,0].sort(function(){return s=!1,0});var d=function(t,e,i,r){i=i||[],e=e||document;var a=e;if(1!==e.nodeType&&9!==e.nodeType)return[];if(!t||"string"!=typeof t)return i;var s,l,c,u,h,m,g,y,b=!0,x=d.isXML(e),_=[],C=t;do if(n.exec(""),s=n.exec(C),s&&(C=s[3],_.push(s[1]),s[2])){u=s[3];break}while(s);if(_.length>1&&p.exec(t))if(2===_.length&&f.relative[_[0]])l=w(_[0]+_[1],e,r);else for(l=f.relative[_[0]]?[e]:d(_.shift(),e);_.length;)t=_.shift(),f.relative[t]&&(t+=_.shift()),l=w(t,l,r);else if(!r&&_.length>1&&9===e.nodeType&&!x&&f.match.ID.test(_[0])&&!f.match.ID.test(_[_.length-1])&&(h=d.find(_.shift(),e,x),e=h.expr?d.filter(h.expr,h.set)[0]:h.set[0]),e)for(h=r?{expr:_.pop(),set:v(r)}:d.find(_.pop(),1!==_.length||"~"!==_[0]&&"+"!==_[0]||!e.parentNode?e:e.parentNode,x),l=h.expr?d.filter(h.expr,h.set):h.set,_.length>0?c=v(l):b=!1;_.length;)m=_.pop(),g=m,f.relative[m]?g=_.pop():m="",null==g&&(g=e),f.relative[m](c,g,x);else c=_=[];if(c||(c=l),c||d.error(m||t),"[object Array]"===o.call(c))if(b)if(e&&1===e.nodeType)for(y=0;null!=c[y];y++)c[y]&&(c[y]===!0||1===c[y].nodeType&&d.contains(e,c[y]))&&i.push(l[y]);else for(y=0;null!=c[y];y++)c[y]&&1===c[y].nodeType&&i.push(l[y]);else i.push.apply(i,c);else v(c,i);return u&&(d(u,a,i,r),d.uniqueSort(i)),i};d.uniqueSort=function(t){if(b&&(a=s,t.sort(b),a))for(var e=1;e<t.length;e++)t[e]===t[e-1]&&t.splice(e--,1);return t},d.matches=function(t,e){return d(t,null,null,e)},d.matchesSelector=function(t,e){return d(e,null,null,[t]).length>0},d.find=function(t,e,n){var i,r,o,a,s,c;if(!t)return[];for(r=0,o=f.order.length;o>r;r++)if(s=f.order[r],(a=f.leftMatch[s].exec(t))&&(c=a[1],a.splice(1,1),"\\"!==c.substr(c.length-1)&&(a[1]=(a[1]||"").replace(l,""),i=f.find[s](a,e,n),null!=i))){t=t.replace(f.match[s],"");break}return i||(i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):[]),{set:i,expr:t}},d.filter=function(t,e,n,i){for(var r,o,a,s,l,c,u,h,p,m=t,g=[],v=e,y=e&&e[0]&&d.isXML(e[0]);t&&e.length;){for(a in f.filter)if(null!=(r=f.leftMatch[a].exec(t))&&r[2]){if(c=f.filter[a],u=r[1],o=!1,r.splice(1,1),"\\"===u.substr(u.length-1))continue;if(v===g&&(g=[]),f.preFilter[a])if(r=f.preFilter[a](r,v,n,g,i,y)){if(r===!0)continue}else o=s=!0;if(r)for(h=0;null!=(l=v[h]);h++)l&&(s=c(l,r,h,v),p=i^s,n&&null!=s?p?o=!0:v[h]=!1:p&&(g.push(l),o=!0));if(void 0!==s){if(n||(v=g),t=t.replace(f.match[a],""),!o)return[];break}}if(t===m){if(null!=o)break;d.error(t)}m=t}return v},d.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)};var h=d.getText=function(t){var e,n,i=t.nodeType,r="";if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;if("string"==typeof t.innerText)return t.innerText.replace(c,"");for(t=t.firstChild;t;t=t.nextSibling)r+=h(t)}else if(3===i||4===i)return t.nodeValue}else for(e=0;n=t[e];e++)8!==n.nodeType&&(r+=h(n));return r},f=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(t){return t.getAttribute("href")},type:function(t){return t.getAttribute("type")}},relative:{"+":function(t,e){var n="string"==typeof e,i=n&&!u.test(e),r=n&&!i;i&&(e=e.toLowerCase());for(var o,a=0,s=t.length;s>a;a++)if(o=t[a]){for(;(o=o.previousSibling)&&1!==o.nodeType;);t[a]=r||o&&o.nodeName.toLowerCase()===e?o||!1:o===e}r&&d.filter(e,t,!0)},">":function(t,e){var n,i="string"==typeof e,r=0,o=t.length;if(i&&!u.test(e)){for(e=e.toLowerCase();o>r;r++)if(n=t[r]){var a=n.parentNode;t[r]=a.nodeName.toLowerCase()===e?a:!1}}else{for(;o>r;r++)n=t[r],n&&(t[r]=i?n.parentNode:n.parentNode===e);i&&d.filter(e,t,!0)}},"":function(n,i,o){var a,s=r++,l=e;"string"!=typeof i||u.test(i)||(i=i.toLowerCase(),a=i,l=t),l("parentNode",i,s,n,a,o)},"~":function(n,i,o){var a,s=r++,l=e;"string"!=typeof i||u.test(i)||(i=i.toLowerCase(),a=i,l=t),l("previousSibling",i,s,n,a,o)}},find:{ID:function(t,e,n){if("undefined"!=typeof e.getElementById&&!n){var i=e.getElementById(t[1]);return i&&i.parentNode?[i]:[]}},NAME:function(t,e){if("undefined"!=typeof e.getElementsByName){for(var n=[],i=e.getElementsByName(t[1]),r=0,o=i.length;o>r;r++)i[r].getAttribute("name")===t[1]&&n.push(i[r]);return 0===n.length?null:n}},TAG:function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t[1]):void 0}},preFilter:{CLASS:function(t,e,n,i,r,o){if(t=" "+t[1].replace(l,"")+" ",o)return t;for(var a,s=0;null!=(a=e[s]);s++)a&&(r^(a.className&&(" "+a.className+" ").replace(/[\t\n\r]/g," ").indexOf(t)>=0)?n||i.push(a):n&&(e[s]=!1));return!1},ID:function(t){return t[1].replace(l,"")},TAG:function(t){return t[1].replace(l,"").toLowerCase()},CHILD:function(t){if("nth"===t[1]){t[2]||d.error(t[0]),t[2]=t[2].replace(/^\+|\s*/g,"");var e=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===t[2]&&"2n"||"odd"===t[2]&&"2n+1"||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=e[1]+(e[2]||1)-0,t[3]=e[3]-0}else t[2]&&d.error(t[0]);return t[0]=r++,t},ATTR:function(t,e,n,i,r,o){var a=t[1]=t[1].replace(l,"");return!o&&f.attrMap[a]&&(t[1]=f.attrMap[a]),t[4]=(t[4]||t[5]||"").replace(l,""),"~="===t[2]&&(t[4]=" "+t[4]+" "),t},PSEUDO:function(t,e,i,r,o){if("not"===t[1]){if(!((n.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var a=d.filter(t[3],e,i,!0^o);return i||r.push.apply(r,a),!1}t[3]=d(t[3],null,null,e)}else if(f.match.POS.test(t[0])||f.match.CHILD.test(t[0]))return!0;return t},POS:function(t){return t.unshift(!0),t}},filters:{enabled:function(t){return t.disabled===!1&&"hidden"!==t.type},disabled:function(t){return t.disabled===!0},checked:function(t){return t.checked===!0},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},parent:function(t){return!!t.firstChild},empty:function(t){return!t.firstChild},has:function(t,e,n){return!!d(n[3],t).length},header:function(t){return/h\d/i.test(t.nodeName)},text:function(t){var e=t.getAttribute("type"),n=t.type;return"input"===t.nodeName.toLowerCase()&&"text"===n&&(e===n||null===e)},radio:function(t){return"input"===t.nodeName.toLowerCase()&&"radio"===t.type},checkbox:function(t){return"input"===t.nodeName.toLowerCase()&&"checkbox"===t.type},file:function(t){return"input"===t.nodeName.toLowerCase()&&"file"===t.type},password:function(t){return"input"===t.nodeName.toLowerCase()&&"password"===t.type},submit:function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&"submit"===t.type},image:function(t){return"input"===t.nodeName.toLowerCase()&&"image"===t.type},reset:function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&"reset"===t.type},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},input:function(t){return/input|select|textarea|button/i.test(t.nodeName)},focus:function(t){return t===t.ownerDocument.activeElement}},setFilters:{first:function(t,e){return 0===e},last:function(t,e,n,i){return e===i.length-1},even:function(t,e){return e%2===0},odd:function(t,e){return e%2===1},lt:function(t,e,n){return e<n[3]-0},gt:function(t,e,n){return e>n[3]-0},nth:function(t,e,n){return n[3]-0===e},eq:function(t,e,n){return n[3]-0===e}},filter:{PSEUDO:function(t,e,n,i){var r=e[1],o=f.filters[r];if(o)return o(t,n,e,i);if("contains"===r)return(t.textContent||t.innerText||h([t])||"").indexOf(e[3])>=0;if("not"===r){for(var a=e[3],s=0,l=a.length;l>s;s++)if(a[s]===t)return!1;return!0}d.error(r)},CHILD:function(t,e){var n,r,o,a,s,l,c=e[1],u=t;switch(c){case"only":case"first":for(;u=u.previousSibling;)if(1===u.nodeType)return!1;if("first"===c)return!0;u=t;case"last":for(;u=u.nextSibling;)if(1===u.nodeType)return!1;return!0;case"nth":if(n=e[2],r=e[3],1===n&&0===r)return!0;if(o=e[0],a=t.parentNode,a&&(a[i]!==o||!t.nodeIndex)){for(s=0,u=a.firstChild;u;u=u.nextSibling)1===u.nodeType&&(u.nodeIndex=++s);a[i]=o}return l=t.nodeIndex-r,0===n?0===l:l%n===0&&l/n>=0}},ID:function(t,e){return 1===t.nodeType&&t.getAttribute("id")===e},TAG:function(t,e){return"*"===e&&1===t.nodeType||!!t.nodeName&&t.nodeName.toLowerCase()===e},CLASS:function(t,e){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(t,e){var n=e[1],i=d.attr?d.attr(t,n):f.attrHandle[n]?f.attrHandle[n](t):null!=t[n]?t[n]:t.getAttribute(n),r=i+"",o=e[2],a=e[4];return null==i?"!="===o:!o&&d.attr?null!=i:"="===o?r===a:"*="===o?r.indexOf(a)>=0:"~="===o?(" "+r+" ").indexOf(a)>=0:a?"!="===o?r!==a:"^="===o?0===r.indexOf(a):"$="===o?r.substr(r.length-a.length)===a:"|="===o?r===a||r.substr(0,a.length+1)===a+"-":!1:r&&i!==!1},POS:function(t,e,n,i){var r=e[2],o=f.setFilters[r];return o?o(t,n,e,i):void 0}}},p=f.match.POS,m=function(t,e){return"\\"+(e-0+1)};for(var g in f.match)f.match[g]=new RegExp(f.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),f.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[g].source.replace(/\\(\d+)/g,m));f.match.globalPOS=p;var v=function(t,e){return t=Array.prototype.slice.call(t,0),e?(e.push.apply(e,t),e):t};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(y){v=function(t,e){var n=0,i=e||[];if("[object Array]"===o.call(t))Array.prototype.push.apply(i,t);else if("number"==typeof t.length)for(var r=t.length;r>n;n++)i.push(t[n]);else for(;t[n];n++)i.push(t[n]);return i}}var b,x;document.documentElement.compareDocumentPosition?b=function(t,e){return t===e?(a=!0,0):t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e)?-1:1:t.compareDocumentPosition?-1:1}:(b=function(t,e){if(t===e)return a=!0,0;if(t.sourceIndex&&e.sourceIndex)return t.sourceIndex-e.sourceIndex;var n,i,r=[],o=[],s=t.parentNode,l=e.parentNode,c=s;if(s===l)return x(t,e);if(!s)return-1;if(!l)return 1;for(;c;)r.unshift(c),c=c.parentNode;for(c=l;c;)o.unshift(c),c=c.parentNode;n=r.length,i=o.length;for(var u=0;n>u&&i>u;u++)if(r[u]!==o[u])return x(r[u],o[u]);return u===n?x(t,o[u],-1):x(r[u],e,1)},x=function(t,e,n){if(t===e)return n;for(var i=t.nextSibling;i;){if(i===e)return-1;i=i.nextSibling}return 1}),function(){var t=document.createElement("div"),e="script"+(new Date).getTime(),n=document.documentElement;t.innerHTML="<a name='"+e+"'/>",n.insertBefore(t,n.firstChild),document.getElementById(e)&&(f.find.ID=function(t,e,n){if("undefined"!=typeof e.getElementById&&!n){var i=e.getElementById(t[1]);return i?i.id===t[1]||"undefined"!=typeof i.getAttributeNode&&i.getAttributeNode("id").nodeValue===t[1]?[i]:void 0:[]}},f.filter.ID=function(t,e){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return 1===t.nodeType&&n&&n.nodeValue===e}),n.removeChild(t),n=t=null}(),function(){var t=document.createElement("div");t.appendChild(document.createComment("")),t.getElementsByTagName("*").length>0&&(f.find.TAG=function(t,e){var n=e.getElementsByTagName(t[1]);if("*"===t[1]){for(var i=[],r=0;n[r];r++)1===n[r].nodeType&&i.push(n[r]);n=i}return n}),t.innerHTML="<a href='#'></a>",t.firstChild&&"undefined"!=typeof t.firstChild.getAttribute&&"#"!==t.firstChild.getAttribute("href")&&(f.attrHandle.href=function(t){return t.getAttribute("href",2)}),t=null}(),document.querySelectorAll&&!function(){var t=d,e=document.createElement("div"),n="__sizzle__";if(e.innerHTML="<p class='TEST'></p>",!e.querySelectorAll||0!==e.querySelectorAll(".TEST").length){d=function(e,i,r,o){if(i=i||document,!o&&!d.isXML(i)){var a=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(e);if(a&&(1===i.nodeType||9===i.nodeType)){if(a[1])return v(i.getElementsByTagName(e),r);if(a[2]&&f.find.CLASS&&i.getElementsByClassName)return v(i.getElementsByClassName(a[2]),r)}if(9===i.nodeType){if("body"===e&&i.body)return v([i.body],r);if(a&&a[3]){var s=i.getElementById(a[3]);if(!s||!s.parentNode)return v([],r);if(s.id===a[3])return v([s],r)}try{return v(i.querySelectorAll(e),r)}catch(l){}}else if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){var c=i,u=i.getAttribute("id"),h=u||n,p=i.parentNode,m=/^\s*[+~]/.test(e);u?h=h.replace(/'/g,"\\$&"):i.setAttribute("id",h),m&&p&&(i=i.parentNode);try{if(!m||p)return v(i.querySelectorAll("[id='"+h+"'] "+e),r)}catch(g){}finally{u||c.removeAttribute("id")}}}return t(e,i,r,o)};for(var i in t)d[i]=t[i];e=null}}(),function(){var t=document.documentElement,e=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.msMatchesSelector;if(e){var n=!e.call(document.createElement("div"),"div"),i=!1;try{e.call(document.documentElement,"[test!='']:sizzle")}catch(r){i=!0}d.matchesSelector=function(t,r){if(r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!d.isXML(t))try{if(i||!f.match.PSEUDO.test(r)&&!/!=/.test(r)){var o=e.call(t,r);if(o||!n||t.document&&11!==t.document.nodeType)return o}}catch(a){}return d(r,null,null,[t]).length>0}}}(),function(){var t=document.createElement("div");t.innerHTML="<div class='test e'></div><div class='test'></div>",t.getElementsByClassName&&0!==t.getElementsByClassName("e").length&&(t.lastChild.className="e",1!==t.getElementsByClassName("e").length&&(f.order.splice(1,0,"CLASS"),f.find.CLASS=function(t,e,n){return"undefined"==typeof e.getElementsByClassName||n?void 0:e.getElementsByClassName(t[1])},t=null))}(),d.contains=document.documentElement.contains?function(t,e){return t!==e&&(t.contains?t.contains(e):!0)}:document.documentElement.compareDocumentPosition?function(t,e){return!!(16&t.compareDocumentPosition(e))}:function(){return!1},d.isXML=function(t){var e=(t?t.ownerDocument||t:0).documentElement;return e?"HTML"!==e.nodeName:!1};var w=function(t,e,n){for(var i,r=[],o="",a=e.nodeType?[e]:e;i=f.match.PSEUDO.exec(t);)o+=i[0],t=t.replace(f.match.PSEUDO,"");t=f.relative[t]?t+"*":t;for(var s=0,l=a.length;l>s;s++)d(t,a[s],r,n);return d.filter(o,r)};window.tinymce.dom.Sizzle=d}(),function(t){t.dom.Element=function(e,n){var i,r,o=this;o.settings=n=n||{},o.id=e,o.dom=i=n.dom||t.DOM,t.isIE||(r=i.get(o.id)),t.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(t){o[t]=function(){var n,r=[e];for(n=0;n<arguments.length;n++)r.push(arguments[n]);return r=i[t].apply(i,r),o.update(t),r}}),t.extend(o,{on:function(e,n,i){return t.dom.Event.add(o.id,e,n,i)},getXY:function(){return{x:parseInt(o.getStyle("left")),y:parseInt(o.getStyle("top"))}},getSize:function(){var t=i.get(o.id);return{w:parseInt(o.getStyle("width")||t.clientWidth),h:parseInt(o.getStyle("height")||t.clientHeight)}},moveTo:function(t,e){o.setStyles({left:t,top:e})},moveBy:function(t,e){var n=o.getXY();o.moveTo(n.x+t,n.y+e)},resizeTo:function(t,e){o.setStyles({width:t,height:e})},resizeBy:function(t,e){var n=o.getSize();o.resizeTo(n.w+t,n.h+e)},update:function(e){var r;if(t.isIE6&&n.blocker){if(e=e||"",0===e.indexOf("get")||0===e.indexOf("has")||0===e.indexOf("is"))return;if("remove"==e)return void i.remove(o.blocker);o.blocker?r=i.get(o.blocker):(o.blocker=i.uniqueId(),r=i.add(n.container||i.getRoot(),"iframe",{id:o.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),i.setStyle(r,"opacity",0)),i.setStyles(r,{left:o.getStyle("left",1),top:o.getStyle("top",1),width:o.getStyle("width",1),height:o.getStyle("height",1),display:o.getStyle("display",1),zIndex:parseInt(o.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(t){var e=t.is,n=t.isIE,i=t.each,r=t.dom.TreeWalker;t.create("tinymce.dom.Selection",{Selection:function(e,n,r,o){var a=this;a.dom=e,a.win=n,a.serializer=r,a.editor=o,i(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(e){a[e]=new t.util.Dispatcher(a)}),a.win.getSelection||(a.tridentSel=new t.dom.TridentSelection(a)),t.isIE&&!t.isIE11&&e.boxModel&&this._fixIESelection(),t.addUnload(a.destroy,a)},setCursorLocation:function(t,e){var n=this,i=n.dom.createRng();i.setStart(t,e),i.setEnd(t,e),n.setRng(i),n.collapse(!1)},getContent:function(t){var n,i,r,o=this,a=o.getRng(),s=o.dom.create("body"),l=o.getSel();return t=t||{},n=i="",t.get=!0,t.format=t.format||"html",t.forced_root_block="",o.onBeforeGetContent.dispatch(o,t),"text"==t.format?o.isCollapsed()?"":a.text||(l.toString?l.toString():""):(a.cloneContents?(r=a.cloneContents(),r&&s.appendChild(r)):e(a.item)||e(a.htmlText)?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=a.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(i=" "),t.getInner=!0,t.content=o.isCollapsed()?"":n+o.serializer.serialize(s,t)+i,o.onGetContent.dispatch(o,t),t.content)},setContent:function(t,e){var n,i,r,o=this,a=o.getRng(),s=o.win.document;if(e=e||{format:"html"},e.set=!0,t=e.content=t,e.no_events||o.onBeforeSetContent.dispatch(o,e),t=e.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=t:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(i=s.createDocumentFragment(),r=s.createElement("div"),i.appendChild(r),r.outerHTML=t,a.insertNode(i))),n=o.dom.get("__caret"),a=s.createRange(),a.setStartBefore(n),a.setEndBefore(n),o.setRng(a),o.dom.remove("__caret");try{o.setRng(a)}catch(l){}}else a.item&&(s.execCommand("Delete",!1,null),a=o.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),o.dom.remove("__mce_tmp")):a.pasteHTML(t);e.no_events||o.onSetContent.dispatch(o,e)},getStart:function(){var t,e,n,i,r=this,o=r.getRng();if(o.duplicate||o.item){if(o.item)return o.item(0);for(n=o.duplicate(),n.collapse(1),t=n.parentElement(),t.ownerDocument!==r.dom.doc&&(t=r.dom.getRoot()),e=i=o.parentElement();i=i.parentNode;)if(i==t){t=e;break}return t}return t=o.startContainer,1==t.nodeType&&t.hasChildNodes()&&(t=t.childNodes[Math.min(t.childNodes.length-1,o.startOffset)]),t&&3==t.nodeType?t.parentNode:t},getEnd:function(){var t,e,n=this,i=n.getRng();return i.duplicate||i.item?i.item?i.item(0):(i=i.duplicate(),i.collapse(0),t=i.parentElement(),t.ownerDocument!==n.dom.doc&&(t=n.dom.getRoot()),t&&"BODY"==t.nodeName?t.lastChild||t:t):(t=i.endContainer,e=i.endOffset,1==t.nodeType&&t.hasChildNodes()&&(t=t.childNodes[e>0?e-1:e]),t&&3==t.nodeType?t.parentNode:t)},getBookmark:function(t,e){function n(t,e){var n=0;return i(p.select(t),function(t,i){t==e&&(n=i)}),n}function r(t){function e(e){var n,i,r,o=e?"start":"end";n=t[o+"Container"],i=t[o+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(r=n.childNodes,n=r[Math.min(e?i:i-1,r.length-1)],n&&(i=e?0:n.childNodes.length,t["set"+(e?"Start":"End")](n,i)))}return e(!0),e(),t}function o(){function t(t,n){var r,o,a=t[n?"startContainer":"endContainer"],s=t[n?"startOffset":"endOffset"],l=[],c=0;if(3==a.nodeType){if(e)for(r=a.previousSibling;r&&3==r.nodeType;r=r.previousSibling)s+=r.nodeValue.length;l.push(s)}else o=a.childNodes,s>=o.length&&o.length&&(c=1,s=Math.max(0,o.length-1)),l.push(f.dom.nodeIndex(o[s],e)+c);for(;a&&a!=i;a=a.parentNode)l.push(f.dom.nodeIndex(a,e));return l}var n=f.getRng(!0),i=p.getRoot(),r={};return r.start=t(n,!0),f.isCollapsed()||(r.end=t(n)),r}var a,s,l,c,u,d,h,f=this,p=f.dom,m="\ufeff";if(2==t)return f.tridentSel?f.tridentSel.getBookmark(t):o();if(t)return a=f.getRng(),a.setStart&&(a={startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset}),{rng:a};if(a=f.getRng(),l=p.uniqueId(),c=tinyMCE.activeEditor.selection.isCollapsed(),h="overflow:hidden;line-height:0px",a.duplicate||a.item){if(a.item)return d=a.item(0),u=d.nodeName,{name:u,index:n(u,d)};s=a.duplicate();try{a.collapse(),a.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_start" style="'+h+'">'+m+"</span>"),c||(s.collapse(!1),a.moveToElementText(s.parentElement()),0===a.compareEndPoints("StartToEnd",s)&&s.move("character",-1),s.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_end" style="'+h+'">'+m+"</span>"))}catch(g){return null}}else{if(d=f.getNode(),u=d.nodeName,"IMG"==u)return{name:u,index:n(u,d)};s=r(a.cloneRange()),c||(s.collapse(!1),s.insertNode(p.create("span",{"data-mce-type":"bookmark",id:l+"_end",style:h},m))),a=r(a),a.collapse(!0),a.insertNode(p.create("span",{"data-mce-type":"bookmark",id:l+"_start",style:h},m))}return f.moveToBookmark({id:l,keep:1}),{id:l}},moveToBookmark:function(e){function r(t){var n,i,r,o,a=e[t?"start":"end"];if(a){for(r=a[0],i=c,n=a.length-1;n>=1;n--){if(o=i.childNodes,a[n]>o.length-1)return;i=o[a[n]]}3===i.nodeType&&(r=Math.min(a[0],i.nodeValue.length)),1===i.nodeType&&(r=Math.min(a[0],i.childNodes.length)),t?s.setStart(i,r):s.setEnd(i,r)}return!0}function o(n){var r,o,a,s,l=m.get(e.id+"_"+n),c=e.keep;if(l&&(r=l.parentNode,"start"==n?(c?(r=l.firstChild,o=1):o=m.nodeIndex(l),u=d=r,h=f=o):(c?(r=l.firstChild,o=1):o=m.nodeIndex(l),d=r,f=o),!c)){for(s=l.previousSibling,a=l.nextSibling,i(t.grep(l.childNodes),function(t){3==t.nodeType&&(t.nodeValue=t.nodeValue.replace(/\uFEFF/g,""))});l=m.get(e.id+"_"+n);)m.remove(l,1);s&&a&&s.nodeType==a.nodeType&&3==s.nodeType&&!t.isOpera&&(o=s.nodeValue.length,s.appendData(a.nodeValue),m.remove(a),"start"==n?(u=d=s,h=f=o):(d=s,f=o))}}function a(t){return!m.isBlock(t)||t.innerHTML||n||(t.innerHTML='<br data-mce-bogus="1" />'),t}var s,l,c,u,d,h,f,p=this,m=p.dom;if(e)if(e.start){if(s=m.createRng(),c=m.getRoot(),p.tridentSel)return p.tridentSel.moveToBookmark(e);r(!0)&&r()&&p.setRng(s)}else if(e.id)o("start"),o("end"),u&&(s=m.createRng(),s.setStart(a(u),h),s.setEnd(a(d),f),p.setRng(s));else if(e.name)p.select(m.select(e.name)[e.index]);else if(e.rng){if(s=e.rng,s.startContainer){l=p.dom.createRng();try{l.setStart(s.startContainer,s.startOffset),l.setEnd(s.endContainer,s.endOffset)}catch(g){}s=l}p.setRng(s)}},select:function(e,n){function i(e,n){var i=new r(e,e);do{if(3==e.nodeType&&0!==t.trim(e.nodeValue).length)return void(n?l.setStart(e,0):l.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(n?l.setStartBefore(e):l.setEndBefore(e))}while(e=n?i.next():i.prev())}var o,a=this,s=a.dom,l=s.createRng();return e&&(o=s.nodeIndex(e),l.setStart(e.parentNode,o),l.setEnd(e.parentNode,o+1),n&&(i(e,1),i(e)),a.setRng(l)),e},isCollapsed:function(){var t=this,e=t.getRng(),n=t.getSel();return!e||e.item?!1:e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!n||e.collapsed},collapse:function(t){var e,n=this,i=n.getRng();i.item&&(e=i.item(0),i=n.win.document.body.createTextRange(),i.moveToElementText(e)),i.collapse(!!t),n.setRng(i)},getSel:function(){var t=this.win;return t.getSelection?t.getSelection():t.document.selection},getRng:function(e){var n,i,r,o=this,a=o.win.document;if(e&&o.tridentSel)return o.tridentSel.getRangeAt(0);try{(n=o.getSel())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():a.createRange())}catch(s){}return t.isIE&&!t.isIE11&&i&&i.setStart&&a.selection.createRange().item&&(r=a.selection.createRange().item(0),i=a.createRange(),i.setStartBefore(r),i.setEndAfter(r)),i||(i=a.createRange?a.createRange():a.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(r=o.dom.getRoot(),i.setStart(r,0),i.setEnd(r,0)),o.selectedRange&&o.explicitRange&&(0===i.compareBoundaryPoints(i.START_TO_START,o.selectedRange)&&0===i.compareBoundaryPoints(i.END_TO_END,o.selectedRange)?i=o.explicitRange:(o.selectedRange=null,o.explicitRange=null)),i},setRng:function(t,e){var n,i=this;if(i.tridentSel){if(t.cloneRange)try{return void i.tridentSel.addRange(t)}catch(r){}try{t.select()}catch(r){}}else if(n=i.getSel()){i.explicitRange=t;try{n.removeAllRanges()}catch(r){}n.addRange(t),e===!1&&n.extend&&(n.collapse(t.endContainer,t.endOffset),n.extend(t.startContainer,t.startOffset)),i.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(t){var e=this;return e.setContent(e.dom.getOuterHTML(t)),t},getNode:function(){function t(t,e){for(var n=t;t&&3===t.nodeType&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n}var e,n=this,i=n.getRng(),r=(n.getSel(),i.startContainer),o=i.endContainer;return i?i.setStart?(e=i.commonAncestorContainer,!i.collapsed&&(i.startContainer==i.endContainer&&i.endOffset-i.startOffset<2&&i.startContainer.hasChildNodes()&&(e=i.startContainer.childNodes[i.startOffset]),3===r.nodeType&&3===o.nodeType&&(r=r.length===i.startOffset?t(r.nextSibling,!0):r.parentNode,o=0===i.endOffset?t(o.previousSibling,!1):o.parentNode,r&&r===o))?r:e&&3==e.nodeType?e.parentNode:e):i.item?i.item(0):i.parentElement():n.dom.getRoot()},getSelectedBlocks:function(t,e){var n,i,o,a=this,s=a.dom,l=[];if(n=s.getParent(t||a.getStart(),s.isBlock),i=s.getParent(e||a.getEnd(),s.isBlock),n&&l.push(n),n&&i&&n!=i){o=n;for(var c=new r(n,s.getRoot());(o=c.next())&&o!=i;)s.isBlock(o)&&l.push(o)}return i&&n!=i&&l.push(i),l},isForward:function(){var t,e,n=this.dom,i=this.getSel();return i&&null!=i.anchorNode&&null!=i.focusNode?(t=n.createRng(),t.setStart(i.anchorNode,i.anchorOffset),t.collapse(!0),e=n.createRng(),e.setStart(i.focusNode,i.focusOffset),e.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,e)<=0):!0},normalize:function(){function e(t){function e(t,e){for(var n=new r(t,p.getParent(t.parentNode,p.isBlock)||m);t=n[e?"prev":"next"]();)if("BR"===t.nodeName)return!0}function s(t,e){var n,a;for(e=e||l,n=new r(e,p.getParent(e.parentNode,p.isBlock)||m);d=n[t?"prev":"next"]();){if(3===d.nodeType&&d.nodeValue.length>0)return l=d,c=t?d.nodeValue.length:0,void(i=!0);if(p.isBlock(d)||h[d.nodeName.toLowerCase()])return;a=d}o&&a&&(l=a,i=!0,c=0)}var l,c,u,d,h,f,p=a.dom,m=p.getRoot();if(l=n[(t?"start":"end")+"Container"],c=n[(t?"start":"end")+"Offset"],h=p.schema.getNonEmptyElements(),9===l.nodeType&&(l=p.getRoot(),c=0),l===m){if(t&&(d=l.childNodes[c>0?c-1:0],d&&(f=d.nodeName.toLowerCase(),h[d.nodeName]||"TABLE"==d.nodeName)))return;if(l.hasChildNodes()&&(l=l.childNodes[Math.min(!t&&c>0?c-1:c,l.childNodes.length-1)],c=0,l.hasChildNodes()&&!/TABLE/.test(l.nodeName))){d=l,u=new r(l,m);do{if(3===d.nodeType&&d.nodeValue.length>0){c=t?0:d.nodeValue.length,l=d,i=!0;break}if(h[d.nodeName.toLowerCase()]){c=p.nodeIndex(d),l=d.parentNode,"IMG"!=d.nodeName||t||c++,i=!0;break}}while(d=t?u.next():u.prev())}}o&&(3===l.nodeType&&0===c&&s(!0),1===l.nodeType&&(d=l.childNodes[c],!d||"BR"!==d.nodeName||e(d)||e(d,!0)||s(!0,l.childNodes[c]))),t&&!o&&3===l.nodeType&&c===l.nodeValue.length&&s(!1),i&&n["set"+(t?"Start":"End")](l,c)}var n,i,o,a=this;t.isIE||(n=a.getRng(),o=n.collapsed,e(!0),o||e(),i&&(o&&n.collapse(!0),a.setRng(n,a.isForward())))},selectorChanged:function(t,e){var n,r=this;return r.selectorChangedData||(r.selectorChangedData={},n={},r.editor.onNodeChange.addToTop(function(t,e,o){var a=r.dom,s=a.getParents(o,null,a.getRoot()),l={};i(r.selectorChangedData,function(t,e){i(s,function(r){return a.is(r,e)?(n[e]||(i(t,function(t){t(!0,{node:r,selector:e,parents:s})}),n[e]=t),l[e]=t,!1):void 0})}),i(n,function(t,e){l[e]||(delete n[e],i(t,function(t){t(!1,{node:o,selector:e,parents:s})}))})})),r.selectorChangedData[t]||(r.selectorChangedData[t]=[]),r.selectorChangedData[t].push(e),r},scrollIntoView:function(t){var e,n,i=this,r=i.dom;n=r.getViewPort(i.editor.getWin()),e=r.getPos(t).y,(e<n.y||e+25>n.y+n.h)&&i.editor.getWin().scrollTo(0,e<n.y?e:e-n.h+25)},destroy:function(e){var n=this;n.win=null,e||t.removeUnload(n.destroy)},_fixIESelection:function(){function t(t,e){var n=l.createTextRange();try{n.moveToPoint(t,e)}catch(i){n=null}return n}function e(e){var i;e.button?(i=t(e.x,e.y),i&&(i.compareEndPoints("StartToStart",r)>0?i.setEndPoint("StartToStart",r):i.setEndPoint("EndToEnd",r),i.select())):n()}function n(){var t=s.selection.createRange();r&&!t.item&&0===t.compareEndPoints("StartToEnd",t)&&r.select(),a.unbind(s,"mouseup",n),a.unbind(s,"mousemove",e),r=i=0}var i,r,o,a=this.dom,s=a.doc,l=s.body;s.documentElement.unselectable=!0,a.bind(s,["mousedown","contextmenu"],function(l){if("HTML"===l.target.nodeName){if(i&&n(),o=s.documentElement,o.scrollHeight>o.clientHeight)return;i=1,r=t(l.x,l.y),r&&(a.bind(s,"mouseup",n),a.bind(s,"mousemove",e),a.win.focus(),r.select())}})}})}(tinymce),function(t){t.dom.Serializer=function(e,n,i){var r,o,a,s=t.isIE,l=t.each;return e.apply_source_formatting||(e.indent=!1),n=n||t.DOM,i=i||new t.html.Schema(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,r=new t.util.Dispatcher(self),o=new t.util.Dispatcher(self),a=new t.html.DomParser(e,i),a.addAttributeFilter("src,href,style",function(t,i){for(var r,o,a,s=t.length,l="data-mce-"+i,c=e.url_converter,u=e.url_converter_scope;s--;)r=t[s],o=r.attributes.map[l],o!==a?(r.attr(i,o.length>0?o:null),r.attr(l,null)):(o=r.attributes.map[i],"style"===i?o=n.serializeStyle(n.parseStyle(o),r.name):c&&(o=c.call(u,o,i,r.name)),r.attr(i,o.length>0?o:null))}),a.addAttributeFilter("class",function(t){for(var e,n,i=t.length;i--;)e=t[i],n=e.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,""),e.attr("class",n.length>0?n:null)}),a.addAttributeFilter("data-mce-type",function(t,e,n){for(var i,r=t.length;r--;)i=t[r],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),a.addAttributeFilter("data-mce-expando",function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)}),a.addNodeFilter("noscript",function(e){for(var n,i=e.length;i--;)n=e[i].firstChild,n&&(n.value=t.html.Entities.decode(n.value))}),a.addNodeFilter("script,style",function(t,e){function n(t){return t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var i,r,o=t.length;o--;)i=t[o],r=i.firstChild?i.firstChild.value:"","script"===e?(i.attr("type",(i.attr("type")||"text/javascript").replace(/^mce\-/,"")),r.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(r)+"\n// ]]>")):r.length>0&&(i.firstChild.value="<!--\n"+n(r)+"\n-->")}),a.addNodeFilter("#comment",function(t){for(var e,n=t.length;n--;)e=t[n],0===e.value.indexOf("[CDATA[")?(e.name="#cdata",e.type=4,e.value=e.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===e.value.indexOf("mce:protected ")&&(e.name="#text",e.type=3,e.raw=!0,e.value=unescape(e.value).substr(14))}),a.addNodeFilter("xml:namespace,input",function(t,e){for(var n,i=t.length;i--;)n=t[i],7===n.type?n.remove():1===n.type&&("input"!==e||"type"in n.attributes.map||n.attr("type","text"))}),e.fix_list_elements&&a.addNodeFilter("ul,ol",function(t){for(var e,n,i=t.length;i--;)e=t[i],n=e.parent,("ul"===n.name||"ol"===n.name)&&e.prev&&"li"===e.prev.name&&e.prev.append(e)}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(t,e){for(var n=t.length;n--;)t[n].attr(e,null)}),{schema:i,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,onPreProcess:r,onPostProcess:o,serialize:function(c,u){var d,h,f,p,m;return s&&n.select("script,style,select,map").length>0?(m=c.innerHTML,c=c.cloneNode(!1),n.setHTML(c,m)):c=c.cloneNode(!0),d=c.ownerDocument.implementation,d.createHTMLDocument&&(h=d.createHTMLDocument(""),l("BODY"==c.nodeName?c.childNodes:[c],function(t){h.body.appendChild(h.importNode(t,!0))}),c="BODY"!=c.nodeName?h.body.firstChild:h.body,f=n.doc,n.doc=h),u=u||{},u.format=u.format||"html",u.no_events||(u.node=c,r.dispatch(self,u)),p=new t.html.Serializer(e,i),u.content=p.serialize(a.parse(t.trim(u.getInner?c.innerHTML:n.getOuterHTML(c)),u)),u.cleanup||(u.content=u.content.replace(/\uFEFF/g,"")),u.no_events||o.dispatch(self,u),f&&(n.doc=f),u.node=null,u.content},addRules:function(t){i.addValidElements(t)},setRules:function(t){i.setValidElements(t)
}}}}(tinymce),function(t){t.dom.ScriptLoader=function(){function e(e,n){function i(){c.remove(l),o&&(o.onreadystatechange=o.onload=o=null),n()}function r(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var o,a,s,l,c=t.DOM;return l=c.uniqueId(),t.isIE6&&(a=new t.util.URI(e),s=location,a.host==s.hostname&&a.port==s.port&&a.protocol+":"==s.protocol&&"file"!=a.protocol.toLowerCase())?void t.util.XHR.send({url:t._addVer(a.getURI()),success:function(t){var e=c.create("script",{type:"text/javascript"});e.text=t,document.getElementsByTagName("head")[0].appendChild(e),c.remove(e),i()},error:r}):(o=document.createElement("script"),o.id=l,o.type="text/javascript",o.src=t._addVer(e),(!t.isIE||t.isIE11)&&(o.onload=i),o.onerror=r,t.isOpera||(o.onreadystatechange=function(){var t=o.readyState;("complete"==t||"loaded"==t)&&i()}),void(document.getElementsByTagName("head")[0]||document.body).appendChild(o))}var n,i=0,r=1,o=2,a={},s=[],l={},c=[],u=0;this.isDone=function(t){return a[t]==o},this.markDone=function(t){a[t]=o},this.add=this.load=function(t,e,r){var o=a[t];o==n&&(s.push(t),a[t]=i),e&&(l[t]||(l[t]=[]),l[t].push({func:e,scope:r||this}))},this.loadQueue=function(t,e){this.loadScripts(s,t,e)},this.loadScripts=function(i,s,d){function h(e){t.each(l[e],function(t){t.func.call(t.scope)}),l[e]=n}var f;c.push({func:s,scope:d||this}),(f=function(){var n=t.grep(i);i.length=0,t.each(n,function(t){return a[t]==o?void h(t):void(a[t]!=r&&(a[t]=r,u++,e(t,function(){a[t]=o,u--,h(t),f()})))}),u||(t.each(c,function(t){t.func.call(t.scope)}),c.length=0)})()}},t.ScriptLoader=new t.dom.ScriptLoader}(tinymce),function(t){t.dom.RangeUtils=function(e){this.walk=function(n,i){function r(t){var e;return e=t[0],3===e.nodeType&&e===m&&g>=e.nodeValue.length&&t.splice(0,1),e=t[t.length-1],0===y&&t.length>0&&e===v&&3===e.nodeType&&t.splice(t.length-1,1),t}function o(t,e,n){for(var i=[];t&&t!=n;t=t[e])i.push(t);return i}function a(t,e){do{if(t.parentNode==e)return t;t=t.parentNode}while(t)}function s(t,e,n){var a=n?"nextSibling":"previousSibling";for(d=t,h=d.parentNode;d&&d!=e;d=h)h=d.parentNode,f=o(d==t?d:d[a],a),f.length&&(n||f.reverse(),i(r(f)))}var l,c,u,d,h,f,p,m=n.startContainer,g=n.startOffset,v=n.endContainer,y=n.endOffset;if(p=e.select("td.mceSelected,th.mceSelected"),p.length>0)return void t.each(p,function(t){i([t])});if(1==m.nodeType&&m.hasChildNodes()&&(m=m.childNodes[g]),1==v.nodeType&&v.hasChildNodes()&&(v=v.childNodes[Math.min(y-1,v.childNodes.length-1)]),m==v)return i(r([m]));for(l=e.findCommonAncestor(m,v),d=m;d;d=d.parentNode){if(d===v)return s(m,l,!0);if(d===l)break}for(d=v;d;d=d.parentNode){if(d===m)return s(v,l);if(d===l)break}c=a(m,l)||m,u=a(v,l)||v,s(m,c,!0),f=o(c==m?c:c.nextSibling,"nextSibling",u==v?u.nextSibling:u),f.length&&i(r(f)),s(v,u)},this.split=function(t){function e(t,e){return t.splitText(e)}var n=t.startContainer,i=t.startOffset,r=t.endContainer,o=t.endOffset;return n==r&&3==n.nodeType?i>0&&i<n.nodeValue.length&&(r=e(n,i),n=r.previousSibling,o>i?(o-=i,n=r=e(r,o).previousSibling,o=r.nodeValue.length,i=0):o=0):(3==n.nodeType&&i>0&&i<n.nodeValue.length&&(n=e(n,i),i=0),3==r.nodeType&&o>0&&o<r.nodeValue.length&&(r=e(r,o).previousSibling,o=r.nodeValue.length)),{startContainer:n,startOffset:i,endContainer:r,endOffset:o}}},t.dom.RangeUtils.compareRanges=function(t,e){if(t&&e){if(!t.item&&!t.duplicate)return t.startContainer==e.startContainer&&t.startOffset==e.startOffset;if(t.item&&e.item&&t.item(0)===e.item(0))return!0;if(t.isEqual&&e.isEqual&&e.isEqual(t))return!0}return!1}}(tinymce),function(t){var e=t.dom.Event,n=t.each;t.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(i,r){var o,a,s,l,c,u=this,d=i.root,h=i.items,f=i.enableUpDown,p=i.enableLeftRight||!i.enableUpDown,m=i.excludeFromTabOrder;r=r||t.DOM,o=function(t){c=t.target.id},a=function(t){r.setAttrib(t.target.id,"tabindex","-1")},l=function(){var t=r.get(c);r.setAttrib(t,"tabindex","0"),t.focus()},u.focus=function(){r.get(c).focus()},u.destroy=function(){n(h,function(t){var e=r.get(t.id);r.unbind(e,"focus",o),r.unbind(e,"blur",a)});var t=r.get(d);r.unbind(t,"focus",l),r.unbind(t,"keydown",s),h=r=d=u.focus=o=a=s=l=null,u.destroy=function(){}},u.moveFocus=function(t,o){{var a,s=-1;u.controls}c&&(n(h,function(t,e){return t.id===c?(s=e,!1):void 0}),s+=t,0>s?s=h.length-1:s>=h.length&&(s=0),a=h[s],r.setAttrib(c,"tabindex","-1"),r.setAttrib(a.id,"tabindex","0"),r.get(a.id).focus(),i.actOnFocus&&i.onAction(a.id),o&&e.cancel(o))},s=function(t){var n=37,r=39,o=38,a=40,s=27,l=14,d=13,h=32;switch(t.keyCode){case n:p&&u.moveFocus(-1),e.cancel(t);break;case r:p&&u.moveFocus(1),e.cancel(t);break;case o:f&&u.moveFocus(-1),e.cancel(t);break;case a:f&&u.moveFocus(1),e.cancel(t);break;case s:i.onCancel&&(i.onCancel(),e.cancel(t));break;case l:case d:case h:i.onAction&&(i.onAction(c),e.cancel(t))}},n(h,function(t,e){var n,i;t.id||(t.id=r.uniqueId("_mce_item_")),i=r.get(t.id),m?(r.bind(i,"blur",a),n="-1"):n=0===e?"0":"-1",i.setAttribute("tabindex",n),r.bind(i,"focus",o)}),h[0]&&(c=h[0].id),r.setAttrib(d,"tabindex","-1");var g=r.get(d);r.bind(g,"focus",l),r.bind(g,"keydown",s)}})}(tinymce),function(t){var e=t.DOM,n=t.is;t.create("tinymce.ui.Control",{Control:function(e,n,i){this.id=e,this.settings=n=n||{},this.rendered=!1,this.onRender=new t.util.Dispatcher(this),this.classPrefix="",this.scope=n.scope||this,this.disabled=0,this.active=0,this.editor=i},setAriaProperty:function(t,n){var i=e.get(this.id+"_aria")||e.get(this.id);i&&e.setAttrib(i,"aria-"+t,!!n)},focus:function(){e.get(this.id).focus()},setDisabled:function(t){t!=this.disabled&&(this.setAriaProperty("disabled",t),this.setState("Disabled",t),this.setState("Enabled",!t),this.disabled=t)},isDisabled:function(){return this.disabled},setActive:function(t){t!=this.active&&(this.setState("Active",t),this.active=t,this.setAriaProperty("pressed",t))},isActive:function(){return this.active},setState:function(t,n){var i=e.get(this.id);t=this.classPrefix+t,n?e.addClass(i,t):e.removeClass(i,t)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(t){e.setHTML(t,this.renderHTML())},postRender:function(){var t,e=this;n(e.disabled)&&(t=e.disabled,e.disabled=-1,e.setDisabled(t)),n(e.active)&&(t=e.active,e.active=-1,e.setActive(t))},remove:function(){e.remove(this.id),this.destroy()},destroy:function(){t.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(t,e,n){this.parent(t,e,n),this.controls=[],this.lookup={}},add:function(t){return this.lookup[t.id]=t,this.controls.push(t),t},get:function(t){return this.lookup[t]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(t,e){this.parent(t,e),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(t){{var e=t.is;t.DOM,t.each,t.walk}t.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(t,e){this.parent(t,e),this.classPrefix="mceMenuItem"},setSelected:function(t){this.setState("Selected",t),this.setAriaProperty("checked",!!t),this.selected=t},isSelected:function(){return this.selected},postRender:function(){var t=this;t.parent(),e(t.selected)&&t.setSelected(t.selected)}})}(tinymce),function(t){var e=(t.is,t.DOM),n=(t.each,t.walk);t.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(e,n){var i=this;i.parent(e,n),i.items={},i.collapsed=!1,i.menuCount=0,i.onAddItem=new t.util.Dispatcher(this)},expand:function(t){var e=this;t&&n(e,function(t){t.expand&&t.expand()},"items",e),e.collapsed=!1},collapse:function(t){var e=this;t&&n(e,function(t){t.collapse&&t.collapse()},"items",e),e.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(n){return n.settings||(n=new t.ui.MenuItem(n.id||e.uniqueId(),n)),this.onAddItem.dispatch(this,n),this.items[n.id]=n},addSeparator:function(){return this.add({separator:!0})},addMenu:function(t){return t.collapse||(t=this.createMenu(t)),this.menuCount++,this.add(t)},hasMenus:function(){return 0!==this.menuCount},remove:function(t){delete this.items[t.id]},removeAll:function(){var t=this;n(t,function(t){t.removeAll?t.removeAll():t.remove(),t.destroy()},"items",t),t.items={}},createMenu:function(n){var i=new t.ui.Menu(n.id||e.uniqueId(),n);return i.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),i}})}(tinymce),function(t){var e=t.is,n=t.DOM,i=t.each,r=t.dom.Event,o=t.dom.Element;t.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(i,r){r=r||{},r.container=r.container||n.doc.body,r.offset_x=r.offset_x||0,r.offset_y=r.offset_y||0,r.vp_offset_x=r.vp_offset_x||0,r.vp_offset_y=r.vp_offset_y||0,e(r.icons)&&!r.icons&&(r["class"]+=" mceNoIcons"),this.parent(i,r),this.onShowMenu=new t.util.Dispatcher(this),this.onHideMenu=new t.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(e){var i,r=this,o=r.settings;return e.container=e.container||o.container,e.parent=r,e.constrain=e.constrain||o.constrain,e["class"]=e["class"]||o["class"],e.vp_offset_x=e.vp_offset_x||o.vp_offset_x,e.vp_offset_y=e.vp_offset_y||o.vp_offset_y,e.keyboard_focus=o.keyboard_focus,i=new t.ui.DropMenu(e.id||n.uniqueId(),e),i.onAddItem.add(r.onAddItem.dispatch,r.onAddItem),i},focus:function(){var t=this;t.keyboardNav&&t.keyboardNav.focus()},update:function(){var t,e,i=this,r=i.settings,o=n.get("menu_"+i.id+"_tbl"),a=n.get("menu_"+i.id+"_co");t=r.max_width?Math.min(o.offsetWidth,r.max_width):o.offsetWidth,e=r.max_height?Math.min(o.offsetHeight,r.max_height):o.offsetHeight,i.element.setStyles(n.boxModel?{width:t,height:e}:{width:t+2,height:e+2}),r.max_width&&n.setStyle(a,"width",t),r.max_height&&(n.setStyle(a,"height",e),o.clientHeight<r.max_height&&n.setStyle(a,"overflow","hidden"))},showMenu:function(e,a,s){var l,c,u,d,h,f,p=this,m=p.settings,g=n.getViewPort(),v=2,y=p.classPrefix;p.collapse(1),p.isMenuVisible||(p.rendered?l=n.get("menu_"+p.id):(l=n.add(p.settings.container,p.renderNode()),i(p.items,function(t){t.postRender()}),p.element=new o("menu_"+p.id,{blocker:1,container:m.container})),t.isOpera||n.setStyles(l,{left:-65535,top:-65535}),n.show(l),p.update(),e+=m.offset_x||0,a+=m.offset_y||0,g.w-=4,g.h-=4,m.constrain&&(c=l.clientWidth-v,u=l.clientHeight-v,d=g.x+g.w,h=g.y+g.h,e+m.vp_offset_x+c>d&&(e=s?s-c:Math.max(0,d-m.vp_offset_x-c)),a+m.vp_offset_y+u>h&&(a=Math.max(0,h-m.vp_offset_y-u))),n.setStyles(l,{left:e,top:a}),p.element.update(),p.isMenuVisible=1,p.mouseClickFunc=r.add(l,"click",function(t){var e;if(t=t.target,t&&(t=n.getParent(t,"tr"))&&!n.hasClass(t,y+"ItemSub")){if(e=p.items[t.id],e.isDisabled())return;for(f=p;f;)f.hideMenu&&f.hideMenu(),f=f.settings.parent;return e.settings.onclick&&e.settings.onclick(t),!1}}),p.hasMenus()&&(p.mouseOverFunc=r.add(l,"mouseover",function(t){var e,i;if(t=t.target,t&&(t=n.getParent(t,"tr"))){if(e=p.items[t.id],p.lastMenu&&p.lastMenu.collapse(1),e.isDisabled())return;t&&n.hasClass(t,y+"ItemSub")&&(i=n.getRect(t),e.showMenu(i.x+i.w-v,i.y-v,i.x),p.lastMenu=e,n.addClass(n.get(e.id).firstChild,y+"ItemActive"))}})),r.add(l,"keydown",p._keyHandler,p),p.onShowMenu.dispatch(p),m.keyboard_focus&&p._setupKeyboardNav())},hideMenu:function(t){var e,i=this,o=n.get("menu_"+i.id);i.isMenuVisible&&(i.keyboardNav&&i.keyboardNav.destroy(),r.remove(o,"mouseover",i.mouseOverFunc),r.remove(o,"click",i.mouseClickFunc),r.remove(o,"keydown",i._keyHandler),n.hide(o),i.isMenuVisible=0,t||i.collapse(1),i.element&&i.element.hide(),(e=n.get(i.id))&&n.removeClass(e.firstChild,i.classPrefix+"ItemActive"),i.onHideMenu.dispatch(i))},add:function(t){var e,i=this;return t=i.parent(t),i.isRendered&&(e=n.get("menu_"+i.id))&&i._add(n.select("tbody",e)[0],t),t},collapse:function(t){this.parent(t),this.hideMenu(1)},remove:function(t){return n.remove(t.id),this.destroy(),this.parent(t)},destroy:function(){var t=this,e=n.get("menu_"+t.id);t.keyboardNav&&t.keyboardNav.destroy(),r.remove(e,"mouseover",t.mouseOverFunc),r.remove(n.select("a",e),"focus",t.mouseOverFunc),r.remove(e,"click",t.mouseClickFunc),r.remove(e,"keydown",t._keyHandler),t.element&&t.element.remove(),n.remove(e)},renderNode:function(){var t,e,r,a,s=this,l=s.settings;return a=n.create("div",{role:"listbox",id:"menu_"+s.id,"class":l["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),s.settings.parent&&n.setAttrib(a,"aria-parent","menu_"+s.settings.parent.id),r=n.add(a,"div",{role:"presentation",id:"menu_"+s.id+"_co","class":s.classPrefix+(l["class"]?" "+l["class"]:"")}),s.element=new o("menu_"+s.id,{blocker:1,container:l.container}),l.menu_line&&n.add(r,"span",{"class":s.classPrefix+"Line"}),t=n.add(r,"table",{role:"presentation",id:"menu_"+s.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),e=n.add(t,"tbody"),i(s.items,function(t){s._add(e,t)}),s.rendered=!0,a},_setupKeyboardNav:function(){var e,i,r=this;e=n.get("menu_"+r.id),i=n.select("a[role=option]","menu_"+r.id),i.splice(0,0,e),r.keyboardNav=new t.ui.KeyboardNavigation({root:"menu_"+r.id,items:i,onCancel:function(){r.hideMenu()},enableUpDown:!0}),e.focus()},_keyHandler:function(t){var e=this;switch(t.keyCode){case 37:e.settings.parent&&(e.hideMenu(),e.settings.parent.focus(),r.cancel(t));break;case 39:e.mouseOverFunc&&e.mouseOverFunc(t)}},_add:function(t,e){var i,r,o,a,s,l=e.settings,c=this.classPrefix;return l.separator?(o=n.add(t,"tr",{id:e.id,"class":c+"ItemSeparator"}),n.add(o,"td",{"class":c+"ItemSeparator"}),void((i=o.previousSibling)&&n.addClass(i,"mceLast"))):(i=o=n.add(t,"tr",{id:e.id,"class":c+"Item "+c+"ItemEnabled"}),i=a=n.add(i,l.titleItem?"th":"td"),i=r=n.add(i,"a",{id:e.id+"_aria",role:l.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),l.parent&&(n.setAttrib(r,"aria-haspopup","true"),n.setAttrib(r,"aria-owns","menu_"+e.id)),n.addClass(a,l["class"]),s=n.add(i,"span",{"class":"mceIcon"+(l.icon?" mce_"+l.icon:"")}),l.icon_src&&n.add(s,"img",{src:l.icon_src}),i=n.add(i,l.element||"span",{"class":"mceText",title:e.settings.title},e.settings.title),e.settings.style&&("function"==typeof e.settings.style&&(e.settings.style=e.settings.style()),n.setAttrib(i,"style",e.settings.style)),1==t.childNodes.length&&n.addClass(o,"mceFirst"),(i=o.previousSibling)&&n.hasClass(i,c+"ItemSeparator")&&n.addClass(o,"mceFirst"),e.collapse&&n.addClass(o,c+"ItemSub"),(i=o.previousSibling)&&n.removeClass(i,"mceLast"),void n.addClass(o,"mceLast"))}})}(tinymce),function(t){var e=t.DOM;t.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(t,e,n){this.parent(t,e,n),this.classPrefix="mceButton"},renderHTML:function(){var t,n,i=this.classPrefix,r=this.settings;return n=e.encode(r.label||""),t='<a role="button" id="'+this.id+'" href="javascript:;" class="'+i+" "+i+"Enabled "+r["class"]+(n?" "+i+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+e.encode(r.title)+'">',t+=!r.image||this.editor&&this.editor.forcedHighContrastMode?'<span class="mceIcon '+r["class"]+'"></span>'+(n?'<span class="'+i+'Label">'+n+"</span>":""):'<span class="mceIcon '+r["class"]+'"><img class="mceIcon" src="'+r.image+'" alt="'+e.encode(r.title)+'" /></span>'+(n?'<span class="'+i+'Label">'+n+"</span>":""),t+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+r.title+"</span>",t+="</a>"},postRender:function(){var e,n=this,i=n.settings;t.isIE&&n.editor&&t.dom.Event.add(n.id,"mousedown",function(){var t=n.editor.selection.getNode().nodeName;e="IMG"===t?n.editor.selection.getBookmark():null}),t.dom.Event.add(n.id,"click",function(r){return n.isDisabled()?void 0:(t.isIE&&n.editor&&null!==e&&n.editor.selection.moveToBookmark(e),i.onclick.call(i.scope,r))}),t.dom.Event.add(n.id,"keydown",function(e){return n.isDisabled()||e.keyCode!=t.VK.SPACEBAR?void 0:(t.dom.Event.cancel(e),i.onclick.call(i.scope,e))})}})}(tinymce),function(t){var e,n=t.DOM,i=t.dom.Event,r=t.each,o=t.util.Dispatcher;t.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(e,n,i){var r=this;r.parent(e,n,i),r.items=[],r.onChange=new o(r),r.onPostRender=new o(r),r.onAdd=new o(r),r.onRenderMenu=new t.util.Dispatcher(this),r.classPrefix="mceListBox",r.marked={}},select:function(t){var n,i,o=this;return o.marked={},t==e?o.selectByIndex(-1):(i=t&&"function"==typeof t?t:function(e){return e==t},void(t!=o.selectedValue&&(r(o.items,function(t,e){return i(t.value)?(n=1,o.selectByIndex(e),!1):void 0}),n||o.selectByIndex(-1))))},selectByIndex:function(t){var e,i,r,o=this;o.marked={},t!=o.selectedIndex&&(e=n.get(o.id+"_text"),r=n.get(o.id+"_voiceDesc"),i=o.items[t],i?(o.selectedValue=i.value,o.selectedIndex=t,n.setHTML(e,n.encode(i.title)),n.setHTML(r,o.settings.title+" - "+i.title),n.removeClass(e,"mceTitle"),n.setAttrib(o.id,"aria-valuenow",i.title)):(n.setHTML(e,n.encode(o.settings.title)),n.setHTML(r,n.encode(o.settings.title)),n.addClass(e,"mceTitle"),o.selectedValue=o.selectedIndex=null,n.setAttrib(o.id,"aria-valuenow",o.settings.title)),e=0)},mark:function(t){this.marked[t]=!0},add:function(e,n,i){var r=this;i=i||{},i=t.extend(i,{title:e,value:n}),r.items.push(i),r.onAdd.dispatch(r,i)},getLength:function(){return this.items.length},renderHTML:function(){var t="",e=this,i=e.settings,r=e.classPrefix;return t='<span role="listbox" aria-haspopup="true" aria-labelledby="'+e.id+'_voiceDesc" aria-describedby="'+e.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+e.id+'" cellpadding="0" cellspacing="0" class="'+r+" "+r+"Enabled"+(i["class"]?" "+i["class"]:"")+'"><tbody><tr>',t+="<td>"+n.createHTML("span",{id:e.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},e.settings.title),t+=n.createHTML("a",{id:e.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},n.encode(e.settings.title))+"</td>",t+="<td>"+n.createHTML("a",{id:e.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span></span>')+"</td>",t+="</tr></tbody></table></span>"},showMenu:function(){var e,o,a=this,s=n.get(this.id);if(!a.isDisabled()&&0!==a.items.length){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0),e=n.getPos(s),o=a.menu,o.settings.offset_x=e.x,o.settings.offset_y=e.y,o.settings.keyboard_focus=!t.isOpera,r(a.items,function(t){o.items[t.id]&&o.items[t.id].setSelected(0)}),r(a.items,function(t){o.items[t.id]&&a.marked[t.value]&&o.items[t.id].setSelected(1),t.value===a.selectedValue&&o.items[t.id].setSelected(1)}),o.showMenu(0,s.clientHeight),i.add(n.doc,"mousedown",a.hideMenu,a),n.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(t){var e=this;if(e.menu&&e.menu.isMenuVisible){if(n.removeClass(e.id,e.classPrefix+"Selected"),t&&"mousedown"==t.type&&(t.target.id==e.id+"_text"||t.target.id==e.id+"_open"))return;t&&n.getParent(t.target,".mceMenu")||(n.removeClass(e.id,e.classPrefix+"Selected"),i.remove(n.doc,"mousedown",e.hideMenu,e),e.menu.hideMenu())}},renderMenu:function(){var t,i=this;t=i.settings.control_manager.createDropMenu(i.id+"_menu",{menu_line:1,"class":i.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150}),t.onHideMenu.add(function(){i.hideMenu(),i.focus()}),t.add({title:i.settings.title,"class":"mceMenuItemTitle",onclick:function(){i.settings.onselect("")!==!1&&i.select("")}}),r(i.items,function(r){r.value===e?t.add({title:r.title,role:"option","class":"mceMenuItemTitle",onclick:function(){i.settings.onselect("")!==!1&&i.select("")}}):(r.id=n.uniqueId(),r.role="option",r.onclick=function(){i.settings.onselect(r.value)!==!1&&i.select(r.value)},t.add(r))}),i.onRenderMenu.dispatch(i,t),i.menu=t},postRender:function(){var e=this,r=e.classPrefix;i.add(e.id,"click",e.showMenu,e),i.add(e.id,"keydown",function(t){32==t.keyCode&&(e.showMenu(t),i.cancel(t))}),i.add(e.id,"focus",function(){e._focused||(e.keyDownHandler=i.add(e.id,"keydown",function(t){40==t.keyCode&&(e.showMenu(),i.cancel(t))}),e.keyPressHandler=i.add(e.id,"keypress",function(t){var n;13==t.keyCode&&(n=e.selectedValue,e.selectedValue=null,i.cancel(t),e.settings.onselect(n))})),e._focused=1}),i.add(e.id,"blur",function(){i.remove(e.id,"keydown",e.keyDownHandler),i.remove(e.id,"keypress",e.keyPressHandler),e._focused=0}),(t.isIE6||!n.boxModel)&&(i.add(e.id,"mouseover",function(){n.hasClass(e.id,r+"Disabled")||n.addClass(e.id,r+"Hover")}),i.add(e.id,"mouseout",function(){n.hasClass(e.id,r+"Disabled")||n.removeClass(e.id,r+"Hover")})),e.onPostRender.dispatch(e,n.get(e.id))},destroy:function(){this.parent(),i.clear(this.id+"_text"),i.clear(this.id+"_open")}})}(tinymce),function(t){{var e,n=t.DOM,i=t.dom.Event,r=t.each;t.util.Dispatcher}t.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(t,e){this.parent(t,e),this.classPrefix="mceNativeListBox"},setDisabled:function(t){n.get(this.id).disabled=t,this.setAriaProperty("disabled",t)},isDisabled:function(){return n.get(this.id).disabled},select:function(t){var n,i,o=this;return t==e?o.selectByIndex(-1):(i=t&&"function"==typeof t?t:function(e){return e==t},void(t!=o.selectedValue&&(r(o.items,function(t,e){return i(t.value)?(n=1,o.selectByIndex(e),!1):void 0}),n||o.selectByIndex(-1))))},selectByIndex:function(t){n.get(this.id).selectedIndex=t+1,this.selectedValue=this.items[t]?this.items[t].value:null},add:function(t,e,i){var r,o=this;i=i||{},i.value=e,o.isRendered()&&n.add(n.get(this.id),"option",i,t),r={title:t,value:e,attribs:i},o.items.push(r),o.onAdd.dispatch(o,r)},getLength:function(){return this.items.length},renderHTML:function(){var t,e=this;return t=n.createHTML("option",{value:""},"-- "+e.settings.title+" --"),r(e.items,function(e){t+=n.createHTML("option",{value:e.value},e.title)}),t=n.createHTML("select",{id:e.id,"class":"mceNativeListBox","aria-labelledby":e.id+"_aria"},t),t+=n.createHTML("span",{id:e.id+"_aria",style:"display: none"},e.settings.title)},postRender:function(){function t(t){var e=r.items[t.target.selectedIndex-1];e&&(e=e.value)&&(r.onChange.dispatch(r,e),r.settings.onselect&&r.settings.onselect(e))}var e,r=this,o=!0;r.rendered=!0,i.add(r.id,"change",t),i.add(r.id,"keydown",function(n){var a,s=38,l=40,c=13,u=32;return i.remove(r.id,"change",e),o=!1,a=i.add(r.id,"blur",function(){o||(o=!0,i.add(r.id,"change",t),i.remove(r.id,"blur",a))}),n.keyCode==c||n.keyCode==u?(t(n),i.cancel(n)):void((n.keyCode==l||n.keyCode==s)&&n.stopImmediatePropagation())}),r.onPostRender.dispatch(r,n.get(r.id))}})}(tinymce),function(t){{var e=t.DOM,n=t.dom.Event;t.each}t.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,i,r){this.parent(n,i,r),this.onRenderMenu=new t.util.Dispatcher(this),i.menu_container=i.menu_container||e.doc.body},showMenu:function(){var t,i,r,o=this,a=e.get(o.id);if(!o.isDisabled()){if(o.isMenuRendered||(o.renderMenu(),o.isMenuRendered=!0),o.isMenuVisible)return o.hideMenu();t=e.getPos(o.settings.menu_container),i=e.getPos(a),r=o.menu,r.settings.offset_x=i.x,r.settings.offset_y=i.y,r.settings.vp_offset_x=i.x,r.settings.vp_offset_y=i.y,r.settings.keyboard_focus=o._focused,r.showMenu(0,a.firstChild.clientHeight),n.add(e.doc,"mousedown",o.hideMenu,o),o.setState("Selected",1),o.isMenuVisible=1}},renderMenu:function(){var t,e=this;t=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:e.settings.icons}),t.onHideMenu.add(function(){e.hideMenu(),e.focus()}),e.onRenderMenu.dispatch(e,t),e.menu=t},hideMenu:function(t){var i=this;t&&"mousedown"==t.type&&e.getParent(t.target,function(t){return t.id===i.id||t.id===i.id+"_open"})||(t&&e.getParent(t.target,".mceMenu")||(i.setState("Selected",0),n.remove(e.doc,"mousedown",i.hideMenu,i),i.menu&&i.menu.hideMenu()),i.isMenuVisible=0)},postRender:function(){var t=this,e=t.settings;n.add(t.id,"click",function(){t.isDisabled()||(e.onclick&&e.onclick(t.value),t.showMenu())})}})}(tinymce),function(t){{var e=t.DOM,n=t.dom.Event;t.each}t.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(t,e,n){this.parent(t,e,n),this.classPrefix="mceSplitButton"},renderHTML:function(){var t,n,i=this,r=i.settings;return t="<tbody><tr>",n=r.image?e.createHTML("img ",{src:r.image,role:"presentation","class":"mceAction "+r["class"]}):e.createHTML("span",{"class":"mceAction "+r["class"]},""),n+=e.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:i.id+"_voice",style:"display:none;"},r.title),t+="<td >"+e.createHTML("a",{role:"button",id:i.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},n)+"</td>",n=e.createHTML("span",{"class":"mceOpen "+r["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span>'),t+="<td >"+e.createHTML("a",{role:"button",id:i.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},n)+"</td>",t+="</tr></tbody>",t=e.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+r["class"],cellpadding:"0",cellspacing:"0",title:r.title},t),e.createHTML("div",{id:i.id,role:"button",tabindex:"0","aria-labelledby":i.id+"_voice","aria-haspopup":"true"},t)},postRender:function(){var i,r=this,o=r.settings;o.onclick&&(i=function(t){r.isDisabled()||(o.onclick(r.value),n.cancel(t))},n.add(r.id+"_action","click",i),n.add(r.id,["click","keydown"],function(t){var e=40;32!==t.keyCode&&13!==t.keyCode&&14!==t.keyCode||t.altKey||t.ctrlKey||t.metaKey?("click"===t.type||t.keyCode===e)&&(r.showMenu(),n.cancel(t)):(i(),n.cancel(t))})),n.add(r.id+"_open","click",function(t){r.showMenu(),n.cancel(t)}),n.add([r.id,r.id+"_open"],"focus",function(){r._focused=1}),n.add([r.id,r.id+"_open"],"blur",function(){r._focused=0}),(t.isIE6||!e.boxModel)&&(n.add(r.id,"mouseover",function(){e.hasClass(r.id,"mceSplitButtonDisabled")||e.addClass(r.id,"mceSplitButtonHover")}),n.add(r.id,"mouseout",function(){e.hasClass(r.id,"mceSplitButtonDisabled")||e.removeClass(r.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),n.clear(this.id+"_action"),n.clear(this.id+"_open"),n.clear(this.id)}})}(tinymce),function(t){var e=t.DOM,n=t.dom.Event,i=t.is,r=t.each;t.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(e,n,i){var r=this;r.parent(e,n,i),r.settings=n=t.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},r.settings),r.onShowMenu=new t.util.Dispatcher(r),r.onHideMenu=new t.util.Dispatcher(r),r.value=n.default_color},showMenu:function(){var i,r,o=this;if(!o.isDisabled()){if(o.isMenuRendered||(o.renderMenu(),o.isMenuRendered=!0),o.isMenuVisible)return o.hideMenu();i=e.get(o.id),e.show(o.id+"_menu"),e.addClass(i,"mceSplitButtonSelected"),r=e.getPos(i),e.setStyles(o.id+"_menu",{left:r.x,top:r.y+i.firstChild.clientHeight,zIndex:2e5}),i=0,n.add(e.doc,"mousedown",o.hideMenu,o),o.onShowMenu.dispatch(o),o._focused&&(o._keyHandler=n.add(o.id+"_menu","keydown",function(t){27==t.keyCode&&o.hideMenu()}),e.select("a",o.id+"_menu")[0].focus()),o.keyboardNav=new t.ui.KeyboardNavigation({root:o.id+"_menu",items:e.select("a",o.id+"_menu"),onCancel:function(){o.hideMenu(),o.focus()}}),o.keyboardNav.focus(),o.isMenuVisible=1}},hideMenu:function(t){var i=this;if(i.isMenuVisible){if(t&&"mousedown"==t.type&&e.getParent(t.target,function(t){return t.id===i.id+"_open"}))return;t&&e.getParent(t.target,".mceSplitButtonMenu")||(e.removeClass(i.id,"mceSplitButtonSelected"),n.remove(e.doc,"mousedown",i.hideMenu,i),n.remove(i.id+"_menu","keydown",i._keyHandler),e.hide(i.id+"_menu")),i.isMenuVisible=0,i.onHideMenu.dispatch(),i.keyboardNav.destroy()}},renderMenu:function(){var o,a,s,l,c,u,d=this,h=0,f=d.settings;return c=e.add(f.menu_container,"div",{role:"listbox",id:d.id+"_menu","class":f.menu_class+" "+f["class"],style:"position:absolute;left:0;top:-1000px;"}),o=e.add(c,"div",{"class":f["class"]+" mceSplitButtonMenu"}),e.add(o,"span",{"class":"mceMenuLine"}),a=e.add(o,"table",{role:"presentation","class":"mceColorSplitMenu"}),s=e.add(a,"tbody"),h=0,r(i(f.colors,"array")?f.colors:f.colors.split(","),function(n){n=n.replace(/^#/,""),h--||(l=e.add(s,"tr"),h=f.grid_width-1),a=e.add(l,"td");var i={href:"javascript:;",style:{backgroundColor:"#"+n},title:d.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};t.isIE||(i.role="option"),a=e.add(a,"a",i),d.editor.forcedHighContrastMode&&(a=e.add(a,"canvas",{width:16,height:16,"aria-hidden":"true"}),a.getContext&&(u=a.getContext("2d"))?(u.fillStyle="#"+n,u.fillRect(0,0,16,16)):e.remove(a))}),f.more_colors_func&&(a=e.add(s,"tr"),a=e.add(a,"td",{colspan:f.grid_width,"class":"mceMoreColors"}),a=e.add(a,"a",{role:"option",id:d.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},f.more_colors_title),n.add(a,"click",function(t){return f.more_colors_func.call(f.more_colors_scope||this),n.cancel(t)})),e.addClass(o,"mceColorSplitMenu"),n.add(d.id+"_menu","mousedown",function(t){return n.cancel(t)}),n.add(d.id+"_menu","click",function(t){var n;return t=e.getParent(t.target,"a",s),t&&"a"==t.nodeName.toLowerCase()&&(n=t.getAttribute("data-mce-color"))&&d.setColor(n),!1}),c},setColor:function(t){this.displayColor(t),this.hideMenu(),this.settings.onselect(t)},displayColor:function(t){var n=this;e.setStyle(n.id+"_preview","backgroundColor",t),n.value=t},postRender:function(){var t=this,n=t.id;t.parent(),e.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"}),e.setStyle(t.id+"_preview","backgroundColor",t.value)},destroy:function(){var t=this;t.parent(),n.clear(t.id+"_menu"),n.clear(t.id+"_more"),e.remove(t.id+"_menu"),t.keyboardNav&&t.keyboardNav.destroy()}})}(tinymce),function(t){var e=t.DOM,n=t.each,i=t.dom.Event;t.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var n=this,i=[],r=n.controls,o=t.each,a=n.settings;return i.push('<div id="'+n.id+'" role="group" aria-labelledby="'+n.id+'_voice">'),i.push("<span role='application'>"),i.push('<span id="'+n.id+'_voice" class="mceVoiceLabel" style="display:none;">'+e.encode(a.name)+"</span>"),o(r,function(t){i.push(t.renderHTML())}),i.push("</span>"),i.push("</div>"),i.join("")},focus:function(){var t=this;e.get(t.id).focus()},postRender:function(){var i=this,r=[];n(i.controls,function(t){n(t.controls,function(t){t.id&&r.push(t)})}),i.keyNav=new t.ui.KeyboardNavigation({root:i.id,items:r,onCancel:function(){t.isWebKit&&e.get(i.editor.id+"_ifr").focus(),i.editor.focus()},excludeFromTabOrder:!i.settings.tab_focus_toolbar})},destroy:function(){var t=this;t.parent(),t.keyNav.destroy(),i.clear(t.id)}})}(tinymce),function(t){{var e=t.DOM;t.each}t.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var t,n,i,r,o,a,s=this,l="",c=s.settings;for(a=s.controls,i=0;i<a.length;i++)n=a[i],r=a[i-1],o=a[i+1],0===i&&(t="mceToolbarStart",n.Button?t+=" mceToolbarStartButton":n.SplitButton?t+=" mceToolbarStartSplitButton":n.ListBox&&(t+=" mceToolbarStartListBox"),l+=e.createHTML("td",{"class":t},e.createHTML("span",null,"<!-- IE -->"))),r&&n.ListBox&&(r.Button||r.SplitButton)&&(l+=e.createHTML("td",{"class":"mceToolbarEnd"},e.createHTML("span",null,"<!-- IE -->"))),l+=e.stdMode?'<td style="position: relative">'+n.renderHTML()+"</td>":"<td>"+n.renderHTML()+"</td>",o&&n.ListBox&&(o.Button||o.SplitButton)&&(l+=e.createHTML("td",{"class":"mceToolbarStart"},e.createHTML("span",null,"<!-- IE -->")));return t="mceToolbarEnd",n.Button?t+=" mceToolbarEndButton":n.SplitButton?t+=" mceToolbarEndSplitButton":n.ListBox&&(t+=" mceToolbarEndListBox"),l+=e.createHTML("td",{"class":t},e.createHTML("span",null,"<!-- IE -->")),e.createHTML("table",{id:s.id,"class":"mceToolbar"+(c["class"]?" "+c["class"]:""),cellpadding:"0",cellspacing:"0",align:s.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+l+"</tr></tbody>")}})}(tinymce),function(t){{var e=t.util.Dispatcher;t.each}t.create("tinymce.AddOnManager",{AddOnManager:function(){var t=this;t.items=[],t.urls={},t.lookup={},t.onAdd=new e(t)},get:function(t){return this.lookup[t]?this.lookup[t].instance:void 0},dependencies:function(t){var e;return this.lookup[t]&&(e=this.lookup[t].dependencies),e||[]},requireLangPack:function(e){var n=t.settings;n&&n.language&&n.language_load!==!1&&t.ScriptLoader.add(this.urls[e]+"/langs/"+n.language+".js")
},add:function(t,e,n){return this.items.push(e),this.lookup[t]={instance:e,dependencies:n},this.onAdd.dispatch(this,t,e),e},createUrl:function(t,e){return"object"==typeof e?e:{prefix:t.prefix,resource:e,suffix:t.suffix}},addComponents:function(e,n){var i=this.urls[e];t.each(n,function(e){t.ScriptLoader.add(i+"/"+e)})},load:function(e,n,i,r){function o(){var o=a.dependencies(e);t.each(o,function(t){var e=a.createUrl(n,t);a.load(e.resource,e,void 0,void 0)}),i&&i.call(r?r:t.ScriptLoader)}var a=this,s=n;a.urls[e]||("object"==typeof n&&(s=n.prefix+n.resource+n.suffix),0!==s.indexOf("/")&&-1==s.indexOf("://")&&(s=t.baseURL+"/"+s),a.urls[e]=s.substring(0,s.lastIndexOf("/")),a.lookup[e]?o():t.ScriptLoader.add(s,o,r))}}),t.PluginManager=new t.AddOnManager,t.ThemeManager=new t.AddOnManager}(tinymce),function(t){var e,n=t.each,i=t.extend,r=t.DOM,o=t.dom.Event,a=(t.ThemeManager,t.PluginManager,t.explode),s=t.util.Dispatcher,l=0;t.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t.documentBaseURL)||(t.documentBaseURL+="/"),t.baseURL=new t.util.URI(t.documentBaseURL).toAbsolute(t.baseURL),t.baseURI=new t.util.URI(t.baseURL),t.onBeforeUnload=new s(t),o.add(window,"beforeunload",function(e){t.onBeforeUnload.dispatch(t,e)}),t.onAddEditor=new s(t),t.onRemoveEditor=new s(t),t.EditorManager=i(t,{editors:[],i18n:{},activeEditor:null,init:function(e){function i(t){var e=t.id;return e||(e=t.name,e=e&&!r.get(e)?t.name:r.uniqueId(),t.setAttribute("id",e)),e}function s(e,n,i){var r=e[n];if(r)return t.is(r,"string")&&(i=r.replace(/\.\w+$/,""),i=i?t.resolve(i):0,r=t.resolve(r)),r.apply(i||this,Array.prototype.slice.call(arguments,2))}function c(t,e){return e.constructor===RegExp?e.test(t.className):r.hasClass(t,e)}var u,d=this,h=(t.ScriptLoader,[]);d.settings=e,o.bind(window,"ready",function(){var o,d;switch(s(e,"onpageload"),e.mode){case"exact":o=e.elements||"",o.length>0&&n(a(o),function(i){r.get(i)?(u=new t.Editor(i,e),h.push(u),u.render(1)):n(document.forms,function(o){n(o.elements,function(n){n.name===i&&(i="mce_editor_"+l++,r.setAttrib(n,"id",i),u=new t.Editor(i,e),h.push(u),u.render(1))})})});break;case"textareas":case"specific_textareas":n(r.select("textarea"),function(n){e.editor_deselector&&c(n,e.editor_deselector)||(!e.editor_selector||c(n,e.editor_selector))&&(u=new t.Editor(i(n),e),h.push(u),u.render(1))});break;default:e.types?n(e.types,function(o){n(r.select(o.selector),function(n){var r=new t.Editor(i(n),t.extend({},e,o));h.push(r),r.render(1)})}):e.selector&&n(r.select(e.selector),function(n){var r=new t.Editor(i(n),e);h.push(r),r.render(1)})}e.oninit&&(o=d=0,n(h,function(t){d++,t.initialized?o++:t.onInit.add(function(){o++,o==d&&s(e,"oninit")}),o==d&&s(e,"oninit")}))})},get:function(t){return t===e?this.editors:this.editors.hasOwnProperty(t)?this.editors[t]:e},getInstanceById:function(t){return this.get(t)},add:function(t){var e=this,n=e.editors;return n[t.id]=t,n.push(t),e._setActive(t),e.onAddEditor.dispatch(e,t),t},remove:function(t){var e,n=this,i=n.editors;if(!i[t.id])return null;for(delete i[t.id],e=0;e<i.length;e++)if(i[e]==t){i.splice(e,1);break}return n.activeEditor==t&&n._setActive(i[0]),t.destroy(),n.onRemoveEditor.dispatch(n,t),t},execCommand:function(e,n,i){function r(){s.destroy(),o.detachEvent("onunload",r),o=o.tinyMCE=o.tinymce=null}var o,a=this,s=a.get(i);switch(e){case"mceFocus":return s.focus(),!0;case"mceAddEditor":case"mceAddControl":return a.get(i)||new t.Editor(i,a.settings).render(),!0;case"mceAddFrameControl":return o=i.window,o.tinyMCE=tinyMCE,o.tinymce=t,t.DOM.doc=o.document,t.DOM.win=o,s=new t.Editor(i.element_id,i),s.render(),t.isIE&&!t.isIE11&&o.attachEvent("onunload",r),i.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(a.execCommand("mceAddControl",0,i),!0)}return a.activeEditor?a.activeEditor.execCommand(e,n,i):!1},execInstanceCommand:function(t,e,n,i){var r=this.get(t);return r?r.execCommand(e,n,i):!1},triggerSave:function(){n(this.editors,function(t){t.save()})},addI18n:function(e,i){var r=this.i18n;t.is(e,"string")?n(i,function(t,n){r[e+"."+n]=t}):n(e,function(t,e){n(t,function(t,i){n(t,function(t,n){"common"===i?r[e+"."+n]=t:r[e+"."+i+"."+n]=t})})})},_setActive:function(t){this.selectedInstance=this.activeEditor=t}})}(tinymce),function(t){var e=t.DOM,n=t.dom.Event,i=t.extend,r=t.each,o=t.isGecko,a=t.isIE,s=(t.isWebKit,t.is),l=t.ThemeManager,c=t.PluginManager,u=t.explode;t.create("tinymce.Editor",{Editor:function(e,n){var r=this,o=!0;r.settings=n=i({id:e,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t.documentBaseURL,add_form_submit_trigger:o,submit_patch:o,add_unload_trigger:o,convert_urls:o,relative_urls:o,remove_script_host:o,table_inline_editing:!1,object_resizing:o,accessibility_focus:o,doctype:t.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:o,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:o,directionality:"ltr",forced_root_block:"p",hidden_input:o,padd_empty_editor:o,render_ui:o,indentation:"30px",fix_table_elements:o,inline_styles:o,convert_fonts_to_spans:o,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:o,entity_encoding:"named",url_converter:r.convertURL,url_converter_scope:r,ie7_compat:o},n),r.id=r.editorId=e,r.isNotDirty=!1,r.plugins={},r.documentBaseURI=new t.util.URI(n.document_base_url||t.documentBaseURL,{base_uri:tinyMCE.baseURI}),r.baseURI=t.baseURI,r.contentCSS=[],r.contentStyles=[],r.setupEvents(),r.execCommands={},r.queryStateCommands={},r.queryValueCommands={},r.execCallback("setup",r)},render:function(){function i(){a.language&&a.language_load!==!1&&d.add(t.baseURL+"/langs/"+a.language+".js"),a.theme&&"function"!=typeof a.theme&&"-"!=a.theme.charAt(0)&&!l.urls[a.theme]&&l.load(a.theme,"themes/"+a.theme+"/editor_template"+t.suffix+".js"),r(u(a.plugins),function(e){if(e&&!c.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var n=c.dependencies(e);r(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/editor_plugin"+t.suffix+".js"};e=c.createUrl(n,e),c.load(e.resource,e)})}else{if("safari"==e)return;c.load(e,{prefix:"plugins/",resource:e,suffix:"/editor_plugin"+t.suffix+".js"})}}),d.loadQueue(function(){o.removed||o.init()})}var o=this,a=o.settings,s=o.id,d=t.ScriptLoader;return n.domLoaded?(tinyMCE.settings=a,void(o.getElement()&&(!t.isIDevice||t.isIOS5)&&(!/TEXTAREA|INPUT/i.test(o.getElement().nodeName)&&a.hidden_input&&e.getParent(s,"form")&&e.insertAfter(e.create("input",{type:"hidden",name:s}),s),a.content_editable||(o.orgVisibility=o.getElement().style.visibility,o.getElement().style.visibility="hidden"),t.WindowManager&&(o.windowManager=new t.WindowManager(o)),"xml"==a.encoding&&o.onGetContent.add(function(t,n){n.save&&(n.content=e.encode(n.content))}),a.add_form_submit_trigger&&o.onSubmit.addToTop(function(){o.initialized&&(o.save(),o.isNotDirty=1)}),a.add_unload_trigger&&(o._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!o.initialized||o.destroyed||o.isHidden()||o.save({format:"raw",no_events:!0})})),t.addUnload(o.destroy,o),a.submit_patch&&o.onBeforeRenderUI.add(function(){var e=o.getElement().form;e&&(e._mceOldSubmit||(e.submit.nodeType||e.submit.length||(o.formElement=e,e._mceOldSubmit=e.submit,e.submit=function(){return t.triggerSave(),o.isNotDirty=1,o.formElement._mceOldSubmit(o.formElement)}),e=null))}),i()))):void n.add(window,"ready",function(){o.render()})},init:function(){function n(e){var i,o=c.get(e),a=c.urls[e]||t.documentBaseURL.replace(/\/$/,"");o&&-1===t.inArray(w,e)&&(r(c.dependencies(e),function(t){n(t)}),i=new o(y,a),y.plugins[e]=i,i.init&&(i.init(y,a),w.push(e)))}var i,o,s,d,h,f,p,m,g,v,y=this,b=y.settings,x=y.getElement(),w=[];if(t.add(y),b.aria_label=b.aria_label||e.getAttrib(x,"aria-label",y.getLang("aria.rich_text_area")),b.theme&&("function"!=typeof b.theme?(b.theme=b.theme.replace(/-/,""),h=l.get(b.theme),y.theme=new h,y.theme.init&&y.theme.init(y,l.urls[b.theme]||t.documentBaseURL.replace(/\/$/,""))):y.theme=b.theme),r(u(b.plugins.replace(/\-/g,"")),n),b.popup_css!==!1&&(b.popup_css=b.popup_css?y.documentBaseURI.toAbsolute(b.popup_css):y.baseURI.toAbsolute("themes/"+b.theme+"/skins/"+b.skin+"/dialog.css")),b.popup_css_add&&(b.popup_css+=","+y.documentBaseURI.toAbsolute(b.popup_css_add)),y.controlManager=new t.ControlManager(y),y.onBeforeRenderUI.dispatch(y,y.controlManager),b.render_ui&&y.theme&&(y.orgDisplay=x.style.display,"function"!=typeof b.theme?(o=b.width||x.style.width||x.offsetWidth,s=b.height||x.style.height||x.offsetHeight,d=b.min_height||100,g=/^[0-9\.]+(|px)$/i,g.test(""+o)&&(o=Math.max(parseInt(o,10)+(h.deltaWidth||0),100)),g.test(""+s)&&(s=Math.max(parseInt(s,10)+(h.deltaHeight||0),d)),h=y.theme.renderUI({targetNode:x,width:o,height:s,deltaWidth:b.delta_width,deltaHeight:b.delta_height}),e.setStyles(h.sizeContainer||h.editorContainer,{width:o,height:s}),s=(h.iframeHeight||s)+("number"==typeof s?h.deltaHeight||0:""),d>s&&(s=d)):(h=b.theme(y,x),h.editorContainer.nodeType&&(h.editorContainer=h.editorContainer.id=h.editorContainer.id||y.id+"_parent"),h.iframeContainer.nodeType&&(h.iframeContainer=h.iframeContainer.id=h.iframeContainer.id||y.id+"_iframecontainer"),s=h.iframeHeight||x.offsetHeight,a&&(y.onInit.add(function(t){t.dom.bind(t.getBody(),"beforedeactivate keydown keyup",function(){t.bookmark=t.selection.getBookmark(1)})}),y.onNodeChange.add(function(t){document.activeElement.id==t.id+"_ifr"&&(t.bookmark=t.selection.getBookmark(1))}))),y.editorContainer=h.editorContainer),b.content_css&&r(u(b.content_css),function(t){y.contentCSS.push(y.documentBaseURI.toAbsolute(t))}),b.content_style&&y.contentStyles.push(b.content_style),b.content_editable)return x=i=h=null,y.initContentBody();for(document.domain&&location.hostname!=document.domain&&(t.relaxedDomain=document.domain),y.iframeHTML=b.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',b.document_base_url!=t.documentBaseURL&&(y.iframeHTML+='<base href="'+y.documentBaseURI.getURI()+'" />'),t.isIE8&&(y.iframeHTML+=b.ie7_compat?'<meta http-equiv="X-UA-Compatible" content="IE=7" />':'<meta http-equiv="X-UA-Compatible" content="IE=edge" />'),y.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',v=0;v<y.contentCSS.length;v++)y.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+y.contentCSS[v]+'" />';y.contentCSS=[],p=b.body_id||"tinymce",-1!=p.indexOf("=")&&(p=y.getParam("body_id","","hash"),p=p[y.id]||p),m=b.body_class||"",-1!=m.indexOf("=")&&(m=y.getParam("body_class","","hash"),m=m[y.id]||""),y.iframeHTML+='</head><body id="'+p+'" class="mceContentBody '+m+'" onload="window.parent.tinyMCE.get(\''+y.id+"').onLoad.dispatch();\"><br></body></html>",t.relaxedDomain&&(a||t.isOpera&&parseFloat(opera.version())<11)&&(f='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+y.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'),i=e.add(h.iframeContainer,"iframe",{id:y.id+"_ifr",src:f||'javascript:""',frameBorder:"0",allowTransparency:"true",title:b.aria_label,style:{width:"100%",height:s,display:"block"}}),y.contentAreaContainer=h.iframeContainer,h.editorContainer&&(e.get(h.editorContainer).style.display=y.orgDisplay),x.style.visibility=y.orgVisibility,e.get(y.id).style.display="none",e.setAttrib(y.id,"aria-hidden",!0),t.relaxedDomain&&f||y.initContentBody(),x=i=h=null},initContentBody:function(){var n,i,o=this,s=o.settings,l=e.get(o.id),c=o.getDoc();a&&t.relaxedDomain||s.content_editable||(c.open(),c.write(o.iframeHTML),c.close(),t.relaxedDomain&&(c.domain=t.relaxedDomain)),s.content_editable&&(e.addClass(l,"mceContentBody"),o.contentDocument=c=s.content_document||document,o.contentWindow=s.content_window||window,o.bodyElement=l,s.content_document=s.content_window=null),n=o.getBody(),n.disabled=!0,s.readonly||(n.contentEditable=o.getParam("content_editable_state",!0)),n.disabled=!1,o.schema=new t.html.Schema(s),o.dom=new t.dom.DOMUtils(c,{keep_values:!0,url_converter:o.convertURL,url_converter_scope:o,hex_colors:s.force_hex_style_colors,class_filter:s.class_filter,update_styles:!0,root_element:s.content_editable?o.id:null,schema:o.schema}),o.parser=new t.html.DomParser(s,o.schema),o.parser.addAttributeFilter("src,href,style",function(t,e){for(var n,i,r,a=t.length,s=o.dom;a--;)n=t[a],i=n.attr(e),r="data-mce-"+e,n.attributes.map[r]||("style"===e?n.attr(r,s.serializeStyle(s.parseStyle(i),n.name)):n.attr(r,o.convertURL(i,e,n.name)))}),o.parser.addNodeFilter("script",function(t){for(var e,n=t.length;n--;)e=t[n],e.attr("type","mce-"+(e.attr("type")||"text/javascript"))}),o.parser.addNodeFilter("#cdata",function(t){for(var e,n=t.length;n--;)e=t[n],e.type=8,e.name="#comment",e.value="[CDATA["+e.value+"]]"}),o.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var n,i=e.length,r=o.schema.getNonEmptyElements();i--;)n=e[i],n.isEmpty(r)&&(n.empty().append(new t.html.Node("br",1)).shortEnded=!0)}),o.serializer=new t.dom.Serializer(s,o.dom,o.schema),o.selection=new t.dom.Selection(o.dom,o.getWin(),o.serializer,o),o.formatter=new t.Formatter(o),o.undoManager=new t.UndoManager(o),o.forceBlocks=new t.ForceBlocks(o),o.enterKey=new t.EnterKey(o),o.editorCommands=new t.EditorCommands(o),o.onExecCommand.add(function(t,e){/^(FontName|FontSize)$/.test(e)||o.nodeChanged()}),o.serializer.onPreProcess.add(function(t,e){return o.onPreProcess.dispatch(o,e,t)}),o.serializer.onPostProcess.add(function(t,e){return o.onPostProcess.dispatch(o,e,t)}),o.onPreInit.dispatch(o),s.browser_spellcheck||s.gecko_spellcheck||(c.body.spellcheck=!1),s.readonly||o.bindNativeEvents(),o.controlManager.onPostRender.dispatch(o,o.controlManager),o.onPostRender.dispatch(o),o.quirks=t.util.Quirks(o),s.directionality&&(n.dir=s.directionality),s.nowrap&&(n.style.whiteSpace="nowrap"),s.protect&&o.onBeforeSetContent.add(function(t,e){r(s.protect,function(t){e.content=e.content.replace(t,function(t){return"<!--mce:protected "+escape(t)+"-->"})})}),o.onSetContent.add(function(){o.addVisual(o.getBody())}),s.padd_empty_editor&&o.onPostProcess.add(function(t,e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),o.load({initial:!0,format:"html"}),o.startContent=o.getContent({format:"raw"}),o.initialized=!0,o.onInit.dispatch(o),o.execCallback("setupcontent_callback",o.id,n,c),o.execCallback("init_instance_callback",o),o.focus(!0),o.nodeChanged({initial:!0}),o.contentStyles.length>0&&(i="",r(o.contentStyles,function(t){i+=t+"\r\n"}),o.dom.addStyle(i)),r(o.contentCSS,function(t){o.dom.loadCSS(t)}),s.auto_focus&&setTimeout(function(){var e=t.get(s.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getBody().focus(),e.getWin().focus()},100),l=c=n=null},focus:function(e){var n,i,r,o,a=this,s=a.selection,l=a.settings.content_editable,c=a.getDoc();e||(a.bookmark&&(s.moveToBookmark(a.bookmark),a.bookmark=null),i=s.getRng(),i.item&&(r=i.item(0)),a._refreshContentEditable(),l||a.getWin().focus(),(t.isGecko||l)&&(o=a.getBody(),o.setActive&&!t.isIE11?o.setActive():o.focus(),l&&s.normalize()),r&&r.ownerDocument==c&&(i=c.body.createControlRange(),i.addElement(r),i.select())),t.activeEditor!=a&&(null!=(n=t.activeEditor)&&n.onDeactivate.dispatch(n,a),a.onActivate.dispatch(a,n)),t._setActive(a)},execCallback:function(e){var n,i=this,r=i.settings[e];if(r)return i.callbackLookup&&(n=i.callbackLookup[e])&&(r=n.func,n=n.scope),s(r,"string")&&(n=r.replace(/\.\w+$/,""),n=n?t.resolve(n):0,r=t.resolve(r),i.callbackLookup=i.callbackLookup||{},i.callbackLookup[e]={func:r,scope:n}),r.apply(n||i,Array.prototype.slice.call(arguments,1))},translate:function(e){var n=this.settings.language||"en",i=t.i18n;return e?i[n+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(t,e){return i[n+"."+e]||"{#"+e+"}"}):""},getLang:function(e,n){return t.i18n[(this.settings.language||"en")+"."+e]||(s(n)?n:"{#"+e+"}")},getParam:function(e,n,i){var o,a=t.trim,l=s(this.settings[e])?this.settings[e]:n;return"hash"===i?(o={},s(l,"string")?r(l.split(l.indexOf("=")>0?/[;,](?![^=;,]*(?:[;,]|$))/:","),function(t){t=t.split("="),o[a(t[0])]=a(t.length>1?t[1]:t)}):o=l,o):l},nodeChanged:function(t){var e,n=this,i=n.selection;n.initialized&&(t=t||{},e=i.getStart()||n.getBody(),e=a&&e.ownerDocument!=n.getDoc()?n.getBody():e,t.parents=[],n.dom.getParent(e,function(e){return"BODY"==e.nodeName?!0:void t.parents.push(e)}),n.onNodeChange.dispatch(n,t?t.controlManager||n.controlManager:n.controlManager,e,i.isCollapsed(),t))},addButton:function(t,e){var n=this;n.buttons=n.buttons||{},n.buttons[t]=e},addCommand:function(t,e,n){this.execCommands[t]={func:e,scope:n||this}},addQueryStateHandler:function(t,e,n){this.queryStateCommands[t]={func:e,scope:n||this}},addQueryValueHandler:function(t,e,n){this.queryValueCommands[t]={func:e,scope:n||this}},addShortcut:function(t,e,n,i){var o,a=this;return a.settings.custom_shortcuts===!1?!1:(a.shortcuts=a.shortcuts||{},s(n,"string")&&(o=n,n=function(){a.execCommand(o,!1,null)}),s(n,"object")&&(o=n,n=function(){a.execCommand(o[0],o[1],o[2])}),r(u(t),function(t){var o={func:n,scope:i||this,desc:a.translate(e),alt:!1,ctrl:!1,shift:!1};r(u(t,"+"),function(t){switch(t){case"alt":case"ctrl":case"shift":o[t]=!0;break;default:o.charCode=t.charCodeAt(0),o.keyCode=t.toUpperCase().charCodeAt(0)}}),a.shortcuts[(o.ctrl?"ctrl":"")+","+(o.alt?"alt":"")+","+(o.shift?"shift":"")+","+o.keyCode]=o}),!0)},execCommand:function(t,e,n,o){var a,s,l=this,c=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(t)||o&&o.skip_focus||l.focus(),o=i({},o),l.onBeforeExecCommand.dispatch(l,t,e,n,o),o.terminate?!1:l.execCallback("execcommand_callback",l.id,l.selection.getNode(),t,e,n)?(l.onExecCommand.dispatch(l,t,e,n,o),!0):(a=l.execCommands[t])&&(s=a.func.call(a.scope,e,n),s!==!0)?(l.onExecCommand.dispatch(l,t,e,n,o),s):(r(l.plugins,function(i){return i.execCommand&&i.execCommand(t,e,n)?(l.onExecCommand.dispatch(l,t,e,n,o),c=1,!1):void 0}),c?!0:l.theme&&l.theme.execCommand&&l.theme.execCommand(t,e,n)?(l.onExecCommand.dispatch(l,t,e,n,o),!0):l.editorCommands.execCommand(t,e,n)?(l.onExecCommand.dispatch(l,t,e,n,o),!0):(l.getDoc().execCommand(t,e,n),void l.onExecCommand.dispatch(l,t,e,n,o)))},queryCommandState:function(t){var e,n,i=this;if(!i._isHidden()){if((e=i.queryStateCommands[t])&&(n=e.func.call(e.scope),n!==!0))return n;if(e=i.editorCommands.queryCommandState(t),-1!==e)return e;try{return this.getDoc().queryCommandState(t)}catch(r){}}},queryCommandValue:function(t){var e,n,i=this;if(!i._isHidden()){if((e=i.queryValueCommands[t])&&(n=e.func.call(e.scope),n!==!0))return n;if(e=i.editorCommands.queryCommandValue(t),s(e))return e;try{return this.getDoc().queryCommandValue(t)}catch(r){}}},show:function(){var t=this;e.show(t.getContainer()),e.hide(t.id),t.load()},hide:function(){var t=this,n=t.getDoc();a&&n&&n.execCommand("SelectAll"),t.save(),e.hide(t.getContainer()),e.setStyle(t.id,"display",t.orgDisplay)},isHidden:function(){return!e.isHidden(this.id)},setProgressState:function(t,e,n){return this.onSetProgressState.dispatch(this,t,e,n),t},load:function(t){var e,n=this,i=n.getElement();return i?(t=t||{},t.load=!0,e=n.setContent(s(i.value)?i.value:i.innerHTML,t),t.element=i,t.no_events||n.onLoadContent.dispatch(n,t),t.element=i=null,e):void 0},save:function(t){var n,i,o=this,a=o.getElement();if(a&&o.initialized)return t=t||{},t.save=!0,t.element=a,n=t.content=o.getContent(t),t.no_events||o.onSaveContent.dispatch(o,t),n=t.content,/TEXTAREA|INPUT/i.test(a.nodeName)?a.value=n:(a.innerHTML=n,(i=e.getParent(o.id,"form"))&&r(i.elements,function(t){return t.name==o.id?(t.value=n,!1):void 0})),t.element=a=null,n},setContent:function(e,n){var i,r=this,o=r.getBody();return n=n||{},n.format=n.format||"html",n.set=!0,n.content=e,n.no_events||r.onBeforeSetContent.dispatch(r,n),e=n.content,t.isIE||0!==e.length&&!/^\s+$/.test(e)?("raw"!==n.format&&(e=new t.html.Serializer({},r.schema).serialize(r.parser.parse(e))),n.content=t.trim(e),r.dom.setHTML(o,n.content),n.no_events||r.onSetContent.dispatch(r,n),r.settings.content_editable&&document.activeElement!==r.getBody()||r.selection.normalize(),n.content):(i=r.settings.forced_root_block,e=i?"<"+i+'><br data-mce-bogus="1"></'+i+">":'<br data-mce-bogus="1">',o.innerHTML=e,r.selection.select(o,!0),void r.selection.collapse(!0))},getContent:function(e){var n,i=this,r=i.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||i.onBeforeGetContent.dispatch(i,e),n="raw"==e.format?r.innerHTML:"text"==e.format?r.innerText||r.textContent:i.serializer.serialize(r,e),e.content="text"!=e.format?t.trim(n):n,e.no_events||i.onGetContent.dispatch(i,e),e.content},isDirty:function(){var e=this;return t.trim(e.startContent)!=t.trim(e.getContent({format:"raw",no_events:1}))&&!e.isNotDirty},getContainer:function(){var t=this;return t.container||(t.container=e.get(t.editorContainer||t.id+"_parent")),t.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return e.get(this.settings.content_element||this.id)},getWin:function(){var t,n=this;return n.contentWindow||(t=e.get(n.id+"_ifr"),t&&(n.contentWindow=t.contentWindow)),n.contentWindow},getDoc:function(){var t,e=this;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(t,e,n){var i=this,r=i.settings;return r.urlconverter_callback?i.execCallback("urlconverter_callback",t,n,!0,e):!r.convert_urls||n&&"LINK"==n.nodeName||0===t.indexOf("file:")?t:r.relative_urls?i.documentBaseURI.toRelative(t):t=i.documentBaseURI.toAbsolute(t,r.remove_script_host)},addVisual:function(t){var e,n=this,i=n.settings,o=n.dom;t=t||n.getBody(),s(n.hasVisual)||(n.hasVisual=i.visual),r(o.select("table,a",t),function(t){var r;switch(t.nodeName){case"TABLE":return e=i.visual_table_class||"mceItemTable",r=o.getAttrib(t,"border"),void(r&&"0"!=r||(n.hasVisual?o.addClass(t,e):o.removeClass(t,e)));case"A":return void(o.getAttrib(t,"href",!1)||(r=o.getAttrib(t,"name")||t.id,e="mceItemAnchor",r&&(n.hasVisual?o.addClass(t,e):o.removeClass(t,e))))}}),n.onVisualAid.dispatch(n,t,n.hasVisual)},remove:function(){var i=this,r=i.getContainer(),o=i.getDoc();i.removed||(i.removed=1,a&&o&&o.execCommand("SelectAll"),i.save(),e.setStyle(i.id,"display",i.orgDisplay),i.settings.content_editable||(n.unbind(i.getWin()),n.unbind(i.getDoc())),n.unbind(i.getBody()),n.clear(r),i.execCallback("remove_instance_callback",i),i.onRemove.dispatch(i),i.onExecCommand.listeners=[],t.remove(i),e.remove(r))},destroy:function(e){var i=this;i.destroyed||(o&&(n.unbind(i.getDoc()),n.unbind(i.getWin()),n.unbind(i.getBody())),e||(t.removeUnload(i.destroy),tinyMCE.onBeforeUnload.remove(i._beforeUnload),i.theme&&i.theme.destroy&&i.theme.destroy(),i.controlManager.destroy(),i.selection.destroy(),i.dom.destroy()),i.formElement&&(i.formElement.submit=i.formElement._mceOldSubmit,i.formElement._mceOldSubmit=null),i.contentAreaContainer=i.formElement=i.container=i.settings.content_element=i.bodyElement=i.contentDocument=i.contentWindow=null,i.selection&&(i.selection=i.selection.win=i.selection.dom=i.selection.dom.doc=null),i.destroyed=1)},_refreshContentEditable:function(){var t,e,n=this;n._isHidden()&&(t=n.getBody(),e=t.parentNode,e.removeChild(t),e.appendChild(t),t.focus())},_isHidden:function(){var t;return o?(t=this.selection.getSel(),!t||!t.rangeCount||0===t.rangeCount):0}})}(tinymce),function(t){var e=t.each;t.Editor.prototype.setupEvents=function(){var n=this,i=n.settings;e(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(e){n[e]=new t.util.Dispatcher(n)}),i.cleanup_callback&&(n.onBeforeSetContent.add(function(t,e){e.content=t.execCallback("cleanup_callback","insert_to_editor",e.content,e)}),n.onPreProcess.add(function(t,e){e.set&&t.execCallback("cleanup_callback","insert_to_editor_dom",e.node,e),e.get&&t.execCallback("cleanup_callback","get_from_editor_dom",e.node,e)}),n.onPostProcess.add(function(t,e){e.set&&(e.content=t.execCallback("cleanup_callback","insert_to_editor",e.content,e)),e.get&&(e.content=t.execCallback("cleanup_callback","get_from_editor",e.content,e))})),i.save_callback&&n.onGetContent.add(function(t,e){e.save&&(e.content=t.execCallback("save_callback",t.id,e.content,t.getBody()))}),i.handle_event_callback&&n.onEvent.add(function(t,e,i){n.execCallback("handle_event_callback",e,t,i)===!1&&(e.preventDefault(),e.stopPropagation())}),i.handle_node_change_callback&&n.onNodeChange.add(function(t,e,n){t.execCallback("handle_node_change_callback",t.id,n,-1,-1,!0,t.selection.isCollapsed())}),i.save_callback&&n.onSaveContent.add(function(t,e){var n=t.execCallback("save_callback",t.id,e.content,t.getBody());n&&(e.content=n)}),i.onchange_callback&&n.onChange.add(function(t,e){t.execCallback("onchange_callback",t,e)})},t.Editor.prototype.bindNativeEvents=function(){function n(t,e){t.type;s.removed||s.onEvent.dispatch(s,t,e)!==!1&&s[a[t.fakeType||t.type]].dispatch(s,t,e)}function i(){s.focus(!0)}function r(e,n){65==n.keyCode&&t.VK.metaKeyPressed(n)||s.selection.normalize(),s.nodeChanged()}function o(n,i){(n.altKey||n.ctrlKey||n.metaKey)&&e(s.shortcuts,function(e){var r=t.isMac?n.metaKey:n.ctrlKey;if(e.ctrl==r&&e.alt==n.altKey&&e.shift==n.shiftKey)return n.keyCode==e.keyCode||n.charCode&&n.charCode==e.charCode?(n.preventDefault(),i&&e.func.call(e.scope),!0):void 0})}var a,s=this,l=s.settings,c=s.dom;a={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"},e(a,function(e,i){var r=l.content_editable?s.getBody():s.getDoc();switch(i){case"contextmenu":c.bind(r,i,n);break;case"paste":c.bind(s.getBody(),i,n);break;case"submit":case"reset":c.bind(s.getElement().form||t.DOM.getParent(s.id,"form"),i,n);break;default:c.bind(r,i,n)}}),c.bind(l.content_editable?s.getBody():t.isGecko?s.getDoc():s.getWin(),"focus",function(){s.focus(!0)}),l.content_editable&&t.isOpera&&(c.bind(s.getBody(),"click",i),c.bind(s.getBody(),"keydown",i)),s.onMouseUp.add(r),s.onKeyUp.add(function(e,n){var i=n.keyCode;(i>=33&&36>=i||i>=37&&40>=i||13==i||45==i||46==i||8==i||t.isMac&&(91==i||93==i)||n.ctrlKey)&&r(e,n)}),s.onReset.add(function(){s.setContent(s.startContent,{format:"raw"})}),s.onKeyUp.add(function(t,e){o(e)}),s.onKeyPress.add(function(t,e){o(e)}),s.onKeyDown.add(function(t,e){o(e,!0)}),t.isOpera&&s.onClick.add(function(t,e){e.preventDefault()})}}(tinymce),function(t){var e,n=t.each,i=!0,r=!1;t.EditorCommands=function(o){function a(t,e,n){var o;return t=t.toLowerCase(),(o=y.exec[t])?(o(t,e,n),i):r}function s(t){var e;return t=t.toLowerCase(),(e=y.state[t])?e(t):-1}function l(t){var e;return t=t.toLowerCase(),(e=y.value[t])?e(t):r}function c(t,e){e=e||"exec",n(t,function(t,i){n(i.toLowerCase().split(","),function(n){y[e][n]=t})})}function u(t,n,i){return n===e&&(n=r),i===e&&(i=null),o.getDoc().execCommand(t,n,i)}function d(t){return x.match(t)}function h(t,n){x.toggle(t,n?{value:n}:e)}function f(t){m=v.getBookmark(t)}function p(){v.moveToBookmark(m)}var m,g=o.dom,v=o.selection,y={state:{},exec:{},value:{}},b=o.settings,x=o.formatter;t.extend(this,{execCommand:a,queryCommandState:s,queryCommandValue:l,addCommands:c}),c({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){o.undoManager.add()},"Cut,Copy,Paste":function(e){var n,r=o.getDoc();try{u(e)}catch(a){n=i}(n||!r.queryCommandSupported(e))&&(t.isGecko?o.windowManager.confirm(o.getLang("clipboard_msg"),function(t){t&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):o.windowManager.alert(o.getLang("clipboard_no_support")))},unlink:function(t){v.isCollapsed()&&v.select(v.getNode()),u(t),v.collapse(r)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var e=t.substring(7);n("left,center,right,full".split(","),function(t){e!=t&&x.remove("align"+t)}),h("align"+e),a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(t){var e,n;u(t),e=g.getParent(v.getNode(),"ol,ul"),e&&(n=e.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(f(),g.split(n,e),p()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){h(t)},"ForeColor,HiliteColor,FontName":function(t,e,n){h(t,n)},FontSize:function(e,n,i){var r,o;i>=1&&7>=i&&(o=t.explode(b.font_size_style_values),r=t.explode(b.font_size_classes),i=r?r[i-1]||i:o[i-1]||i),h(e,i)},RemoveFormat:function(t){x.remove(t)},mceBlockQuote:function(){h("blockquote")},FormatBlock:function(t,e,n){return h(n||"p")},mceCleanup:function(){var t=v.getBookmark();o.setContent(o.getContent({cleanup:i}),{cleanup:i}),v.moveToBookmark(t)},mceRemoveNode:function(t,e,n){var r=n||v.getNode();r!=o.getBody()&&(f(),o.dom.remove(r,i),p())},mceSelectNodeDepth:function(t,e,n){var i=0;g.getParent(v.getNode(),function(t){return 1==t.nodeType&&i++==n?(v.select(t),r):void 0},o.getBody())},mceSelectNode:function(t,e,n){v.select(n)},mceInsertContent:function(e,n,i){var r,a,s,l,c,u,d,h,f,p,m,y,b,x;if(r=o.parser,a=new t.html.Serializer({},o.schema),b='<span id="mce_marker" data-mce-type="bookmark">\ufeff</span>',u={content:i,format:"html"},v.onBeforeSetContent.dispatch(v,u),i=u.content,-1==i.indexOf("{$caret}")&&(i+="{$caret}"),i=i.replace(/\{\$caret\}/,b),v.isCollapsed()||o.getDoc().execCommand("Delete",!1,null),s=v.getNode(),u={context:s.nodeName.toLowerCase()},c=r.parse(i,u),m=c.lastChild,"mce_marker"==m.attr("id"))for(d=m,m=m.prev;m;m=m.walk(!0))if(3==m.type||!g.isBlock(m.name)){m.parent.insert(d,m,"br"===m.name);break}if(u.invalid){for(v.setContent(b),s=v.getNode(),l=o.getBody(),9==s.nodeType?s=m=l:m=s;m!==l;)s=m,m=m.parentNode;i=s==l?l.innerHTML:g.getOuterHTML(s),i=a.serialize(r.parse(i.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return a.serialize(c)}))),s==l?g.setHTML(l,i):g.setOuterHTML(s,i)}else i=a.serialize(c),m=s.firstChild,y=s.lastChild,!m||m===y&&"BR"===m.nodeName?g.setHTML(s,i):v.setContent(i);d=g.get("mce_marker"),h=g.getRect(d),f=g.getViewPort(o.getWin()),(h.y+h.h>f.y+f.h||h.y<f.y||h.x>f.x+f.w||h.x<f.x)&&(x=t.isIE?o.getDoc().documentElement:o.getBody(),x.scrollLeft=h.x,x.scrollTop=h.y-f.h+25),p=g.createRng(),m=d.previousSibling,m&&3==m.nodeType?p.setStart(m,m.nodeValue.length):(p.setStartBefore(d),p.setEndBefore(d)),g.remove(d),v.setRng(p),v.onSetContent.dispatch(v,u),o.addVisual()},mceInsertRawHTML:function(t,e,n){v.setContent("tiny_mce_marker"),o.setContent(o.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(t,e,n){h(n)},mceSetContent:function(t,e,n){o.setContent(n)},"Indent,Outdent":function(t){var e,i,r;e=b.indentation,i=/[a-z%]+$/i.exec(e),e=parseInt(e),s("InsertUnorderedList")||s("InsertOrderedList")?u(t):(b.forced_root_block||g.getParent(v.getNode(),g.isBlock)||x.apply("div"),n(v.getSelectedBlocks(),function(n){"outdent"==t?(r=Math.max(0,parseInt(n.style.paddingLeft||0)-e),g.setStyle(n,"paddingLeft",r?r+i:"")):g.setStyle(n,"paddingLeft",parseInt(n.style.paddingLeft||0)+e+i)}))},mceRepaint:function(){if(t.isGecko)try{f(i),v.getSel()&&v.getSel().selectAllChildren(o.getBody()),v.collapse(i),p()}catch(e){}},mceToggleFormat:function(t,e,n){x.toggle(n)},InsertHorizontalRule:function(){o.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){o.hasVisual=!o.hasVisual,o.addVisual()},mceReplaceContent:function(t,e,n){o.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,v.getContent({format:"text"})))},mceInsertLink:function(t,e,n){var i;"string"==typeof n&&(n={href:n}),i=g.getParent(v.getNode(),"a"),n.href=n.href.replace(" ","%20"),i&&n.href||x.remove("link"),n.href&&x.apply("link",n,i)
},selectAll:function(){var t=g.getRoot(),e=g.createRng();v.getRng().setStart?(e.setStart(t,0),e.setEnd(t,t.childNodes.length),v.setRng(e)):u("SelectAll")}}),c({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var n="align"+e.substring(7),r=v.isCollapsed()?[g.getParent(v.getNode(),g.isBlock)]:v.getSelectedBlocks(),o=t.map(r,function(t){return!!x.matchNode(t,n)});return-1!==t.inArray(o,i)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(t){return d(t)},mceBlockQuote:function(){return d("blockquote")},Outdent:function(){var t;if(b.inline_styles){if((t=g.getParent(v.getStart(),g.isBlock))&&parseInt(t.style.paddingLeft)>0)return i;if((t=g.getParent(v.getEnd(),g.isBlock))&&parseInt(t.style.paddingLeft)>0)return i}return s("InsertUnorderedList")||s("InsertOrderedList")||!b.inline_styles&&!!g.getParent(v.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(t){var e=g.getParent(v.getNode(),"ul,ol");return e&&("insertunorderedlist"===t&&"UL"===e.tagName||"insertorderedlist"===t&&"OL"===e.tagName)}},"state"),c({"FontSize,FontName":function(t){var e,n=0;return(e=g.getParent(v.getNode(),"span"))&&(n="fontsize"==t?e.style.fontSize:e.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),c({Undo:function(){o.undoManager.undo()},Redo:function(){o.undoManager.redo()}})}}(tinymce),function(t){var e=t.util.Dispatcher;t.UndoManager=function(n){function i(){return t.trim(n.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function r(){o.typing=!1,o.add()}var o,a,s,l,c,u=0,d=[];return onBeforeAdd=new e(o),s=new e(o),l=new e(o),c=new e(o),s.add(function(t,e){return t.hasUndo()?n.onChange.dispatch(n,e,t):void 0}),l.add(function(t,e){return n.onUndo.dispatch(n,e,t)}),c.add(function(t,e){return n.onRedo.dispatch(n,e,t)}),n.onInit.add(function(){o.add()}),n.onBeforeExecCommand.add(function(t,e,n,i,r){"Undo"==e||"Redo"==e||"mceRepaint"==e||r&&r.skip_undo||o.beforeChange()}),n.onExecCommand.add(function(t,e,n,i,r){"Undo"==e||"Redo"==e||"mceRepaint"==e||r&&r.skip_undo||o.add()}),n.onSaveContent.add(r),n.dom.bind(n.dom.getRoot(),"dragend",r),n.dom.bind(n.getBody(),"focusout",function(){!n.removed&&o.typing&&r()}),n.onKeyUp.add(function(t,e){var n=e.keyCode;(n>=33&&36>=n||n>=37&&40>=n||45==n||13==n||e.ctrlKey)&&r()}),n.onKeyDown.add(function(t,e){var n=e.keyCode;return n>=33&&36>=n||n>=37&&40>=n||45==n?void(o.typing&&r()):void((16>n||n>20)&&224!=n&&91!=n&&!o.typing&&(o.beforeChange(),o.typing=!0,o.add()))}),n.onMouseDown.add(function(){o.typing&&r()}),n.addShortcut("ctrl+z","undo_desc","Undo"),n.addShortcut("ctrl+y","redo_desc","Redo"),o={data:d,typing:!1,onBeforeAdd:onBeforeAdd,onAdd:s,onUndo:l,onRedo:c,beforeChange:function(){a=n.selection.getBookmark(2,!0)},add:function(t){var e,r,s=n.settings;if(t=t||{},t.content=i(),o.onBeforeAdd.dispatch(o,t),r=d[u],r&&r.content==t.content)return null;if(d[u]&&(d[u].beforeBookmark=a),s.custom_undo_redo_levels&&d.length>s.custom_undo_redo_levels){for(e=0;e<d.length-1;e++)d[e]=d[e+1];d.length--,u=d.length}return t.bookmark=n.selection.getBookmark(2,!0),u<d.length-1&&(d.length=u+1),d.push(t),u=d.length-1,o.onAdd.dispatch(o,t),n.isNotDirty=0,t},undo:function(){var t;return o.typing&&(o.add(),o.typing=!1),u>0&&(t=d[--u],n.setContent(t.content,{format:"raw"}),n.selection.moveToBookmark(t.beforeBookmark),o.onUndo.dispatch(o,t)),t},redo:function(){var t;return u<d.length-1&&(t=d[++u],n.setContent(t.content,{format:"raw"}),n.selection.moveToBookmark(t.bookmark),o.onRedo.dispatch(o,t)),t},clear:function(){d=[],u=0,o.typing=!1},hasUndo:function(){return u>0||this.typing},hasRedo:function(){return u<d.length-1&&!this.typing}}}}(tinymce),tinymce.ForceBlocks=function(t){function e(){var e,a,s,l,c,u,d,h,f,p=r.getStart(),m=t.getBody(),g=-16777215;if(p&&1===p.nodeType&&n.forced_root_block){for(;p&&p!=m;){if(o[p.nodeName])return;p=p.parentNode}for(e=r.getRng(),e.setStart?(a=e.startContainer,s=e.startOffset,l=e.endContainer,c=e.endOffset):(e.item&&(p=e.item(0),e=t.getDoc().body.createTextRange(),e.moveToElementText(p)),f=e.parentElement().ownerDocument===t.getDoc(),tmpRng=e.duplicate(),tmpRng.collapse(!0),s=-1*tmpRng.move("character",g),tmpRng.collapsed||(tmpRng=e.duplicate(),tmpRng.collapse(!1),c=-1*tmpRng.move("character",g)-s)),p=m.firstChild;p;)if(3===p.nodeType||1==p.nodeType&&!o[p.nodeName]){if(3===p.nodeType&&0==p.nodeValue.length){d=p,p=p.nextSibling,i.remove(d);continue}u||(u=i.create(n.forced_root_block),p.parentNode.insertBefore(u,p),h=!0),d=p,p=p.nextSibling,u.appendChild(d)}else u=null,p=p.nextSibling;if(h){if(e.setStart)e.setStart(a,s),e.setEnd(l,c),r.setRng(e);else if(f)try{e=t.getDoc().body.createTextRange(),e.moveToElementText(m),e.collapse(!0),e.moveStart("character",s),c>0&&e.moveEnd("character",c),e.select()}catch(v){}t.nodeChanged()}}}var n=t.settings,i=t.dom,r=t.selection,o=t.schema.getBlockElements();n.forced_root_block&&(t.onKeyUp.add(e),t.onNodeChange.add(e))},function(t){var e=(t.DOM,t.dom.Event),n=t.each,i=t.extend;t.create("tinymce.ControlManager",{ControlManager:function(e,i){var r=this;i=i||{},r.editor=e,r.controls={},r.onAdd=new t.util.Dispatcher(r),r.onPostRender=new t.util.Dispatcher(r),r.prefix=i.prefix||e.id+"_",r._cls={},r.onPostRender.add(function(){n(r.controls,function(t){t.postRender()})})},get:function(t){return this.controls[this.prefix+t]||this.controls[t]},setActive:function(t,e){var n=null;return(n=this.get(t))&&n.setActive(e),n},setDisabled:function(t,e){var n=null;return(n=this.get(t))&&n.setDisabled(e),n},add:function(t){var e=this;return t&&(e.controls[t.id]=t,e.onAdd.dispatch(t,e)),t},createControl:function(t){var e,i,r,o,a=this,s=a.editor;for(a.controlFactories||(a.controlFactories=[],n(s.plugins,function(t){t.createControl&&a.controlFactories.push(t)})),o=a.controlFactories,i=0,r=o.length;r>i;i++)if(e=o[i].createControl(t,a))return a.add(e);return"|"===t||"separator"===t?a.createSeparator():s.buttons&&(e=s.buttons[t])?a.createButton(t,e):a.add(e)},createDropMenu:function(e,n,r){var o,a,s,l,c=this,u=c.editor;return n=i({"class":"mceDropDown",constrain:u.settings.constrain_menus},n),n["class"]=n["class"]+" "+u.getParam("skin")+"Skin",(s=u.getParam("skin_variant"))&&(n["class"]+=" "+u.getParam("skin")+"Skin"+s.substring(0,1).toUpperCase()+s.substring(1)),n["class"]+="rtl"==u.settings.directionality?" mceRtl":"",e=c.prefix+e,l=r||c._cls.dropmenu||t.ui.DropMenu,o=c.controls[e]=new l(e,n),o.onAddItem.add(function(t,e){var n=e.settings;n.title=u.getLang(n.title,n.title),n.onclick||(n.onclick=function(){n.cmd&&u.execCommand(n.cmd,n.ui||!1,n.value)})}),u.onRemove.add(function(){o.destroy()}),t.isIE&&(o.onShowMenu.add(function(){u.focus(),a=u.selection.getBookmark(1)}),o.onHideMenu.add(function(){a&&(u.selection.moveToBookmark(a),a=0)})),c.add(o)},createListBox:function(n,r,o){function a(e){return e.settings.use_accessible_selects&&!t.isGecko}var s,l,c=this,u=c.editor;return c.get(n)?null:(r.title=u.translate(r.title),r.scope=r.scope||u,r.onselect||(r.onselect=function(t){u.execCommand(r.cmd,r.ui||!1,t||r.value)}),r=i({title:r.title,"class":"mce_"+n,scope:r.scope,control_manager:c},r),n=c.prefix+n,u.settings.use_native_selects||a(u)?s=new t.ui.NativeListBox(n,r):(l=o||c._cls.listbox||t.ui.ListBox,s=new l(n,r,u)),c.controls[n]=s,t.isWebKit&&s.onPostRender.add(function(t,n){e.add(n,"mousedown",function(){u.bookmark=u.selection.getBookmark(1)}),e.add(n,"focus",function(){u.selection.moveToBookmark(u.bookmark),u.bookmark=null})}),s.hideMenu&&u.onMouseDown.add(s.hideMenu,s),c.add(s))},createButton:function(e,n,r){var o,a,s=this,l=s.editor;return s.get(e)?null:(n.title=l.translate(n.title),n.label=l.translate(n.label),n.scope=n.scope||l,n.onclick||n.menu_button||(n.onclick=function(){l.execCommand(n.cmd,n.ui||!1,n.value)}),n=i({title:n.title,"class":"mce_"+e,unavailable_prefix:l.getLang("unavailable",""),scope:n.scope,control_manager:s},n),e=s.prefix+e,n.menu_button?(a=r||s._cls.menubutton||t.ui.MenuButton,o=new a(e,n,l),l.onMouseDown.add(o.hideMenu,o)):(a=s._cls.button||t.ui.Button,o=new a(e,n,l)),s.add(o))},createMenuButton:function(t,e,n){return e=e||{},e.menu_button=1,this.createButton(t,e,n)},createSplitButton:function(e,n,r){var o,a,s=this,l=s.editor;return s.get(e)?null:(n.title=l.translate(n.title),n.scope=n.scope||l,n.onclick||(n.onclick=function(t){l.execCommand(n.cmd,n.ui||!1,t||n.value)}),n.onselect||(n.onselect=function(t){l.execCommand(n.cmd,n.ui||!1,t||n.value)}),n=i({title:n.title,"class":"mce_"+e,scope:n.scope,control_manager:s},n),e=s.prefix+e,a=r||s._cls.splitbutton||t.ui.SplitButton,o=s.add(new a(e,n,l)),l.onMouseDown.add(o.hideMenu,o),o)},createColorSplitButton:function(e,n,r){var o,a,s,l=this,c=l.editor;return l.get(e)?null:(n.title=c.translate(n.title),n.scope=n.scope||c,n.onclick||(n.onclick=function(e){t.isIE&&(s=c.selection.getBookmark(1)),c.execCommand(n.cmd,n.ui||!1,e||n.value)}),n.onselect||(n.onselect=function(t){c.execCommand(n.cmd,n.ui||!1,t||n.value)}),n=i({title:n.title,"class":"mce_"+e,menu_class:c.getParam("skin")+"Skin",scope:n.scope,more_colors_title:c.getLang("more_colors")},n),e=l.prefix+e,a=r||l._cls.colorsplitbutton||t.ui.ColorSplitButton,o=new a(e,n,c),c.onMouseDown.add(o.hideMenu,o),c.onRemove.add(function(){o.destroy()}),t.isIE&&(o.onShowMenu.add(function(){c.focus(),s=c.selection.getBookmark(1)}),o.onHideMenu.add(function(){s&&(c.selection.moveToBookmark(s),s=0)})),l.add(o))},createToolbar:function(e,n,i){var r,o,a=this;return e=a.prefix+e,o=i||a._cls.toolbar||t.ui.Toolbar,r=new o(e,n,a.editor),a.get(e)?null:a.add(r)},createToolbarGroup:function(e,n,i){var r,o,a=this;return e=a.prefix+e,o=i||this._cls.toolbarGroup||t.ui.ToolbarGroup,r=new o(e,n,a.editor),a.get(e)?null:a.add(r)},createSeparator:function(e){var n=e||this._cls.separator||t.ui.Separator;return new n},setControlType:function(t,e){return this._cls[t.toLowerCase()]=e},destroy:function(){n(this.controls,function(t){t.destroy()}),this.controls=null}})}(tinymce),function(t){var e=t.util.Dispatcher,n=t.each,i=t.isIE,r=t.isOpera;t.create("tinymce.WindowManager",{WindowManager:function(t){var n=this;n.editor=t,n.onOpen=new e(n),n.onClose=new e(n),n.params={},n.features={}},open:function(e,o){var a,s,l,c,u=this,d="",h="modal"==u.editor.settings.dialog_type,f=t.DOM.getViewPort();e=e||{},o=o||{},s=r?f.w:screen.width,l=r?f.h:screen.height,e.name=e.name||"mc_"+(new Date).getTime(),e.width=parseInt(e.width||320),e.height=parseInt(e.height||240),e.resizable=!0,e.left=e.left||parseInt(s/2)-e.width/2,e.top=e.top||parseInt(l/2)-e.height/2,o.inline=!1,o.mce_width=e.width,o.mce_height=e.height,o.mce_auto_focus=e.auto_focus,h&&i&&(e.center=!0,e.help=!1,e.dialogWidth=e.width+"px",e.dialogHeight=e.height+"px",e.scroll=e.scrollbars||!1),n(e,function(e,n){t.is(e,"boolean")&&(e=e?"yes":"no"),/^(name|url)$/.test(n)||(d+=i&&h?(d?";":"")+n+":"+e:(d?",":"")+n+"="+e)}),u.features=e,u.params=o,u.onOpen.dispatch(u,e,o),c=e.url||e.file,c=t._addVer(c);try{i&&h?(a=1,window.showModalDialog(c,window,d)):a=window.open(c,e.name,d)}catch(p){}a||alert(u.editor.getLang("popup_blocked"))},close:function(t){t.close(),this.onClose.dispatch(this)},createInstance:function(e,n,i,r,o,a){var s=t.resolve(e);return new s(n,i,r,o,a)},confirm:function(t,e,n,i){i=i||window,e.call(n||this,i.confirm(this._decode(this.editor.getLang(t,t))))},alert:function(t,e,n,i){var r=this;i=i||window,i.alert(r._decode(r.editor.getLang(t,t))),e&&e.call(n||r)},resizeBy:function(t,e,n){n.resizeBy(t,e)},_decode:function(e){return t.DOM.decode(e).replace(/\\n/g,"\n")}})}(tinymce),function(t){t.Formatter=function(e){function n(t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]}function i(t,e){return B.getParents(t,e,B.getRoot())}function r(t){return 1===t.nodeType&&"_mce_caret"===t.id}function o(){l({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,e,n){R(n,function(e,n){B.setAttrib(t,n,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),R("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(t){l(t,{block:t,remove:"all"})}),l(e.settings.formats)}function a(){e.addShortcut("ctrl+b","bold_desc","Bold"),e.addShortcut("ctrl+i","italic_desc","Italic"),e.addShortcut("ctrl+u","underline_desc","Underline");for(var t=1;6>=t;t++)e.addShortcut("ctrl+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),e.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),e.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function s(t){return t?I[t]:I}function l(t,e){t&&("string"!=typeof t?R(t,function(t,e){l(e,t)}):(e=e.length?e:[e],R(e,function(t){t.deep===P&&(t.deep=!t.selector),t.split===P&&(t.split=!t.selector||t.inline),t.remove===P&&t.selector&&!t.inline&&(t.remove="none"),t.selector&&t.inline&&(t.mixed=!0,t.block_expand=!0),"string"==typeof t.classes&&(t.classes=t.classes.split(/\s+/))}),I[t]=e))}function c(i,o,a){function l(t,e){e=e||b,t&&(e.onformat&&e.onformat(t,e,o,a),R(e.styles,function(e,n){B.setStyle(t,n,x(e,o))}),R(e.attributes,function(e,n){B.setAttrib(t,n,x(e,o))}),R(e.classes,function(e){e=x(e,o),B.hasClass(t,e)||B.addClass(t,e)}))}function u(){function t(t,e){var n=new O(e);for(a=n.current();a;a=n.prev())if(a.childNodes.length>1||a==t||"BR"==a.tagName)return a}var n=e.selection.getRng(),i=n.startContainer,r=n.endContainer;if(i!=r&&0===n.endOffset){var o=t(i,r),s=3==o.nodeType?o.length:o.childNodes.length;n.setEnd(o,s)}return n}function d(e,n,i,r,o){var a,s,l=[],c=-1,u=-1,d=-1;return R(e.childNodes,function(t,e){return"UL"===t.nodeName||"OL"===t.nodeName?(c=e,a=t,!1):void 0}),R(e.childNodes,function(t,e){"SPAN"===t.nodeName&&"bookmark"==B.getAttrib(t,"data-mce-type")&&(t.id==n.id+"_start"?u=e:t.id==n.id+"_end"&&(d=e))}),0>=c||c>u&&d>c?(R(t.grep(e.childNodes),o),0):(s=B.clone(i,V),R(t.grep(e.childNodes),function(t,e){(c>u&&c>e||u>c&&e>c)&&(l.push(t),t.parentNode.removeChild(t))}),c>u?e.insertBefore(s,a):u>c&&e.insertBefore(s,a.nextSibling),r.push(s),R(l,function(t){s.appendChild(t)}),s)}function f(e,a,s){var c,u,f=[],p=!0;c=b.inline||b.block,u=B.create(c),l(u),H.walk(e,function(e){function m(e){var x,w,C,T,S;return S=p,x=e.nodeName.toLowerCase(),w=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&Y(e)&&(S=p,p="true"===Y(e),T=!0),y(x,"br")?(v=0,void(b.block&&B.remove(e))):b.wrapper&&h(e,i,o)?void(v=0):p&&!T&&b.block&&!b.wrapper&&n(x)?(e=B.rename(e,c),l(e),f.push(e),void(v=0)):b.selector&&(R(g,function(t){"collapsed"in t&&t.collapsed!==_||B.is(e,t.selector)&&!r(e)&&(l(e,t),C=!0)}),!b.inline||C)?void(v=0):void(!p||T||!$(c,x)||!$(w,c)||!s&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||r(e)||b.inline&&j(e)?"li"==x&&a?v=d(e,a,u,f,m):(v=0,R(t.grep(e.childNodes),m),T&&(p=S),v=0):(v||(v=B.clone(u,V),e.parentNode.insertBefore(v,e),f.push(v)),v.appendChild(e)))}var v;R(e,m)}),b.wrap_links===!1&&R(f,function(e){function n(e){var i,r,o;if("A"===e.nodeName){for(r=B.clone(u,V),f.push(r),o=t.grep(e.childNodes),i=0;i<o.length;i++)r.appendChild(o[i]);e.appendChild(r)}R(t.grep(e.childNodes),n)}n(e)}),R(f,function(t){function e(t){var e=0;return R(t.childNodes,function(t){w(t)||M(t)||e++}),e}function n(t){var e,n;return R(t.childNodes,function(t){return 1!=t.nodeType||M(t)||r(t)?void 0:(e=t,V)}),e&&v(e,b)&&(n=B.clone(e,V),l(n),B.replace(n,t,X),B.remove(e,1)),n||t}var a;if(a=e(t),(f.length>1||!j(t))&&0===a)return void B.remove(t,1);if(b.inline||b.wrapper){if(b.exact||1!==a||(t=n(t)),R(g,function(e){R(B.select(e.inline,t),function(t){var n;if(e.wrap_links===!1){n=t.parentNode;do if("A"===n.nodeName)return;while(n=n.parentNode)}T(e,o,t,e.exact?t:null)})}),h(t.parentNode,i,o))return B.remove(t,1),t=0,X;b.merge_with_parents&&B.getParent(t.parentNode,function(e){return h(e,i,o)?(B.remove(t,1),t=0,X):void 0}),t&&b.merge_siblings!==!1&&(t=E(k(t),t),t=E(t,k(t,X)))}})}var p,m,g=s(i),b=g[0],_=F.isCollapsed();if(b)if(a)a.nodeType?(m=B.createRng(),m.setStartBefore(a),m.setEndAfter(a),f(C(m,g),null,!0)):f(a,null,!0);else if(_&&b.inline&&!B.select("td.mceSelected,th.mceSelected").length)D("apply",i,o);else{var S=e.selection.getNode();z||!g[0].defaultBlock||B.getParent(S,B.isBlock)||c(g[0].defaultBlock),e.selection.setRng(u()),p=F.getBookmark(),f(C(F.getRng(X),g),p),b.styles&&(b.styles.color||b.styles.textDecoration)&&(t.walk(S,K,"childNodes"),K(S)),F.moveToBookmark(p),N(F.getRng(X)),e.nodeChanged()}}function u(n,r,o){function a(e){var n,i,o,s,l;if(3!==e.nodeType){if(1===e.nodeType&&Y(e)&&(s=b,b="true"===Y(e),l=!0),n=t.grep(e.childNodes),b&&!l)for(i=0,o=v.length;o>i&&!T(v[i],r,e,e);i++);if(y.deep&&n.length){for(i=0,o=n.length;o>i;i++)a(n[i]);l&&(b=s)}}}function l(t){var e;return R(i(t.parentNode).reverse(),function(t){var i;e||"_start"==t.id||"_end"==t.id||(i=h(t,n,r),i&&i.split!==!1&&(e=t))}),e}function c(t,e,n,i){var o,a,s,l,c,u;if(t){for(u=t.parentNode,o=e.parentNode;o&&o!=u;o=o.parentNode){for(a=B.clone(o,V),c=0;c<v.length;c++)if(T(v[c],r,a,a)){a=0;break}a&&(s&&a.appendChild(s),l||(l=a),s=a)}!i||y.mixed&&j(t)||(e=B.split(t,e)),s&&(n.parentNode.insertBefore(s,n),l.appendChild(n))}return e}function u(t){return c(l(t),t,t,!0)}function d(t){var e=B.get(t?"_start":"_end"),n=e[t?"firstChild":"lastChild"];return M(n)&&(n=n[t?"firstChild":"lastChild"]),B.remove(e,!0),n}function p(t){var n,i;t=C(t,v,X),y.split&&(n=A(t,X),i=A(t),n!=i?(/^(TR|TD)$/.test(n.nodeName)&&n.firstChild&&(n=("TD"==n.nodeName?n.firstChild:n.firstChild.firstChild)||n),n=_(n,"span",{id:"_start","data-mce-type":"bookmark"}),i=_(i,"span",{id:"_end","data-mce-type":"bookmark"}),u(n),u(i),n=d(X),i=d()):n=i=u(n),t.startContainer=n.parentNode,t.startOffset=q(n),t.endContainer=i.parentNode,t.endOffset=q(i)+1),H.walk(t,function(t){R(t,function(t){a(t),1===t.nodeType&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===G(t.parentNode)&&T({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})}var m,g,v=s(n),y=v[0],b=!0;return o?void(o.nodeType?(g=B.createRng(),g.setStartBefore(o),g.setEndAfter(o),p(g)):p(o)):void(F.isCollapsed()&&y.inline&&!B.select("td.mceSelected,th.mceSelected").length?D("remove",n,r):(m=F.getBookmark(),p(F.getRng(X)),F.moveToBookmark(m),y.inline&&f(n,r,F.getStart())&&N(F.getRng(!0)),e.nodeChanged()))}function d(t,e,n){var i=s(t);!f(t,e,n)||"toggle"in i[0]&&!i[0].toggle?c(t,e,n):u(t,e,n)}function h(t,e,n,i){function r(t,e,r){var o,a,s,l=e[r];if(e.onmatch)return e.onmatch(t,e,r);if(l)if(l.length===P){for(o in l)if(l.hasOwnProperty(o)){if(a="attributes"===r?B.getAttrib(t,o):b(t,o),i&&!a&&!e.exact)return;if((!i||e.exact)&&!y(a,x(l[o],n)))return}}else for(s=0;s<l.length;s++)if("attributes"===r?B.getAttrib(t,l[s]):b(t,l[s]))return e;return e}var o,a,l,c=s(e);if(c&&t)for(a=0;a<c.length;a++)if(o=c[a],v(t,o)&&r(t,o,"attributes")&&r(t,o,"styles")){if(l=o.classes)for(a=0;a<l.length;a++)if(!B.hasClass(t,l[a]))return;return o}}function f(t,e,n){function i(n){return n=B.getParent(n,function(n){return!!h(n,t,e,!0)}),h(n,t,e)}var r;return n?i(n):(n=F.getNode(),i(n)?X:(r=F.getStart(),r!=n&&i(r)?X:V))}function p(t,e){var n,i=[],r={};return n=F.getStart(),B.getParent(n,function(n){var o,a;for(o=0;o<t.length;o++)a=t[o],!r[a]&&h(n,a,e)&&(r[a]=!0,i.push(a))},B.getRoot()),i}function m(t){var e,n,r,o,a,l=s(t);if(l)for(e=F.getStart(),n=i(e),o=l.length-1;o>=0;o--){if(a=l[o].selector,!a)return X;for(r=n.length-1;r>=0;r--)if(B.is(n[r],a))return X}return V}function g(t,n,r){var o;return L||(L={},o={},e.onNodeChange.addToTop(function(t,e,n){var r=i(n),a={};R(L,function(t,e){R(r,function(n){return h(n,e,{},t.similar)?(o[e]||(R(t,function(t){t(!0,{node:n,format:e,parents:r})}),o[e]=t),a[e]=t,!1):void 0})}),R(o,function(t,e){a[e]||(delete o[e],R(t,function(t){t(!1,{node:n,format:e,parents:r})}))})})),R(t.split(","),function(t){L[t]||(L[t]=[],L[t].similar=r),L[t].push(n)}),this}function v(t,e){return y(t,e.inline)?X:y(t,e.block)?X:e.selector?B.is(t,e.selector):void 0}function y(t,e){return t=t||"",e=e||"",t=""+(t.nodeName||t),e=""+(e.nodeName||e),t.toLowerCase()==e.toLowerCase()}function b(t,e){var n=B.getStyle(t,e);return("color"==e||"backgroundColor"==e)&&(n=B.toHex(n)),"fontWeight"==e&&700==n&&(n="bold"),""+n}function x(t,e){return"string"!=typeof t?t=t(e):e&&(t=t.replace(/%(\w+)/g,function(t,n){return e[n]||t})),t}function w(t){return t&&3===t.nodeType&&/^([\t \r\n]+|)$/.test(t.nodeValue)}function _(t,e,n){var i=B.create(e,n);return t.parentNode.insertBefore(i,t),i.appendChild(t),i}function C(t,r,o){function a(t){function e(t){return"BR"==t.nodeName&&t.getAttribute("data-mce-bogus")&&!t.nextSibling}var n,i,o,a,s;if(n=i=t?m:v,a=t?"previousSibling":"nextSibling",s=B.getRoot(),3==n.nodeType&&!w(n)&&(t?g>0:b<n.nodeValue.length))return n;for(;;){if(!r[0].block_expand&&j(i))return i;for(o=i[a];o;o=o[a])if(!M(o)&&!w(o)&&!e(o))return i;if(i.parentNode==s){n=i;break}i=i.parentNode}return n}function s(t,e){for(e===P&&(e=3===t.nodeType?t.length:t.childNodes.length);t&&t.hasChildNodes();)t=t.childNodes[e],t&&(e=3===t.nodeType?t.length:t.childNodes.length);return{node:t,offset:e}}function l(t){for(var e=t;e;){if(1===e.nodeType&&Y(e))return"false"===Y(e)?e:t;e=e.parentNode}return t}function c(t,n,i){function r(t,e){var n,r,a=t.nodeValue;return"undefined"==typeof e&&(e=i?a.length:0),i?(n=a.lastIndexOf(" ",e),r=a.lastIndexOf("\xa0",e),n=n>r?n:r,-1===n||o||n++):(n=a.indexOf(" ",e),r=a.indexOf("\xa0",e),n=-1!==n&&(-1===r||r>n)?n:r),n}var a,s,l,c;if(3===t.nodeType){if(l=r(t,n),-1!==l)return{container:t,offset:l};c=t}for(a=new O(t,B.getParent(t,j)||e.getBody());s=a[i?"prev":"next"]();)if(3===s.nodeType){if(c=s,l=r(s),-1!==l)return{container:s,offset:l}}else if(j(s))break;return c?(n=i?0:c.length,{container:c,offset:n}):void 0}function u(e,n){var o,a,s,l;for(3==e.nodeType&&0===e.nodeValue.length&&e[n]&&(e=e[n]),o=i(e),a=0;a<o.length;a++)for(s=0;s<r.length;s++)if(l=r[s],!("collapsed"in l&&l.collapsed!==t.collapsed)&&B.is(o[a],l.selector))return o[a];return e}function d(t,e){var o;if(r[0].wrapper||(o=B.getParent(t,r[0].block)),o||(o=B.getParent(3==t.nodeType?t.parentNode:t,n)),o&&r[0].wrapper&&(o=i(o,"ul,ol").reverse()[0]||o),!o)for(o=t;o[e]&&!j(o[e])&&(o=o[e],!y(o,"br")););return o||t}var h,f,p,m=t.startContainer,g=t.startOffset,v=t.endContainer,b=t.endOffset;if(1==m.nodeType&&m.hasChildNodes()&&(h=m.childNodes.length-1,m=m.childNodes[g>h?h:g],3==m.nodeType&&(g=0)),1==v.nodeType&&v.hasChildNodes()&&(h=v.childNodes.length-1,v=v.childNodes[b>h?h:b-1],3==v.nodeType&&(b=v.nodeValue.length)),m=l(m),v=l(v),(M(m.parentNode)||M(m))&&(m=M(m)?m:m.parentNode,m=m.nextSibling||m,3==m.nodeType&&(g=0)),(M(v.parentNode)||M(v))&&(v=M(v)?v:v.parentNode,v=v.previousSibling||v,3==v.nodeType&&(b=v.length)),r[0].inline&&(t.collapsed&&(p=c(m,g,!0),p&&(m=p.container,g=p.offset),p=c(v,b),p&&(v=p.container,b=p.offset)),f=s(v,b),f.node)){for(;f.node&&0===f.offset&&f.node.previousSibling;)f=s(f.node.previousSibling);f.node&&f.offset>0&&3===f.node.nodeType&&" "===f.node.nodeValue.charAt(f.offset-1)&&f.offset>1&&(v=f.node,v.splitText(f.offset-1))}return(r[0].inline||r[0].block_expand)&&(r[0].inline&&3==m.nodeType&&0!==g||(m=a(!0)),r[0].inline&&3==v.nodeType&&b!==v.nodeValue.length||(v=a())),r[0].selector&&r[0].expand!==V&&!r[0].inline&&(m=u(m,"previousSibling"),v=u(v,"nextSibling")),(r[0].block||r[0].selector)&&(m=d(m,"previousSibling"),v=d(v,"nextSibling"),r[0].block&&(j(m)||(m=a(!0)),j(v)||(v=a()))),1==m.nodeType&&(g=q(m),m=m.parentNode),1==v.nodeType&&(b=q(v)+1,v=v.parentNode),{startContainer:m,startOffset:g,endContainer:v,endOffset:b}}function T(t,e,n,i){var r,o,a;if(!v(n,t))return V;if("all"!=t.remove)for(R(t.styles,function(t,r){t=x(t,e),"number"==typeof r&&(r=t,i=0),(!i||y(b(i,r),t))&&B.setStyle(n,r,""),a=1}),a&&""==B.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),R(t.attributes,function(t,r){var o;if(t=x(t,e),"number"==typeof r&&(r=t,i=0),!i||y(B.getAttrib(i,r),t)){if("class"==r&&(t=B.getAttrib(n,r),t&&(o="",R(t.split(/\s+/),function(t){/mce\w+/.test(t)&&(o+=(o?" ":"")+t)}),o)))return void B.setAttrib(n,r,o);"class"==r&&n.removeAttribute("className"),U.test(r)&&n.removeAttribute("data-mce-"+r),n.removeAttribute(r)}}),R(t.classes,function(t){t=x(t,e),(!i||B.hasClass(i,t))&&B.removeClass(n,t)}),o=B.getAttribs(n),r=0;r<o.length;r++)if(0!==o[r].nodeName.indexOf("_"))return V;return"none"!=t.remove?(S(n,t),X):void 0}function S(e,n){function i(t,e,n){return t=k(t,e,n),!t||"BR"==t.nodeName||j(t)}var r,o=e.parentNode;n.block&&(z?o==B.getRoot()&&(n.list_block&&y(e,n.list_block)||R(t.grep(e.childNodes),function(t){$(z,t.nodeName.toLowerCase())?r?r.appendChild(t):r=_(t,z):r=0})):j(e)&&!j(o)&&(i(e,V)||i(e.firstChild,X,1)||e.insertBefore(B.create("br"),e.firstChild),i(e,X)||i(e.lastChild,V,1)||e.appendChild(B.create("br")))),n.selector&&n.inline&&!y(n.inline,e)||B.remove(e,1)}function k(t,e,n){if(t)for(e=e?"nextSibling":"previousSibling",t=n?t:t[e];t;t=t[e])if(1==t.nodeType||!w(t))return t}function M(t){return t&&1==t.nodeType&&"bookmark"==t.getAttribute("data-mce-type")}function E(e,n){function i(t,e){function n(t){var e={};return R(B.getAttribs(t),function(n){var i=n.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&(e[i]=B.getAttrib(t,i))}),e}function i(t,e){var n,i;for(i in t)if(t.hasOwnProperty(i)){if(n=e[i],n===P)return V;if(t[i]!=n)return V;delete e[i]}for(i in e)if(e.hasOwnProperty(i))return V;return X}return t.nodeName!=e.nodeName?V:i(n(t),n(e))&&i(B.parseStyle(B.getAttrib(t,"style")),B.parseStyle(B.getAttrib(e,"style")))?X:V}function r(t,e){for(o=t;o;o=o[e]){if(3==o.nodeType&&0!==o.nodeValue.length)return t;if(1==o.nodeType&&!M(o))return o}return t}var o,a;if(e&&n&&(e=r(e,"previousSibling"),n=r(n,"nextSibling"),i(e,n))){for(o=e.nextSibling;o&&o!=n;)a=o,o=o.nextSibling,e.appendChild(a);return B.remove(n),R(t.grep(n.childNodes),function(t){e.appendChild(t)}),e}return n}function A(t,n){var i,r,o;return i=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"],1==i.nodeType&&(o=i.childNodes.length-1,!n&&r&&r--,i=i.childNodes[r>o?o:r]),3===i.nodeType&&n&&r>=i.nodeValue.length&&(i=new O(i,e.getBody()).next()||i),3!==i.nodeType||n||0!==r||(i=new O(i,e.getBody()).prev()||i),i}function D(i,r,o){function a(t){var n=B.create("span",{id:y,"data-mce-bogus":!0,style:b?"color:red":""});return t&&n.appendChild(e.getDoc().createTextNode(W)),n}function l(t,e){for(;t;){if(3===t.nodeType&&t.nodeValue!==W||t.childNodes.length>1)return!1;e&&1===t.nodeType&&e.push(t),t=t.firstChild}return!0}function d(t){for(;t;){if(t.id===y)return t;t=t.parentNode}}function f(t){var e;if(t)for(e=new O(t,t),t=e.current();t;t=e.next())if(3===t.nodeType)return t}function p(t,e){var n,i;if(t)i=F.getRng(!0),l(t)?(e!==!1&&(i.setStartBefore(t),i.setEndBefore(t)),B.remove(t)):(n=f(t),n.nodeValue.charAt(0)===W&&(n=n.deleteData(0,1)),B.remove(t,1)),F.setRng(i);else if(t=d(F.getStart()),!t)for(;t=B.get(y);)p(t,!1)}function m(){var t,e,n,i,l,u,h;t=F.getRng(!0),i=t.startOffset,u=t.startContainer,h=u.nodeValue,e=d(F.getStart()),e&&(n=f(e)),h&&i>0&&i<h.length&&/\w/.test(h.charAt(i))&&/\w/.test(h.charAt(i-1))?(l=F.getBookmark(),t.collapse(!0),t=C(t,s(r)),t=H.split(t),c(r,o,t),F.moveToBookmark(l)):(e&&n.nodeValue===W?c(r,o,e):(e=a(!0),n=e.firstChild,t.insertNode(e),i=1,c(r,o,e)),F.setCursorLocation(n,i))}function g(){var t,e,i,l,c,d,f,p,m=F.getRng(!0),g=[];for(t=m.startContainer,e=m.startOffset,c=t,3==t.nodeType&&((e!=t.nodeValue.length||t.nodeValue===W)&&(l=!0),c=c.parentNode);c;){if(h(c,r,o)){d=c;break}c.nextSibling&&(l=!0),g.push(c),c=c.parentNode}if(d)if(l)i=F.getBookmark(),m.collapse(!0),m=C(m,s(r),!0),m=H.split(m),u(r,o,m),F.moveToBookmark(i);else{for(p=a(),c=p,f=g.length-1;f>=0;f--)c.appendChild(B.clone(g[f],!1)),c=c.firstChild;c.appendChild(B.doc.createTextNode(W)),c=c.firstChild;var v=B.getParent(d,n);v&&B.isEmpty(v)?d.parentNode.replaceChild(p,d):B.insertAfter(p,d),F.setCursorLocation(c,1),B.isEmpty(d)&&B.remove(d)}}function v(){var e;e=d(F.getStart()),e&&!B.isEmpty(e)&&t.walk(e,function(t){1!=t.nodeType||t.id===y||B.isEmpty(t)||B.setAttrib(t,"data-mce-bogus",null)},"childNodes")}var y="_mce_caret",b=e.settings.caret_debug;self._hasCaretEvents||(e.onBeforeGetContent.addToTop(function(){var t,e=[];if(l(d(F.getStart()),e))for(t=e.length;t--;)B.setAttrib(e[t],"data-mce-bogus","1")}),t.each("onMouseUp onKeyUp".split(" "),function(t){e[t].addToTop(function(){p(),v()})}),e.onKeyDown.addToTop(function(t,e){var n=e.keyCode;(8==n||37==n||39==n)&&p(d(F.getStart())),v()}),F.onSetContent.add(v),self._hasCaretEvents=!0),"apply"==i?m():g()}function N(t){var e,n,i,r,o,a=t.startContainer,s=t.startOffset;if(3==a.nodeType&&s>=a.nodeValue.length&&(s=q(a),a=a.parentNode,e=!0),1==a.nodeType)for(r=a.childNodes,a=r[Math.min(s,r.length-1)],n=new O(a,B.getParent(a,B.isBlock)),(s>r.length-1||e)&&n.next(),i=n.current();i;i=n.next())if(3==i.nodeType&&!w(i))return o=B.create("a",null,W),i.parentNode.insertBefore(o,i),t.setStart(i,0),F.setRng(t),void B.remove(o)}var L,P,I={},R=t.each,B=e.dom,F=e.selection,O=t.dom.TreeWalker,H=new t.dom.RangeUtils(B),$=e.schema.isValidChild,j=(t.isArray,B.isBlock),z=e.settings.forced_root_block,q=B.nodeIndex,W="\ufeff",U=/^(src|href|style)$/,V=!1,X=!0,Y=B.getContentEditable,G=function(t){var n;return e.dom.getParent(t,function(t){return n=e.dom.getStyle(t,"text-decoration"),n&&"none"!==n}),n},K=function(t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=G(t.parentNode),e.dom.getStyle(t,"color")&&n?e.dom.setStyle(t,"text-decoration",n):e.dom.getStyle(t,"textdecoration")===n&&e.dom.setStyle(t,"text-decoration",null))};t.extend(this,{get:s,register:l,apply:c,remove:u,toggle:d,match:f,matchAll:p,matchNode:h,canApply:m,formatChanged:g}),o(),a()}}(tinymce),tinymce.onAddEditor.add(function(t,e){function n(e,n){t.each(n,function(t,n){t&&a.setStyle(e,n,t)}),a.rename(e,"span")}function i(n,i){a=n.dom,s.convert_fonts_to_spans&&t.each(a.select("font,u,strike",i.node),function(t){r[t.nodeName.toLowerCase()](e.dom,t)})}var r,o,a,s=e.settings;s.inline_styles&&(o=t.explode(s.font_size_legacy_values),r={font:function(t,e){n(e,{backgroundColor:e.style.backgroundColor,color:e.color,fontFamily:e.face,fontSize:o[parseInt(e.size,10)-1]})},u:function(t,e){n(e,{textDecoration:"underline"})},strike:function(t,e){n(e,{textDecoration:"line-through"})}},e.onPreProcess.add(i),e.onSetContent.add(i),e.onInit.add(function(){e.selection.onSetContent.add(i)}))}),function(t){var e=t.dom.TreeWalker;t.EnterKey=function(n){function i(i){function c(t){return t&&r.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==r.getContentEditable(t)}function u(e){var n;t.isIE&&!t.isIE11&&r.isBlock(e)&&(n=o.getRng(),e.appendChild(r.create("span",null,"\xa0")),o.select(e),e.lastChild.outerHTML="",o.setRng(n))}function d(t){for(var e,n=t,i=[];n=n.firstChild;){if(r.isBlock(n))return;1!=n.nodeType||l[n.nodeName.toLowerCase()]||i.push(n)
}for(e=i.length;e--;)n=i[e],!n.hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?r.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&r.remove(n)}function h(t){var i,a,s,c,u,d,h=t;if(s=r.createRng(),t.hasChildNodes()){for(i=new e(t,t);a=i.current();){if(3==a.nodeType){s.setStart(a,0),s.setEnd(a,0);break}if(l[a.nodeName.toLowerCase()]){s.setStartBefore(a),s.setEndBefore(a);break}h=a,a=i.next()}a||(s.setStart(h,0),s.setEnd(h,0))}else"BR"==t.nodeName?t.nextSibling&&r.isBlock(t.nextSibling)?((!M||9>M)&&(d=r.create("br"),t.parentNode.insertBefore(d,t)),s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)):(s.setStart(t,0),s.setEnd(t,0));o.setRng(s),r.remove(d),u=r.getViewPort(n.getWin()),c=r.getPos(t).y,(c<u.y||c+25>u.y+u.h)&&n.getWin().scrollTo(0,c<u.y?c:c-u.h+25)}function f(e){var n,i,o,s=T;if(n=e||"TABLE"==L?r.create(e||I):k.cloneNode(!1),o=n,a.keep_styles!==!1)do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(s.nodeName)){if("_mce_caret"==s.id)continue;i=s.cloneNode(!1),r.setAttrib(i,"id",""),n.hasChildNodes()?(i.appendChild(n.firstChild),n.appendChild(i)):(o=i,n.appendChild(i))}while(s=s.parentNode);return(!t.isIE||t.isIE11)&&(o.innerHTML='<br data-mce-bogus="1">'),n}function p(t){var n,i,r;if(3==T.nodeType&&(t?S>0:S<T.nodeValue.length))return!1;if(T.parentNode==k&&R&&!t)return!0;if(t&&1==T.nodeType&&T==k.firstChild)return!0;if("TABLE"===T.nodeName||T.previousSibling&&"TABLE"==T.previousSibling.nodeName)return R&&!t||!R&&t;for(n=new e(T,k),3==T.nodeType&&(t&&0==S?n.prev():t||S!=T.nodeValue.length||n.next());i=n.current();){if(1===i.nodeType){if(!i.getAttribute("data-mce-bogus")&&(r=i.nodeName.toLowerCase(),l[r]&&"br"!==r))return!1}else if(3===i.nodeType&&!/^[ \t\r\n]*$/.test(i.nodeValue))return!1;t?n.prev():n.next()}return!0}function m(t,e){var n,i,o,a,s,l=I||"P";if(i=r.getParent(t,r.isBlock),!i||!c(i)){if(i=i||C,!i.hasChildNodes())return n=r.create(l),i.appendChild(n),B.setStart(n,0),B.setEnd(n,0),n;for(a=t;a.parentNode!=i;)a=a.parentNode;for(;a&&!r.isBlock(a);)o=a,a=a.previousSibling;if(o){for(n=r.create(l),o.parentNode.insertBefore(n,o),a=o;a&&!r.isBlock(a);)s=a.nextSibling,n.appendChild(a),a=s;B.setStart(t,e),B.setEnd(t,e)}}return t}function g(){function t(t){for(var e=N[t?"firstChild":"lastChild"];e&&1!=e.nodeType;)e=e[t?"nextSibling":"previousSibling"];return e===k}A=I?f(I):r.create("BR"),t(!0)&&t()?r.replace(A,N):t(!0)?N.parentNode.insertBefore(A,N):t()?(r.insertAfter(A,N),u(A)):(_=B.cloneRange(),_.setStartAfter(k),_.setEndAfter(N),D=_.extractContents(),r.insertAfter(D,N),r.insertAfter(A,N)),r.remove(k),h(A),s.add()}function v(){for(var t,n=new e(T,k);t=n.next();)if(l[t.nodeName.toLowerCase()]||t.length>0)return!0}function y(){var e,n,i;T&&3==T.nodeType&&S>=T.nodeValue.length&&(t.isIE&&!t.isIE11||v()||(e=r.create("br"),B.insertNode(e),B.setStartAfter(e),B.setEndAfter(e),n=!0)),e=r.create("br"),B.insertNode(e),t.isIE&&!t.isIE11&&"PRE"==L&&(!M||8>M)&&e.parentNode.insertBefore(r.doc.createTextNode("\r"),e),i=r.create("span",{},"&nbsp;"),e.parentNode.insertBefore(i,e),o.scrollIntoView(i),r.remove(i),n?(B.setStartBefore(e),B.setEndBefore(e)):(B.setStartAfter(e),B.setEndAfter(e)),o.setRng(B),s.add()}function b(t){do 3===t.nodeType&&(t.nodeValue=t.nodeValue.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)}function x(t){var e,n,i=r.getRoot();for(e=t;e!==i&&"false"!==r.getContentEditable(e);)"true"===r.getContentEditable(e)&&(n=e),e=e.parentNode;return e!==i?n:i}function w(e){var n;(!t.isIE||t.isIE11)&&(e.normalize(),n=e.lastChild,(!n||/^(left|right)$/gi.test(r.getStyle(n,"float",!0)))&&r.add(e,"br"))}var _,C,T,S,k,M,E,A,D,N,L,P,I,R,B=o.getRng(!0);if(!B.collapsed)return void n.execCommand("Delete");if(!i.isDefaultPrevented()&&(T=B.startContainer,S=B.startOffset,I=(a.force_p_newlines?"p":"")||a.forced_root_block,I=I?I.toUpperCase():"",M=r.doc.documentMode,E=i.shiftKey,1==T.nodeType&&T.hasChildNodes()&&(R=S>T.childNodes.length-1,T=T.childNodes[Math.min(S,T.childNodes.length-1)]||T,S=R&&3==T.nodeType?T.nodeValue.length:0),C=x(T))){if(s.beforeChange(),!r.isBlock(C)&&C!=r.getRoot())return void((!I||E)&&y());if((I&&!E||!I&&E)&&(T=m(T,S)),k=r.getParent(T,r.isBlock),N=k?r.getParent(k.parentNode,r.isBlock):null,L=k?k.nodeName.toUpperCase():"",P=N?N.nodeName.toUpperCase():"","LI"!=P||i.ctrlKey||(k=N,L=P),"LI"==L){if(!I&&E)return void y();if(r.isEmpty(k))return/^(UL|OL|LI)$/.test(N.parentNode.nodeName)?!1:void g()}if("PRE"==L&&a.br_in_pre!==!1){if(!E)return void y()}else if(!I&&!E&&"LI"!=L||I&&E)return void y();I=I||"P",p()?(A=/^(H[1-6]|PRE)$/.test(L)&&"HGROUP"!=P?f(I):f(),a.end_container_on_empty_block&&c(N)&&r.isEmpty(k)?A=r.split(N,k):r.insertAfter(A,k),h(A)):p(!0)?(A=k.parentNode.insertBefore(f(),k),u(A)):(_=B.cloneRange(),_.setEndAfter(k),D=_.extractContents(),b(D),A=D.firstChild,r.insertAfter(D,k),d(A),w(k),h(A)),r.setAttrib(A,"id",""),s.add()}}var r=n.dom,o=n.selection,a=n.settings,s=n.undoManager,l=n.schema.getNonEmptyElements();n.onKeyDown.add(function(t,e){13==e.keyCode&&i(e)!==!1&&e.preventDefault()})}}(tinymce);