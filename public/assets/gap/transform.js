var transform={queue:{},transform:function(t,e,n){var r=this;this.queue.hasOwnProperty(e)||(this.queue[e]={count:0,callstack:[],waiting:!1}),++this.queue[e].count,this.queue[e].callstack.push({type:t,selector:e,params:n}),this.queue[e].waiting||1!=this.queue[e].count||(this.queue[e].waiting=!0,setTimeout(function(){r.next(e)},500))},next:function(t){this.queue[t].waiting=!1;var e=this.queue[t].callstack.shift(),n=e.params,r=this,i=500;switch(--this.queue[t].count,e.type){case"rotate":this.rotate(t,n.a);break;case"move":this.move(t,n.x,n.y);break;case"scale":this.scale(t,n.x,n.y);break;case"skew":this.skew(t,n.x,n.y)}console.log(this.queue[t].count),this.queue[t].count>=1&&(this.queue[t].waiting=!0,setTimeout(function(){r.next(t)},i))},rotate:function(e,r){t=this.rotateM(r),c=this.fromString($(e).css("transform")),n=c.x(t),css=this.toString(n),$(e).css({transform:css})},move:function(e,r,i){t=this.translateM(r,i),c=this.fromString($(e).css("transform")),n=c.x(t),css=this.toString(n),$(e).css({transform:css})},scale:function(e,r,i){t=this.scaleM(r,i),c=this.fromString($(e).css("transform")),n=c.x(t),css=this.toString(n),$(e).css("transform",css)},skew:function(e,r,i){t=this.skewM(r,i),c=this.fromString($(e).css("transform")),n=c.x(t),css=this.toString(n),$(e).css({transform:css})},reset:function(t){$(t).css({transform:""})},rotateM:function(t){var e=parseFloat(t)*(Math.PI/180),n=Math.cos(e),r=Math.sin(e),i=n,o=r,a=-r,s=n;return $M([[i,a,0],[o,s,0],[0,0,1]])},skewM:function(t,e){var n=parseFloat(t)*(Math.PI/180),r=parseFloat(e)*(Math.PI/180),i=Math.tan(n),o=Math.tan(r);return $M([[1,i,0],[o,1,0],[0,0,1]])},translateM:function(t,e){var n=t||0,r=e||0;return $M([[1,0,n],[0,1,r],[0,0,1]])},scaleM:function(t,e){var n=t||0,r=e||0;return $M([[n,0,0],[0,r,0],[0,0,1]])},toString:function(t){var e,n,r="matrix(";for(n=1;3>=n;n++)for(e=1;2>=e;e++)r+=t.e(e,n)+", ";return r=r.substr(0,r.length-2)+")"},fromString:function(t){var e=/^matrix\((\S*), (\S*), (\S*), (\S*), (\S*), (\S*)\)$/g.exec(t),n=parseFloat(e?e[1]:1),r=parseFloat(e?e[2]:0),i=parseFloat(e?e[3]:0),o=parseFloat(e?e[4]:1),a=parseFloat(e?e[5]:0),s=parseFloat(e?e[6]:0);return $M([[n,i,a],[r,o,s],[0,0,1]])}};