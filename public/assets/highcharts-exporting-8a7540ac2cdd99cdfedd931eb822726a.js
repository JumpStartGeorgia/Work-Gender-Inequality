!function(t){var e,n=t.Chart,r=t.addEvent,i=t.removeEvent,o=t.createElement,a=t.discardElement,s=t.css,l=t.merge,u=t.each,c=t.extend,f=Math.max,h=document,d=window,p=t.isTouchDevice,g=t.Renderer.prototype.symbols,m=t.getOptions();c(m.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),m.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:p?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},m.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},t.post=function(t,e,n){var r,t=o("form",l({method:"post",action:t,enctype:"multipart/form-data"},n),{display:"none"},h.body);for(r in e)o("input",{type:"hidden",name:r,value:e[r]},null,t);t.submit(),a(t)},c(n.prototype,{getSVG:function(e){var n,r,i,s,f=this,d=l(f.options,e);return h.createElementNS||(h.createElementNS=function(t,e){return h.createElement(e)}),e=o("div",null,{position:"absolute",top:"-9999em",width:f.chartWidth+"px",height:f.chartHeight+"px"},h.body),r=f.renderTo.style.width,s=f.renderTo.style.height,r=d.exporting.sourceWidth||d.chart.width||/px$/.test(r)&&parseInt(r,10)||600,s=d.exporting.sourceHeight||d.chart.height||/px$/.test(s)&&parseInt(s,10)||400,c(d.chart,{animation:!1,renderTo:e,forExport:!0,width:r,height:s}),d.exporting.enabled=!1,d.series=[],u(f.series,function(t){i=l(t.options,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:t.visible}),i.isInternal||d.series.push(i)}),n=new t.Chart(d,f.callback),u(["xAxis","yAxis"],function(t){u(f[t],function(e,r){var i=n[t][r],o=e.getExtremes(),a=o.userMin,o=o.userMax;i&&(void 0!==a||void 0!==o)&&i.setExtremes(a,o,!0,!1)})}),r=n.container.innerHTML,d=null,n.destroy(),a(e),r=r.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"\xa0").replace(/&shy;/g,"\xad").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(t){return t.toLowerCase()}),r=r.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},exportChart:function(e,n){var e=e||{},r=this.options.exporting,r=this.getSVG(l({chart:{borderRadius:0}},r.chartOptions,n,{exporting:{sourceWidth:e.sourceWidth||r.sourceWidth,sourceHeight:e.sourceHeight||r.sourceHeight}})),e=l(this.options.exporting,e);t.post(e.url,{filename:e.filename||"chart",type:e.type,width:e.width||0,scale:e.scale||2,svg:r},e.formAttributes)},print:function(){var t=this,e=t.container,n=[],r=e.parentNode,i=h.body,o=i.childNodes;t.isPrinting||(t.isPrinting=!0,u(o,function(t,e){1===t.nodeType&&(n[e]=t.style.display,t.style.display="none")}),i.appendChild(e),d.focus(),d.print(),setTimeout(function(){r.appendChild(e),u(o,function(t,e){1===t.nodeType&&(t.style.display=n[e])}),t.isPrinting=!1},1e3))},contextMenu:function(t,e,n,a,l,h,d){var p,g,m,v=this,y=v.options.navigation,b=y.menuItemStyle,x=v.chartWidth,_=v.chartHeight,w="cache-"+t,T=v[w],S=f(l,h),C=function(e){v.pointer.inClass(e.target,t)||g()};T||(v[w]=T=o("div",{className:t},{position:"absolute",zIndex:1e3,padding:S+"px"},v.container),p=o("div",null,c({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},y.menuStyle),T),g=function(){s(T,{display:"none"}),d&&d.setState(0),v.openMenu=!1},r(T,"mouseleave",function(){m=setTimeout(g,500)}),r(T,"mouseenter",function(){clearTimeout(m)}),r(document,"mouseup",C),r(v,"destroy",function(){i(document,"mouseup",C)}),u(e,function(t){if(t){var e=t.separator?o("hr",null,null,p):o("div",{onmouseover:function(){s(this,y.menuItemHoverStyle)},onmouseout:function(){s(this,b)},onclick:function(){g(),t.onclick.apply(v,arguments)},innerHTML:t.text||v.options.lang[t.textKey]},c({cursor:"pointer"},b),p);v.exportDivElements.push(e)}}),v.exportDivElements.push(p,T),v.exportMenuWidth=T.offsetWidth,v.exportMenuHeight=T.offsetHeight),e={display:"block"},n+v.exportMenuWidth>x?e.right=x-n-l-S+"px":e.left=n-S+"px",a+h+v.exportMenuHeight>_&&"top"!==d.alignOptions.verticalAlign?e.bottom=_-a-S+"px":e.top=a+h-S+"px",s(T,e),v.openMenu=!0},addButton:function(n){var r,i,o=this,a=o.renderer,s=l(o.options.navigation.buttonOptions,n),u=s.onclick,f=s.menuItems,h={stroke:s.symbolStroke,fill:s.symbolFill},d=s.symbolSize||12;if(o.btnCount||(o.btnCount=0),o.exportDivElements||(o.exportDivElements=[],o.exportSVGElements=[]),s.enabled!==!1){var p,g=s.theme,m=g.states,v=m&&m.hover,m=m&&m.select;delete g.states,u?p=function(){u.apply(o,arguments)}:f&&(p=function(){o.contextMenu(i.menuClassName,f,i.translateX,i.translateY,i.width,i.height,i),i.setState(2)}),s.text&&s.symbol?g.paddingLeft=t.pick(g.paddingLeft,25):s.text||c(g,{width:s.width,height:s.height,padding:0}),i=a.button(s.text,0,0,p,g,v,m).attr({title:o.options.lang[s._titleKey],"stroke-linecap":"round"}),i.menuClassName=n.menuClassName||"highcharts-menu-"+o.btnCount++,s.symbol&&(r=a.symbol(s.symbol,s.symbolX-d/2,s.symbolY-d/2,d,d).attr(c(h,{"stroke-width":s.symbolStrokeWidth||1,zIndex:1})).add(i)),i.add().align(c(s,{width:i.width,x:t.pick(s.x,e)}),!0,"spacingBox"),e+=(i.width+s.buttonSpacing)*("right"===s.align?-1:1),o.exportSVGElements.push(i,r)}},destroyExport:function(t){var e,n,t=t.target;for(e=0;e<t.exportSVGElements.length;e++)(n=t.exportSVGElements[e])&&(n.onclick=n.ontouchstart=null,t.exportSVGElements[e]=n.destroy());for(e=0;e<t.exportDivElements.length;e++)n=t.exportDivElements[e],i(n,"mouseleave"),t.exportDivElements[e]=n.onmouseout=n.onmouseover=n.ontouchstart=n.onclick=null,a(n)}}),g.menu=function(t,e,n,r){return["M",t,e+2.5,"L",t+n,e+2.5,"M",t,e+r/2+.5,"L",t+n,e+r/2+.5,"M",t,e+r-1.5,"L",t+n,e+r-1.5]},n.prototype.callbacks.push(function(t){var n,i=t.options.exporting,o=i.buttons;if(e=0,i.enabled!==!1){for(n in o)t.addButton(o[n]);r(t,"destroy",t.destroyExport)}})}(Highcharts);